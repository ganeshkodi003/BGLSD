<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<!--
	CREATED BY : NITHYAPRIYA
	DATE       : 22-09-24
	PURPOSE    : BACP - MINIMAL DATA
	VERSION    : 01
-->
<!--
	CREATED BY : SURIYA K
	DATE       : 18-11-24
	PURPOSE    : UPDATED CODES
	VERSION    : 02
-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/font-awesome/5.9.0/css/all.min.css"
	th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
	th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
<link rel="stylesheet" type="text/css"
	href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
	th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">

<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
	th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
<script class="jsbin"
	src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
	th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
<script src="/webjars/jquery/3.4.1/jquery.min.js"
	th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
	th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>

<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
	th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>

<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
	th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
<script
	src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
	th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>


<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
	th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
<script src="js/bootstrap411.js"></script>
<link rel="stylesheet" type="text/css"
	href="https://cdn.jsdelivr.net/npm/signature_pad/dist/signature-pad.css">
<script src="https://cdn.jsdelivr.net/npm/signature_pad"></script>
<script src="https://cdn.jsdelivr.net/npm/signature_pad"></script>
<link rel="stylesheet" href="css/signature-pad.css">


<style>
.uniform-input {
	width: 160px; /* You can adjust this width to fit your layout */
	box-sizing: border-box; /* Ensures consistent sizing */
}

.row {
	display: flex;
	margin-left: 0px;
	margin-right: 0px
}

.col, .col-1, .col-10, .col-11, .col-12, .col-2, .col-3, .col-4, .col-5,
	.col-6, .col-7, .col-8, .col-9, .col-auto, .col-lg, .col-lg-1,
	.col-lg-10, .col-lg-11, .col-lg-12, .col-lg-2, .col-lg-3, .col-lg-4,
	.col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-auto,
	.col-md, .col-md-1, .col-md-10, .col-md-11, .col-md-12, .col-md-2,
	.col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8,
	.col-md-9, .col-md-auto, .col-sm, .col-sm-1, .col-sm-10, .col-sm-11,
	.col-sm-12, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6,
	.col-sm-7, .col-sm-8, .col-sm-9, .col-sm-auto, .col-xl, .col-xl-1,
	.col-xl-10, .col-xl-11, .col-xl-12, .col-xl-2, .col-xl-3, .col-xl-4,
	.col-xl-5, .col-xl-6, .col-xl-7, .col-xl-8, .col-xl-9, .col-xl-auto {
	width: 100%;
	padding-right: 0px;
	padding-left: 0px;
}

.btn {
	line-height: 0.5rem;
}

.table-bordered td, .table-bordered th {
	font-size: smaller;
}

.container-manager {
	width: 83.5%;
	padding-right: 15px;
	padding-left: 15px;
	margin-right: auto;
	margin-left: 17.3%;
	margin-top: 80px;
	margin-top: 80px;
}

.signature-pad {
	margin: auto;
	height: auto;
}

.custom-modal {
	max-width: 80%; /* Set width as 80% of the screen width */
	max-height: 500%; /* Set height as 80% of the screen height */
}

.custom-modal .modal-content {
	height: 500%; /* Make sure the content fills the full height */
}

.signature-pad--body {
	min-height: 360px;
}

.signature-pad--actions {
	overflow: hidden;
}

.signature-pad--actions>div:first-child {
	float: left;
}

.signature-pad--actions>div:last-child {
	float: right;
}

.tab {
	overflow: hidden;
	border: 1px solid #ccc;
	background-color: #f1f1f1;
}

canvas {
	display: block;
	position: relative;
	border: 1px solid;
}

/*css style starts for the image*/
.file-upload {
	background-color: #ffffff;
	width: 200px;
	margin: 0 auto;
	padding: 20px;
}

.file-upload-content {
	display: none;
	text-align: left;
}

.image-upload-wrap {
	margin-top: 0px;
	margin-left: 20px;
	width: 150px;
	height: 150px;
	border: 1px dashed #000000;
	position: relative;
}

.image-title-wrap {
	padding: 0 15px 15px 15px;
	color: #222;
}

.drag-text {
	text-align: center;
}

.drag-text h3 {
	font-weight: 100;
	text-transform: uppercase;
	color: #000000;
	padding: 60px 0;
}

.file-upload-image {
	max-height: 200px;
	max-width: 200px;
	margin: auto;
	padding: 20px;
}

.remove-image {
	width: 200px;
	margin: 0;
	color: #fff;
	background: #cd4535;
	border: none;
	padding: 10px;
	border-radius: 4px;
	border-bottom: 4px solid #b02818;
	transition: all .2s ease;
	outline: none;
	text-transform: uppercase;
	font-weight: 700;
}

.remove-image:active {
	border: 0;
	transition: all .2s ease;
}

.file-upload-input {
	position: absolute;
	margin: 0;
	padding: 0;
	width: 100%;
	height: 100%;
	outline: none;
	opacity: 0;
	cursor: pointer;
}

.image-upload-wrapone {
	margin-top: 30px;
	width: 150px;
	height: 150px;
	border: 1px dashed #000000;
	position: relative;
}

.image-dropping, .image-upload-wrap:hover {
	background-color: #ffffff;
	border: 4px dashed #ffffff;
}

/* Style the buttons inside the tab */
.tab button {
	background-color: inherit;
	float: left;
	border: none;
	outline: none;
	cursor: pointer;
	padding: 14px 16px;
	transition: 0.3s;
	font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
	background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
	background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
	display: none;
	padding: 6px 12px;
	border: 0px solid #ccc;
	border-top: none;
}

.input-group-append {
	margin-top: 130px;
	margin-left: 30px;
}

#CorporateDetail, #RetailDetail2, #fieldsOption3, #Joint_Account_Retail,
	#Joint_Account_Corporate {
	display: none;
}

#duplicate_Yes, #duplicate_No, #Blacklist_Yes, #Blacklist_No,
	#Negativelist_No, #Negativelist_Yes {
	display: none;
}

.loader__dot {
	animation: 1s blink infinite
}

.loader__dot:nth-child(2) {
	animation-delay: 250ms
}

.loader__dot:nth-child(3) {
	animation-delay: 500ms
}

body {
	font-family: Arial, Helvetica, sans-serif;
}

.myModal {
	position: absolute;
	width: 50%;
	height: 50%;
	float: top;
}

/* The Modal (background) */
.modal {
	display: none;
	/* Hidden by default */
	position: absolute;
	/* Stay in place */
	z-index: 1;
	/* Sit on top */
	padding-top: 100px;
	/* Location of the box */
	left: 0;
	top: 0;
	width: 100%;
	/* Full width */
	height: 100%;
	/* Full height */
	overflow: auto;
	/* Enable scroll if needed */
	background-color: rgb(0, 0, 0);
	/* Fallback color */
	background-color: rgba(0, 0, 0, 0.4);
	/* Black w/ opacity */
}

/* Modal Content */
.modal-content {
	background-color: #fefefe;
	margin: auto;
	padding: 20px;
	border: 1px solid #888;
	width: 80%;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0
		rgba(0, 0, 0, 0.19);
	-webkit-animation-name: animatetop;
	-webkit-animation-duration: 0.4s;
	animation-name: animatetop;
	animation-duration: 0.4s
}

/* Add Animation */
@
-webkit-keyframes animatetop {from { top:-300px;
	opacity: 0
}

to {
	top: 0;
	opacity: 1
}

}
@
keyframes animatetop {from { top:-300px;
	opacity: 0
}

to {
	top: 0;
	opacity: 1
}

}

/* align-items: center;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}*/

/* The Close Button */
.close {
	color: #aaaaaa;
	float: right;
	font-size: 28px;
	font-weight: bold;
}

.close:hover, .close:focus {
	color: #000;
	text-decoration: none;
	cursor: pointer;
}

.modal-header {
	padding: 2px 16px;
	background-color: #BBC3CB;
	color: balck;
}

.modal-body {
	padding: 2px 16px;
}

.modal-footer {
	padding: 2px 16px;
	background-color: #BBC3CB;
	color: black;
}

.flex-row {
	display: flex;
}

.wrapper {
	border: 1px solid #4b00ff;
	border-right: 0;
}

canvas#signature-pad {
	background: #fff;
	width: 100%;
	height: 100%;
	cursor: crosshair;
}

button#clear {
	height: 100%;
	background: #4b00ff;
	border: 1px solid transparent;
	color: #fff;
	font-weight: 600;
	cursor: pointer;
}

button#clear span {
	transform: rotate(90deg);
	display: block;
}

.error {
	color: red;
}
</style>
<style type="text/css">
.ml-700 {
	margin-left: 800px;
}
</style>
<style>
.spaced1 {
	padding-left: 123px; /* Adjust the value as needed */
}

.spaced11 {
	padding-left: 44px; /* Adjust the value as needed */
}

.spaced2 {
	padding-left: 12px; /* Adjust the value as needed */
}

.spaced21 {
	padding-left: 128px; /* Adjust the value as needed */
}

.spaced3 {
	padding-left: 47px; /* Adjust the value as needed */
}

.spaced31 {
	padding-left: 129px; /* Adjust the value as needed */
}

.spaced4 {
	padding-left: 160px; /* Adjust the value as needed */
}

.spaced41 {
	padding-left: 139px;
}

/*inv  */
/* na id */
.spacedInv1 {
	padding-left: 190px; /* Adjust the value as needed */
}

.spacedInv11 {
	padding-left: 144px; /* Adjust the value as needed */
}

.spacedInv2 {
	padding-left: 193px; /* Adjust the value as needed */
}

.spacedInv21 {
	padding-left: 139px; /* Adjust the value as needed */
}
/* p id */
.spacedInv3 {
	padding-left: 180px; /* Adjust the value as needed */
}

.spacedInv31 {
	padding-left: 144px; /* Adjust the value as needed */
}
/* //full name */
.spacedInv4 {
	padding-left: 193px; /* Adjust the value as needed */
}

.spacedInv41 {
	padding-left: 86px;
}
</style>
<script>
	function Home() {

		location.href = 'Dashboard';
	}

	function Back() {
		window.history.back();
	}
</script>


<script th:inline="javascript">
		/*<![CDATA[*/
function nextt() {
 
    var count = document.getElementById("listsize").innerHTML;
   
    var ApprefNO = document.getElementById("appl_ref_no").value;
    var ls = document.getElementById("listsizecount").innerHTML;
  //  alert(count + ApprefNO + ls);

    if (count == ls) {
        // Do something if count is equal to ls
    } else {
        location.href = 'CustomerOnboarding?formmode=add&count=' + count + '&ApprefNO=' + ApprefNO + '&ls=' + ls;
        event.preventDefault();
    }
}


function prevv(a){
	
	  
    var count = document.getElementById("listsize").innerHTML;
   // alert(count);
    var ApprefNO = document.getElementById("appl_ref_no").value;
    var ls = document.getElementById("listsizecount").innerHTML;
   // alert(count + ApprefNO + ls);

if(ls== "1"){
	
}
else{
  // location.href = 'CustomerOnboarding?formmode=add&count=' + count + "&ApprefNO=" + ApprefNO + '&ls=' + adjustedLs;
 window.history.back();
}
};



		function myFunction() {
			var x = document.getElementById("noOfper").value;
			document.getElementById("NOP").innerHTML = x;
		}

		var source = document.getElementById("noOfper").value;

		source.onmessage = function (event) {
			var x = document.getElementById("noOfper").value;
			document.getElementById("NOP").innerHTML = x;
		};

		window.onload = function () {
			document.getElementById('firstbutton').click();
		}
		function list() {
			location.href = 'AuditInquiries?formmode=list';
		}
		function fnClick(a) {
			var refnumber = a.getAttribute("data-refnumber")
			location.href = 'AuditInquiries?formmode=edit&refnumber=' + refnumber
		}

		function home() {
			location.href = 'Dashboard'
		}

		function fndashboard() {
			location.href = 'Dashboard'
		}

		function add() {
			location.href = 'CustomerOnboarding?formmode=add';
		}

		function back() {
			window.history.back();
		}

		function autofill() {
			//alert("here");
			var first = document.getElementById("cust_name").value;
			//alert(first);
			document.getElementById("cust_name").value = first;
		}
		function validateField(fieldId, errorMessage) {
		    if ($(fieldId).val() === "") {
		        showError($(fieldId), errorMessage);
		        return true;
		    } else {
		        hideError($(fieldId));
		        return false;
		    }
		}
	
		
		function checkcust() {
		    let hasError = false;
	        var accType = $("#acc_type").val(); // Get the selected account type 
	        var showcorporate = document.getElementById('showcorporate').value;
	        var cust_grp = document.getElementById('cust_grp').value;
	        //for customer check
           var fullname = document.getElementById("fullname").value; 
           
            var Mobile_num = document.getElementById("Mobile_num").value; 
            var Passport_num = document.getElementById("Passport_num").value; 
            
            var natid = document.getElementById("national_id3").value; 
		    //JOINT
		     var full_name = document.getElementById("full_name").value; 
           
            var mbl_num = document.getElementById("mbl_num").value; 
            var passno = document.getElementById("passno").value; 
            
            var national_id = document.getElementById("national_id").value; 
            //COR
		    var cor_name = document.getElementById("cor_name").value;
		 
		    var cer_od_incop = document.getElementById("cer_od_incop").value;
		  
		    var buss_ref_no = document.getElementById("buss_ref_no").value;
		 
		    var lno = document.getElementById("lno").value;
		
		    var duplicate_Yes1 = document.getElementById('duplicate_Yes1');
		    var duplicate_Yes2 = document.getElementById('duplicate_Yes2');
		    var duplicate_Yes3 = document.getElementById('duplicate_Yes3');
		    var duplicate_No = document.getElementById('duplicate_No');
		    var Blacklist_Yes1 = document.getElementById('Blacklist_Yes1');
		    var Blacklist_Yes2 = document.getElementById('Blacklist_Yes2');
		    var Blacklist_Yes3 = document.getElementById('Blacklist_Yes3');
		    var Blacklist_No = document.getElementById('Blacklist_No');
		    var Negativelist_Yes1 = document.getElementById('Negativelist_Yes1');
		    var Negativelist_Yes2 = document.getElementById('Negativelist_Yes2');
		    var Negativelist_Yes3 = document.getElementById('Negativelist_Yes3');
		    var Negativelist_No = document.getElementById('Negativelist_No');

		    // Modals
		    
	      
	        
	        if (cust_grp === 'RETAIL' && accType === '') {
	            showError($("#acc_type"), 'Required');
	            hasError = true;
	        } else {
	            hideError($("#acc_type"));
	        }

		    // Validation for 'INDIVIDUAL' account type
		    if (accType === "INDIVIDUAL") {
		    	

		    	    hasError = validateField("#fullname", 'Required') || hasError;
		    	    hasError = validateField("#prisolidmini", 'Required') || hasError;
		    	    hasError = validateField("#Cust_Grp", 'Required') || hasError;
		    	    hasError = validateField("#Passport_num", 'Required') || hasError;
		    	    hasError = validateField("#short_nam", 'Required') || hasError;
		    	    hasError = validateField("#national_id3", 'Required') || hasError;
		    	    hasError = validateField("#cust_name", 'Required') || hasError;
		    	    hasError = validateField("#date_bir", 'Required') || hasError;
		    	    var messageja = document.getElementById("dob-message").textContent;

		    	    hasError = validateField("#Mobile_num", 'Required') || hasError;
		    	    document.getElementById("customerCheck").style.display="none";
		       if (!hasError && messageja !=="Customer is a Minor, Not Eligible.") {
		    	   var dedmodal = document.getElementById("myModalded");
				    dedmodal.style.display = "block";
				    event.preventDefault();
		    
				    document.getElementById("customerCheck").style.display="block";
				    
		        // Duplicate list check
			    $.ajax({
			        type: 'GET',
			        url: "/BGLS/CheckDuplicateIndiv?id=" + natid + '&Mobile_num='+ Mobile_num+
			        		'&Passport_num='+ Passport_num   + '&fullname='+ fullname,
			        success: function (response) {
			        	
			            if (response === "MATCH NOT FOUND") {
	                      duplicate_No.style.display = 'block';
	        } else {
	            duplicate_Yes1.style.display = 'block';
	            duplicate_Yes2.style.display = 'block';
	            duplicate_Yes3.style.display = 'block';
	            $('#duplicate_Yes3').html(response);
	        }  dedmodal.style.display = "none";
			          
			        }
			    });

			    // Blacklist check
			    $.ajax({
			    	 type: 'GET',
				     url: "/BGLS/CheckBlackListIndiv?id=" + natid + '&Mobile_num='+ Mobile_num+
		        		'&Passport_num='+ Passport_num   + '&fullname='+ fullname,
			        success: function (response) {
			          
			            if (response === "MATCH NOT FOUND"){
			            	Blacklist_No.style.display = 'block';
			            } else {
			            	Blacklist_Yes1.style.display = 'block';
			            	Blacklist_Yes2.style.display = 'block';
			            	Blacklist_Yes3.style.display = 'block';
			                 $('#Blacklist_Yes3').html(response);
			            	
			               // $('#Blacklist_No').val(response); 
			            }
			    	    dedmodal.style.display = "none";
			        }
		
			    });

			    // Negative list check
			    $.ajax({
			        type: 'GET',
			        url: "/BGLS/CheckNegativeListIndiv?id=" + natid + '&Mobile_num='+ Mobile_num+
	        		'&Passport_num='+ Passport_num   + '&fullname='+ fullname,
	        		  success: function (response) {
	  		          
	  		            if (response === "MATCH NOT FOUND"){
	  		            	Negativelist_No.style.display = 'block';
	  		            } else {
	  		            	Negativelist_Yes1.style.display = 'block';
	  		            	Negativelist_Yes2.style.display = 'block';
	  		            	Negativelist_Yes3.style.display = 'block';
	  		                 $('#Negativelist_Yes3').html(response);
	  		              
	  		            }
	  		          dedmodal.style.display = "none";
	  		        }
			   
			    });
			    document.getElementById("checkbuttons").style.visibility = 'hidden';
			    document.getElementById("proceed&Hold").removeAttribute("hidden");
			    document.getElementById("customerCheck").removeAttribute("hidden");
		       }
		    } else if (accType === "JOINT ACCOUNT") {
		    	hasError = validateField("#cust_grp2", 'Required') || hasError;
		    	hasError = validateField("#shgrp", 'Required') || hasError;
		    	hasError = validateField("#rel", 'Required') || hasError;
		    	hasError = validateField("#brn", 'Required') || hasError;
		    	hasError = validateField("#first_name", 'Required') || hasError;
		    	hasError = validateField("#full_name", 'Required') || hasError;
		    	hasError = validateField("#dob", 'Required') || hasError;
		    	hasError = validateField("#mbl_num", 'Required') || hasError;
		    	hasError = validateField("#passno", 'Required') || hasError;
		    	hasError = validateField("#national_id", 'Required') || hasError;
		        var messageja = document.getElementById("dob-messageja").textContent;
		    	 document.getElementById("customerCheck").style.display="none";
				    
		         if (!hasError &&  messageja !=="Customer is a Minor, Not Eligible." ) {
			    	   var dedmodal = document.getElementById("myModalded");
					    dedmodal.style.display = "block";
					    event.preventDefault();
			    
					    document.getElementById("customerCheck").style.display="block";
				    $.ajax({
				        type: 'GET',
				        url: "/BGLS/CheckDuplicateJoint?id=" + national_id + '&Mobile_num='+ mbl_num+
				        		'&Passport_num='+ passno   + '&fullname='+ full_name,
				        success: function (response) {
				        	
				            if (response === "MATCH NOT FOUND") {
		                      duplicate_No.style.display = 'block';
		        } else {
		            duplicate_Yes1.style.display = 'block';
		            duplicate_Yes2.style.display = 'block';
		            duplicate_Yes3.style.display = 'block';
		            $('#duplicate_Yes3').html(response);
		        }  dedmodal.style.display = "none";
				          
				        }
				    });

				    // Blacklist check
				    $.ajax({
				    	 type: 'GET',
					     url: "/BGLS/CheckBlackListJoint?id=" + national_id + '&Mobile_num='+ mbl_num+
			        		'&Passport_num='+ passno   + '&fullname='+ full_name,
				        success: function (response) {
				          
				            if (response === "MATCH NOT FOUND"){
				            	Blacklist_No.style.display = 'block';
				            } else {
				            	Blacklist_Yes1.style.display = 'block';
				            	Blacklist_Yes2.style.display = 'block';
				            	Blacklist_Yes3.style.display = 'block';
				                 $('#Blacklist_Yes3').html(response);
				            	
				               // $('#Blacklist_No').val(response); 
				            }
				    	    dedmodal.style.display = "none";
				        }
			
				    });

				    // Negative list check
				    $.ajax({
				        type: 'GET',
				        url: "/BGLS/CheckNegativeListJoint?id=" + national_id + '&Mobile_num='+ mbl_num+
		        		'&Passport_num='+ passno   + '&fullname='+ full_name,
		        		  success: function (response) {
		  		            
		  		            if (response === "MATCH NOT FOUND"){
		  		            	Negativelist_No.style.display = 'block';
		  		            } else {
		  		            	Negativelist_Yes1.style.display = 'block';
		  		            	Negativelist_Yes2.style.display = 'block';
		  		            	Negativelist_Yes3.style.display = 'block';
		  		                 $('#Negativelist_Yes3').html(response);
		  		              
		  		            }
		  		          dedmo
		  		          dal.style.display = "none";
		  		        }
				   
				    });
				    document.getElementById("checkbuttons").style.visibility = 'hidden';
				    document.getElementById("proceed&Hold").removeAttribute("hidden");
				    document.getElementById("customerCheck").removeAttribute("hidden");
				    
				    
		         }
		    }else if(showcorporate === 'CORPORATE'){
		    	
		    	 hasError = validateField("#cons_name", 'Required') || hasError;
		    	 hasError = validateField("#cor_name", 'Required') || hasError;
		    	 hasError = validateField("#trade_name", 'Required') || hasError;
		    	 hasError = validateField("#cer_od_incop", 'Required') || hasError;
		    	 hasError = validateField("#buss_ref_no", 'Required') || hasError;
		    	 hasError = validateField("#doi", 'Required') || hasError;
		    	 hasError = validateField("#pbn", 'Required') || hasError;
		    	 hasError = validateField("#fn", 'Required') || hasError;
		    	 hasError = validateField("#email", 'Required') || hasError;
		       	 hasError = validateField("#website", 'Required') || hasError;
		       	 document.getElementById("customerCheck").style.display="none";
		    	    if (!hasError) {
		    	    	
		    	    	var dedmodal = document.getElementById("myModalded");
					    dedmodal.style.display = "block";
					    event.preventDefault();
			    
					    document.getElementById("customerCheck").style.display="block";
				    $.ajax({
				        type: 'GET',
				        url: "/BGLS/CheckDuplicateCor?cor_name=" + cor_name+ '&cer_od_incop=' +cer_od_incop+
				        		'&buss_ref_no='+ buss_ref_no   + '&lno='+ lno,
				        success: function (response) {
				        	
			   if (response === "MATCH NOT FOUND") {
		            duplicate_No.style.display = 'block';
		        } else {
		            duplicate_Yes1.style.display = 'block';
		            duplicate_Yes2.style.display = 'block';
		            duplicate_Yes3.style.display = 'block';
		            $('#duplicate_Yes3').html(response);
		        }
				            dedmodal.style.display = "none";
				        }
				  
				    });

				    // Blacklist check
				    $.ajax({
				    	 type: 'GET',
					     url: "/BGLS/CheckBlackListCor?cor_name=" + cor_name+ '&cer_od_incop=' +cer_od_incop+
					        		'&buss_ref_no='+ buss_ref_no   + '&lno='+ lno,
				        success: function (response) {
				          
				            if (response === "MATCH NOT FOUND"){
				            	Blacklist_No.style.display = 'block';
				            } else {
				            	Blacklist_Yes1.style.display = 'block';
				            	Blacklist_Yes2.style.display = 'block';
				            	Blacklist_Yes3.style.display = 'block';
				                 $('#Blacklist_Yes3').html(response);
				            	
				               // $('#Blacklist_No').val(response); 
				            }
				            dedmodal.style.display = "none";
				        }
				    
				    });

				    // Negative list check
				    $.ajax({
				        type: 'GET',
				        url: "/BGLS/CheckNegativeListCor?cor_name=" + cor_name+ '&cer_od_incop=' +cer_od_incop+
		        		'&buss_ref_no='+ buss_ref_no   + '&lno='+ lno,
		        		  success: function (response) {
		  		        
		  		            if (response === "MATCH NOT FOUND"){
		  		            	Negativelist_No.style.display = 'block';
		  		            } else {
		  		            	Negativelist_Yes1.style.display = 'block';
		  		            	Negativelist_Yes2.style.display = 'block';
		  		            	Negativelist_Yes3.style.display = 'block';
		  		                 $('#Negativelist_Yes3').html(response);
		  		            	
		  		               // $('#Negativelist_No').val(response); 
		  		            }
		  		          dedmodal.style.display = "none";
		  		        }
				      
				    });
				    document.getElementById("checkbuttons").style.visibility = 'hidden';
				    document.getElementById("proceed&Hold").removeAttribute("hidden");
				    document.getElementById("customerCheck").removeAttribute("hidden");
		    	 
		          }
		    	    
		    }
		    // If there are validation errors, show the modal and exit the function
		   if (hasError) {
        $('#myrequired').modal("toggle");
        $('#alertmsg').text("Enter the Required fields..");
        return; // Exit the function if there are validation errors
    }
		    // Proceed with customer check if validation passed
		   document.getElementById("customerCheck").removeAttribute("hidden");
		   

		 
		    
		}
		

		///Check customer ending place

	</script>

<script>

function Refresh() {
    window.location.reload();
}
function proceedclick() {
   
     var noofpersons = $("#noOfper").val();
     var accType = $("#acc_type").val(); // Get the selected account type 
     var showcorporate = document.getElementById('showcorporate').value;
     var cust_grp = document.getElementById('cust_grp').value;
   
       
        if (accType === "INDIVIDUAL") {  
        // Check if the account type is INDIVIDUAL 
        	var branchid = document.getElementById("prisolidmini").value;	 
            var branchdesc = document.getElementById("branchdescmini").value;
            var firstname = document.getElementById("cust_name").value;	 
            var middlename = document.getElementById("sche_type").value; 
            var lastname = document.getElementById("sche_code").value; 
            var fullname = document.getElementById("fullname").value; 
            var shortname = document.getElementById("short_nam").value; 
            var datebirth = document.getElementById("date_bir").value; 
            var mobileno = document.getElementById("Mobile_num").value; 
            var passno = document.getElementById("Passport_num").value; 
            var nationalid = document.getElementById("national_id3").value; 
 
         	var data = {
         	   	    formmode: 'proceed',
         	   	    noofpersons: noofpersons,
         	   	accType: accType,
         	   branchid: branchid,
         	  branchdesc: branchdesc,
         	   	firstname: firstname,
         	   middlename: middlename,
         	  lastname: lastname,
         	 fullname: fullname,
         	shortname: shortname,
         	datebirth: datebirth,
         	mobileno: mobileno,
         	passno: passno,
         	nationalid: nationalid, 
         	   	
         	   	};
         	   var params = new URLSearchParams(data).toString();

            	$.ajax({
           	    url: 'CustomerOnboarding?' + params,
           	    type: 'GET', // Or 'POST' if you want to send data via POST
           	    contentType: 'application/json',
           	    success: function(response) {
           	        // Handle the response from the server
           	        console.log('Success:', response);
           	   location.href = 'CustomerOnboarding?formmode=proceed';
           	    
           	    },
           	    error: function(xhr, status, error) {
           	        // Handle any errors
           	        console.error('Error:', error);
           	    }
           	});
        } else if (accType === "JOINT ACCOUNT") {  // Check if the account type is JOINT ACCOUNT  
            
          		var branchid = document.getElementById("prisolidminija").value;	 
          		var branchdesc = document.getElementById("branchdescminija").value;
          		var firstname = document.getElementById("first_name").value; 
                var middlename = document.getElementById("midname").value; 
                var lastname = document.getElementById("last_name").value; 
                var fullname = document.getElementById("full_name").value; 
                var shortname = document.getElementById("shgrp").value; 
                var datebirth = document.getElementById("dob").value; 
                var mobileno = document.getElementById("mbl_num").value; 
                var passno = document.getElementById("passno").value; 
                var nationalid = document.getElementById("national_id").value; 
            // Redirect for JOINT ACCOUNT
         	var data = {
         	   	    formmode: 'proceed',
         	   	    noofpersons: noofpersons,
         	   	accType: accType,
         	   branchid: branchid,
          	  branchdesc: branchdesc,
         	   	firstname: firstname,
         	   middlename: middlename,
         	  lastname: lastname,
         	 fullname: fullname,
         	shortname: shortname,
         	datebirth: datebirth,
         	mobileno: mobileno,
         	passno: passno,
         	nationalid: nationalid, 
         	   	
         	   	};
         	   var params = new URLSearchParams(data).toString();

            	$.ajax({
           	    url: 'CustomerJoint?' + params,
           	    type: 'GET', // Or 'POST' if you want to send data via POST
           	    contentType: 'application/json',
           	    success: function(response) {
           	        // Handle the response from the server
           	        console.log('Success:', response);
           	   location.href = 'CustomerJoint?formmode=proceed';
           	    
           	    },
           	    error: function(xhr, status, error) {
           	        // Handle any errors
           	        console.error('Error:', error);
           	    }
           	});
        }else if(showcorporate == 'CORPORATE'){  
        	
           	var noofpersons = 	$("#noOfper").val(); 
        	var cons_name = 	$("#cons_name").val();
        	var branchid = document.getElementById("prisolidmini_corp").value;	 
      		var branchdesc = document.getElementById("branchdescmini_corp").value;
        	var cor_name = document.getElementById("cor_name").value;
           	var trade_name = document.getElementById("trade_name").value;
           	var cer_od_incop = document.getElementById("cer_od_incop").value;
           	var buss_ref_no = document.getElementById("buss_ref_no").value;
           	var doi = document.getElementById("doi").value;
           	var pbn = document.getElementById("pbn").value;
           	var lno = document.getElementById("lno").value;
           	var fn = document.getElementById("fn").value;
           	var email = document.getElementById("email").value;
           	var website = document.getElementById("website").value;
         	var data = {
         	   	    formmode: 'corporate',
         	   	    noofpersons: noofpersons,
         	   	    cons_name: cons_name,
         	   	cor_name: cor_name,
           	    trade_name: trade_name,
           	    cer_od_incop: cer_od_incop,
           	    buss_ref_no: buss_ref_no,
           	    doi: doi,
           	    pbn: pbn,
           	    lno: lno,
           	    fn: fn,
           	    email: email,
           	    website: website,
           	 branchid:branchid,
           	branchdesc:branchdesc
         	   	
         	   	};
         	   var params = new URLSearchParams(data).toString();

            	$.ajax({
           	    url: 'CustomerOnboarding?' + params,
           	    type: 'GET', // Or 'POST' if you want to send data via POST
           	    contentType: 'application/json',
           	    success: function(response) {
           	        // Handle the response from the server
           	        console.log('Success:', response);
           	     location.href = 'CustomerAccountCor?formmode=corporate';
           	    
           	    },
           	    error: function(xhr, status, error) {
           	        // Handle any errors
           	        console.error('Error:', error);
           	    }
           	});

    // Construct the URL for INDIVIDUAL
  
}
}
    function showError(element, message) {
        var errorSpan = $('<span class="error-message"></span>').text(message);
        errorSpan.css('color', 'red');
        element.after(errorSpan);
    }

    function hideError(element) {
        element.next('.error-message').remove();
    }
    
   
</script>
<script>
function signsubmit(a) { 
	var cif_id =document.getElementById("cif_id").value;
    const numberElement = document.getElementById("numberone").textContent;
    var appl_ref_no = a.getAttribute("data-refnumber");
    var formData = new FormData(); // Create a new FormData object

    // Create an array to hold the row data for Bacp_Signature_master
    var schedulerData = [];

    // Loop through each row in the tbody with id "signbody"
    $("#signbody tr").each(function (index) { // Use 'index' to differentiate rows
        var row = {
        	
            rec_no: numberElement,
            appl_ref_no: appl_ref_no,
            img_access_code: $(this).find("select[name='img_access_code']").val(),
            img_group: $(this).find("input[name='img_group']").val(),
            keyword: $(this).find("input[name='keyword']").val()
        };

        // Add row data to schedulerData array
        schedulerData.push(row);

        // Handle photo file uploads for each row
        var photoFile = $(this).find("input[name='photo']")[0].files[0]; // Get the photo file for the current row
        if (photoFile) {
        	  console.log('photo Blob for row ' + index + ':', photoFile);
            formData.append('photo', photoFile); // Append the photo file
        }

        var canvas = $(this).find("canvas[id^='signature-pad']")[0]; // Find the canvas for signature
        if (canvas) {
            var dataURL = canvas.toDataURL("image/png");
            var blob = dataURLtoBlob(dataURL); // Convert the dataURL to a Blob
          //  formData.append('sign_' + index, blob); // Append the signature Blob with row index

            console.log('Signature Blob for row ' + index + ':', blob);
        }
        const signatureDataElement = document.querySelector(`[name="sign${index}"]`);
        if (signatureDataElement) {
            const signDataUrl = signatureDataElement.value;  // Assuming it's a base64 data URL
            const byteString = atob(signDataUrl.split(',')[1]);
            const mimeString = signDataUrl.split(',')[0].split(':')[1].split(';')[0];
            
            const byteNumbers = new Array(byteString.length);
            for (let i = 0; i < byteString.length; i++) {
                byteNumbers[i] = byteString.charCodeAt(i);
            }
            
            const byteArray = new Uint8Array(byteNumbers);
            const signBlob = new Blob([byteArray], { type: mimeString });

            console.log('Signature Data for row ' + index + ':', signBlob);
            formData.append('sign', signBlob, `signature${index}.png`);
        } else {
            console.warn(`Signature data for row ${index} not found.`);
        }
 
    });
       formData.append('scheduler', new Blob([JSON.stringify(schedulerData)], { type: 'application/json' }));

    $('#loader3').show();

   $.ajax({
        type: 'POST',
        url: './AddSigCor?cif_id=' + cif_id,
        data: formData,
        contentType: false,
        processData: false,
        success: function (response) {
            $("#finalpopup_alert").html(response);
            $('#finalpopup').modal('show');

            var refnumber = appl_ref_no;
           location.href = 'CustomerProfile?formmode=view&numberElement=' + numberElement + "&ApprefNO=" + refnumber;
        },
        error: function(xhr, status, error) {
            console.error("Error during submission:", error);
            alert("An error occurred while submitting the form.");
        },
        complete: function() {
            // Hide the loader after the AJAX call is complete, regardless of success or error
            $('#loader3').hide();
        }
    });  
} 



	</script>

<script>
		function readURL(input) {
			var Thisinput = $(input)
			if (input.files && input.files[0]) {

				var reader = new FileReader();

				reader.onload = function (e) {
					Thisinput.closest('.file-uploadone').find('.image-upload-wrap')
						.hide();

					Thisinput.closest('.file-uploadone').find('.file-upload-image')
						.attr('src', e.target.result);
					Thisinput.closest('.file-uploadone').find('.file-upload-content')
						.show();

					Thisinput.closest('.file-uploadone').find('.image-title').html(
						input.files[0].name);
				};

				reader.readAsDataURL(input.files[0]);

			} else {
				removeUpload();
			}
		}
		function getTomorrowsDate() {
		    const today = new Date();
		    const tomorrow = new Date(today);
		    tomorrow.setDate(today.getDate());
		    const year = tomorrow.getFullYear();
		    const month = String(tomorrow.getMonth() + 1).padStart(2, '0');
		    const day = String(tomorrow.getDate()).padStart(2, '0');
		    return `${year}-${month}-${day}`;
		}
		function getCurrentDate1() {
		    const today = new Date();
		    const year = today.getFullYear();
		    const month = String(today.getMonth() + 1).padStart(2, '0');
		    const day = String(today.getDate()).padStart(2, '0');
		    return `${year}-${month}-${day}`;
		}
		const todayDate = getCurrentDate1();

		// Get tomorrow's date
		const tomorrowDate = getTomorrowsDate();
		 
		var mrowCount = 1;
		var mrowCountcor =3;
		function rowadd() {  
			 if (mrowCountcor < 6) {
					
					var table = document.getElementById("click1"); 
					var row = table.insertRow(); 
					//var cell1 = row.insertCell(); 
					var cell2 = row.insertCell(); 
					var cell3 = row.insertCell(); 
					var cell4 = row.insertCell(); 
					var cell5 = row.insertCell(); 
					var cell6 = row.insertCell(); 
					var cell7 = row.insertCell(); 
					var cell8 = row.insertCell();  
					var cell9 = row.insertCell(); 
					 
					//cell1.innerHTML = '<input type="checkbox"' + mrowCount + '">'; 
				 cell2.innerHTML = '<select name="docType" id="docType' + mrowCountcor + '"  class="uniform-input pl-2" style="height: 24px" onchange="last_change_re(' + mrowCountcor + ')" >' +
		      '<option>SELECT</option>' +
		      '<option value="NIC">CUSTOMER-RETAIL-NIC</option>' +
		      '<option value="PSP">CUSTOMER-RETAIL-PSP</option>' +
		      '<option value="AGM">CUSTOMER-RETAIL-AGM</option>' +
		      '<option value="DOC">CUSTOMER-RETAIL-DOC</option>' +
		      '</select>';		
		      cell3.innerHTML = '<input type="text"  name="docCode" id="docCode' + mrowCountcor + '" class="uniform-input pl-2" autocomplete="off" style="height: 24px" readonly>';
		     
		    //  cell3.innerHTML = '<input type="text" name="docCode" id="docCode1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">';
					cell4.innerHTML = '<input type="text" name="docDesc" id="docDesc' + mrowCountcor + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)" readonly>'; 
					cell5.innerHTML = '<input type="text" name="uniqId" id="uniqId1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">'; 
					cell6.innerHTML = '<input type="text" name="docIssPlace" id="docIssPlace1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">'; 
					cell7.innerHTML = '<input type="date" name="docIssDate"   id="docIssDate1' + mrowCount + '" class="uniform-input pl-2" autocomplete="off" max="' + todayDate + '"  onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">';  
					cell8.innerHTML = '<input type="date" name="docExpDate"  id="docExpDate1' + mrowCount + '" class="uniform-input pl-2" min="' + tomorrowDate + '" autocomplete="off" autocomplete="off" onkeyup="this.value = this.value.toUpperCase(); handleIn(this)">'; 
					cell9.innerHTML = '<input type="file" name="docExpDate" id="file' + mrowCount + '">'; 
			        mrowCountcor++;
					 mrowCount++;
					 }else{ 
						  
						   $('#myrequired').modal("toggle");
					        $('#alertmsg').text("You can only add up to 5 rows.");
					 }
			 }
		function rowdelete(ele) { 
			var table = $('#click1')[0]; 
			var rowCount = table.rows.length; 
			console.log(rowCount); 
			if (rowCount <= 1) { 
				//alert("There is no row available to delete!"); 
				return; 
			} 
			if (ele) { 
				$(ele).parent().parent().remove(); 
			} 
			else { 
				table.deleteRow(rowCount - 1);  
			} 
		}

		const subcategories = {
				INDIVIDUAL: ["1"],
				"JOINT ACCOUNT": ["2", "3", "4", "5", "6", "7", "8", "9", "10"],
				"CORPORATE": ["2", "3", "4", "5", "6", "7", "8", "9", "10"]
			};
		function custgrpclck() {
			const acc_typeSelect = document.getElementById("showcorporate");
			const noOfperSelect = document.getElementById("noOfper");
			const selectedacc_type = acc_typeSelect.value;

			noOfperSelect.innerHTML = null;

			if (selectedacc_type && subcategories[selectedacc_type]) {
				subcategories[selectedacc_type].forEach(noOfper => {
					const option = document.createElement("option");
					option.value = noOfper;
					option.text = noOfper;
					noOfperSelect.appendChild(option);
				});
			}
			var grp = document.getElementById("cust_grp").value;
			var type = document.getElementById("acc_type").value;
			var fieldOption1 = document.getElementById('RetailDetail'); //	
			var fieldOption2 = document.getElementById('CorporateDetail');// INDIVIDUAL
			var fieldOption3 = document.getElementById('Joint_Account_Retail');
			var showcorporate = document.getElementById('showcorporate');
			var type1 = document.getElementById('acc_type')
			// fieldOption1.style.display = 'none';
			fieldOption2.style.display = 'none';
			//fieldOption3.style.display = 'none';
			//fieldOption4.style.display = 'none';
			if (grp == "RETAIL" && type == "INDIVIDUAL") {
			
				fieldOption1.style.display = "block"
				fieldOption2.style.display = "none"
				fieldOption3.style.display = "none"
				showcorporate.style.display = "none"
					type1.style.display="block"

			} else if (grp == "RETAIL" && type == "JOINT ACCOUNT") {
				
				fieldOption1.style.display = "none"
				fieldOption2.style.display = "none"
				fieldOption3.style.display = "block"
				showcorporate.style.display = "none"
					type1.style.display="block"

			}else if(grp == "CORPORATE CUSTOMER" ){
				 hideError($("#acc_type"));
				        	type1.style.display="none"
				     	fieldOption1.style.display = "none"
						fieldOption2.style.display = "block"
						fieldOption3.style.display = "none"
						
						showcorporate.style.display = "block"
			}else if (grp == "RETAIL" ) {
				fieldOption1.style.display = "block"
				fieldOption2.style.display = "none";
				fieldOption3.style.display = "none";		
				showcorporate.style.display = "none";
			    type1.style.display = "block";
			}
		}

		

function nop() {
    var a = document.getElementById("noOfper").value;
    document.getElementById("listsize").innerHTML = a;
}

	</script>

<script>
function submitfile(value) {
	if (($("#docType0").val() == "") || ($("#docCode0").val() == "") || ($("#docDesc0").val() == "")
			|| ($("#uniqId0").val() == "") || ($("#docIssPlace0").val() == "") || ($("#docIssDate0").val() == "")
			|| ($("#docExpDate0").val() == "")) {
		    $('#myrequired').modal("toggle");
	        $('#alertmsg').text("Enter the Required fields...!");
		} else {
	var cif_id =document.getElementById("cif_id").value;
    var rec_no = document.getElementById('numberone').textContent;
    var appl_ref_no = value.getAttribute("data-refnumber");
	    const dynamicValues = []; // Initialize the array here

	    // Loop through each row in the tbody with id "click1"
	    $("#click1 tr").each(function() {
	        var row = {}; // Create an object to hold the data for this row

	        // Get values from the current row
	        row.doctype = $(this).find("select[name='docType']").val(); // Use select directly
	        row.doccode = $(this).find("input[name='docCode']").val();
	        row.doctypesesc = $(this).find("input[name='docDesc']").val();
	        row.uniqueid = $(this).find("input[name='uniqId']").val();
	        row.placeofissue = $(this).find("input[name='docIssPlace']").val();
	        row.issuedate = $(this).find("input[name='docIssDate']").val();
	        row.exprydate = $(this).find("input[name='docExpDate']").val();

	        // Get the file input and extract the filename
	        const fileInput = $(this).find("input[type='file']"); // Adjust selector as necessary
	        if (fileInput.length > 0 && fileInput[0].files.length > 0) {
	            const file = fileInput[0].files[0]; // Get the file object
	            row.file = file; // Set the file object in the row
	            row.filename = file.name; // Get the filename directly from the file object
	        }

	        dynamicValues.push(row); // Push the row object to the dynamicValues array
	    });

	    console.log(dynamicValues);

	    // AJAX request to submit data
	  $.ajax({
	        url: '/BGLS/multiline?appl_ref_no=' + appl_ref_no + "&rec_no=" + rec_no + "&cif_id=" + cif_id,
	        data: JSON.stringify(dynamicValues),
	        type: 'POST',
	        contentType: 'application/json',
	        success: function(data) {
	            imageuploadFunction(data, dynamicValues, appl_ref_no);
	           
	        }
	    }); 
}
	
}

function zeroth_change(){
	
	var docType0 = document.getElementById("docType0").value;
	if(docType0 === 'BRN'){
		$('#docCode0').val("BRN");
		$('#docDesc0').val("BUSINESS REGISTRATION NO");
		
	}else if(docType0 === 'COI'){
		$('#docCode0').val("COI");
		$('#docDesc0').val("CERTIFICATE OF REGISTRATION");
	}else if(docType0 === 'AGM'){
		$('#docCode0').val("AGM");
		$('#docDesc0').val("AGREEMENT");
	}else if(docType0 === 'DOC'){
		$('#docCode0').val("DOC");
		$('#docDesc0').val("DOCUMENT");
	}
	
}
function first_change(){
	var docType1 = document.getElementById("docType1").value;
	if(docType1 === 'BRN'){
		$('#docCode1').val("BRN");
		$('#docDesc1').val("BUSINESS REGISTRATION NO");
		
	}else if(docType1 === 'COI'){
		$('#docCode1').val("COI");
		$('#docDesc1').val("CERTIFICATE OF REGISTRATION");
	}else if(docType1 === 'AGM'){
		$('#docCode1').val("AGM");
		$('#docDesc1').val("AGREEMENT");
	}else if(docType1 === 'DOC'){
		$('#docCode1').val("DOC");
		$('#docDesc1').val("DOCUMENT");
	}
}

function zeroth_change_re(){
	var docType0 = document.getElementById("docType0").value;
	if(docType0 === 'NIC'){
		$('#docCode0').val("NIC");
		$('#docDesc0').val("NATIONAL ID CARD");
	}else if(docType0 === 'PSP'){
		$('#docCode0').val("PSP");
		$('#docDesc0').val("PASSPORT NO");
	}else if(docType0 === 'AGM'){
		$('#docCode0').val("AGM");
		$('#docDesc0').val("AGREEMENT");
	}else if(docType0 === 'DOC'){
		$('#docCode0').val("DOC");
		$('#docDesc0').val("DOCUMENT");
	}
}
function first_change_re(){
	var docType1 = document.getElementById("docType1").value;
	if(docType1 === 'NIC'){
		$('#docCode1').val("NIC");
		$('#docDesc1').val("NATIONAL ID CARD");
		
	}else if(docType1 === 'PSP'){
		$('#docCode1').val("PSP");
		$('#docDesc1').val("PASSPORT NO");
	}else if(docType1 === 'AGM'){
		$('#docCode1').val("AGM");
		$('#docDesc1').val("AGREEMENT");
	}else if(docType1 === 'DOC'){
		$('#docCode1').val("DOC");
		$('#docDesc1').val("DOCUMENT");
	}
}



function last_change(rowCount) {

    var docType = document.getElementById("docType" + rowCount).value;

    var docDesc = '#docDesc' + rowCount;
    var docCode = '#docCode' +rowCount;

    if (docType === 'BRN') {
    	 $(docCode).val("BRN");
        $(docDesc).val("BUSINESS REGISTRATION NO");
    } else if (docType === 'COI') {
    	$(docCode).val("COI");
        $(docDesc).val("CERTIFICATE OF REGISTRATION");
    } else if (docType === 'AGM') {
    	$(docCode).val("AGM");
        $(docDesc).val("AGREEMENT");
    } else if (docType === 'DOC') {
    	$(docCode).val("DOC");
        $(docDesc).val("DOCUMENT");
    }
}

function last_change_re(rowCount) {

	 var docType = document.getElementById("docType" + rowCount).value;

	    var docDesc = '#docDesc' + rowCount;
	    var docCode = '#docCode' +rowCount;

	    if (docType === 'NIC') {
	    	 $(docCode).val("NIC");
	        $(docDesc).val("BUSINESS REGISTRATION NO");
	    } else if (docType === 'PSP') {
	    	$(docCode).val("PSP");
	        $(docDesc).val("PASSPORT NO");
	    } else if (docType === 'AGM') {
	    	$(docCode).val("AGM");
	        $(docDesc).val("AGREEMENT");
	    } else if (docType === 'DOC') {
	    	$(docCode).val("DOC");
	        $(docDesc).val("DOCUMENT");
	    }
}

</script>
<script type="text/javascript">
/* function imageuploadFunction(Responcedata, dynamicvalues, appl_ref_no) { 
    // Loop through each file in dynamicvalues
    dynamicvalues.forEach((value, index) => {
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        var img = new Image();
        
        // Create a URL for the file object
        img.src = URL.createObjectURL(value.file);
        
        img.onload = function () {
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            var dataURL = canvas.toDataURL('image/jpeg');
            
            var formData = new FormData();
            
            // Append each file to formData
            dynamicvalues.forEach((item) => {
                formData.append("files", item.file);
            });
            
            // Append other necessary data
            formData.append("unique", Responcedata);
            formData.append("appl_ref_no", appl_ref_no);
            formData.append("dataURL", dataURL);
console.log(formData);
            // Perform the AJAX request
         $.ajax({
                url: '/BGLS/imageupload11',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                	  // Insert the response into the modal-body
	                $("#mypopup2 .modal-body").html(response); 
	                $('#mypopup2').modal('show');
                }
            });
        };
    });
} */

function imageuploadFunction(Responcedata, dynamicvalues, appl_ref_no) {
    var formData = new FormData(); 
    formData.append("unique", Responcedata);

    // Show the loader before starting the image processing
    $('#loader2').show();

    // Function to process a file and return a promise
    function processFile(value) {
        return new Promise((resolve, reject) => {
            if (!value.file) {
                console.error("File object is invalid:", value);
                return reject("Invalid file");
            }

            // Determine the file type (image, excel, pdf, etc.)
            const fileType = value.file.type;

            if (fileType.startsWith('image/')) {
                // Process image file (JPEG, PNG, etc.)
                var canvas = document.createElement('canvas');
                var ctx = canvas.getContext('2d');
                var img = new Image();

                img.src = URL.createObjectURL(value.file);
                img.onload = function () {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    var dataURL = canvas.toDataURL('image/jpeg');

                    resolve({ file: value.file, dataURL: dataURL });
                };

                img.onerror = function (error) {
                    console.error("Error loading image:", error);
                    reject(error);
                };
            } else {
                // For non-image files, bypass canvas and directly resolve
                resolve({ file: value.file, dataURL: null });
            }
        });
    }

    // Process all files
    Promise.all(dynamicvalues.map(processFile)).then((results) => {
        results.forEach((result) => {
            formData.append("files", result.file); // Append the original file
            if (result.dataURL) {
                formData.append("dataURL", result.dataURL); // Append dataURL for images
            } else {
                formData.append("dataURL", ""); // Placeholder for non-image files
            }
        });

        formData.append("appl_ref_no", appl_ref_no);

        // Make a single AJAX call
        $.ajax({
            url: '/BGLS/imageupload11',
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
            	    $('#DOCPOPUP').modal("toggle");
			        $('#alertmsgdoc').text(response);
		
            },
            error: function(xhr, status, error) {
                console.error("Error during image upload:", status, error);
                // Optionally show an error message to the user
                alert("An error occurred while uploading the images.");
            },
            complete: function() {
                // Hide the loader regardless of success or error
                $('#loader2').hide();
            }
        });
    }).catch((error) => {
        console.error('Error processing files:', error);
        // Ensure the loader is hidden if theres an error during file processing
        $('#loader').hide();
    });
}



</script>


<style>
</style>
<script>
		function personaldet() {
			var vv = "333"
			
			$.ajax({
				type: "POST",
				url: "./AddAlert",
				data: $("#Proceedform").serialize(),
				success: function (response) {
					alert(Response);
				}
			})
		}
	</script>

<script>

		function submite() {
			var appl_ref_no = "ARN02031";
			var signatureFile = document.getElementById("barathsign").files[0];
			var photoFile = document.getElementById("barathphoto").files[0];
			var sign = "barathsign";
			var photo = "barathphoto";
			
			var formData = new FormData();
			formData.append("appl_ref_no", appl_ref_no);
			formData.append("signatureFile", signatureFile);
			formData.append("photoFile", photoFile); // Use "photoFile" for the photo
			formData.append("sign", sign);
			formData.append("photo", photo);

			$.ajax({
				type: 'POST',
				url: './AddStudentss',
				data: formData,
				contentType: false,
				processData: false,
				success: function (response) {
					alert(response);
					console.log(response);
					alert("Signature and photo uploaded successfully");
				},
				error: function (xhr, status, error) {
					console.error("Error: " + error);
					alert("Error uploading signature and photo");
				}
			});
		}
		
		function formatfornumbers(input){
			
			var annualIncomeInput = input.value;
			
		    input.value = parseFloat(annualIncomeInput).toFixed(2);
		    
		}

	</script>


<script>
function personalDetailNxt(a) {
    var hasError = false;
	   if ($("#monthly_income").val() === "") {
	        showError($("#monthly_income"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#monthly_income"));
	    }
	   
	    if ($("#annual_income").val() === "") {
	        showError($("#annual_income"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#annual_income"));
	    }
	    if ($("#cust_type").val() === "") {
	        showError($("#cust_type"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#cust_type"));
	    }

	    if ($("#ca_saluation").val() === "") {
	        showError($("#ca_saluation"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_saluation"));
	    }

	    if ($("#firstname").val() === "") {
	        showError($("#firstname"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#firstname"));
	    }

	    if ($("#fullname").val() === "") {
	        showError($("#fullname"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#fullname"));
	    }

	    // Validate occupation select
	    if ($("#ca_occupation1").val() === "SELECT") {
	        showError($("#ca_occupation1"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_occupation1"));
	    }
 
	    // Validate occupation select
	    if ($("#ca_gender").val() === "SELECT") {
	        showError($("#ca_gender"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_gender"));
	    }

	    if ($("#ca_martial_staus").val() === "SELECT") {
	        showError($("#ca_martial_staus"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_martial_staus"));
	    }

	    if ($("#DOB").val() === "") {
	        showError($("#DOB"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#DOB"));
	    }

	    if ($("#ca_address_type").val() === "SELECT") {
	        showError($("#ca_address_type"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_address_type"));
	    } 

	    if ($("#houseno").val() === "") {
	        showError($("#houseno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#houseno"));
	    }

	    if ($("#streetno").val() === "") {
	        showError($("#streetno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#streetno"));
	    }

	    if ($("#streetname").val() === "") {
	        showError($("#streetname"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#streetname"));
	    }

	    if ($("#ca_country").val() === "SELECT") {
	        showError($("#ca_country"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_country"));
	    }

	    if ($("#ca_city").val() === "SELECT") {
	        showError($("#ca_city"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_city"));
	    }

	    if ($("#addvalfrom").val() === "") {
	        showError($("#addvalfrom"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#addvalfrom"));
	    } 

	    if ($("#ca_nationality").val() === "SELECT") {
	        showError($("#ca_nationality"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_nationality"));
	    }

	    if ($("#ca_country_of_birth").val() === "SELECT") {
	        showError($("#ca_country_of_birth"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#ca_country_of_birth"));
	    }

	    if ($("#emailid").val() === "") {
	        showError($("#emailid"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#emailid"));
	    }

	    if ($("#mobno").val() === "") {
	        showError($("#mobno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#mobno"));
	    }
    // Display alert only if there are errors
    if (hasError) {
        $('#myrequired').modal("toggle");
        $('#alertmsg').text("Enter the Required Fields..");
    } else {
        var rec_no = document.getElementById('numberone').textContent;
        var refnumber = a.getAttribute("data-refnumber");

        // Show the loader
        $('#loader').show();

        // If all validations pass, with the AJAX request
        $.ajax({
            type: "POST",
            url: './personalDetail?refnumber=' + refnumber + "&rec_no=" + rec_no,
            data: $("#Londonone").serialize(),
            success: function (response) { 
                $("#mypopup_alertmsg").html(response); 
                $('#mypopup').modal('show');
            },
            complete: function() {
                // Hide the loader regardless of success or error
                $('#loader').hide();
            }
        });
    }
}



function showError(element, message) {
    // Check if an error message span already exists, if not create one
    if (!element.next('.error-message').length) {
        // Create a new span element to hold the error message
        var errorSpan = $('<span class="error-message"></span>').text(message);

        // Apply styling for the error message (red color)
        errorSpan.css('color', 'red');

        // Append the error message span after the input field
        element.after(errorSpan);
    }
} 
</script>
<script>
	
function AccountDetailNxt(a) {
    // Check if the required fields are not empty
    var hasError = false;


	    if ($("#schemetype").val() === "") {
	        showError($("#schemetype"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#schemetype"));
	    }

	    if ($("#schemecode").val() === "") {
	        showError($("#schemecode"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#schemecode"));
	    }

	    if ($("#currency").val() === "") {
	        showError($("#currency"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#currency"));
	    }

	    if ($("#glheadcode").val() === "") {
	        showError($("#glheadcode"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#glheadcode"));
	    }

	    if ($("#prisolid").val() === "") {
	        showError($("#prisolid"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#prisolid"));
	    }

	    if ($("#nationalid").val() === "") {
	        showError($("#nationalid"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#nationalid"));
	    }

	    if ($("#issuedate").val() === "") {
	        showError($("#issuedate"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#issuedate"));
	    }

	    if ($("#passno").val() === "") {
	        showError($("#passno"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#passno"));
	    }

	    if ($("#expdate").val() === "") {
	        showError($("#expdate"), 'Required');
	        hasError = true;
	    } else {
	        hideError($("#expdate"));
	    }

    // Display alert only if there are errors
    if (hasError) {
        $('#myrequired').modal("toggle");
        $('#alertmsg').text("Enter the Required fields...!");
    } else {
        var refnumber = a.getAttribute("data-refnumber");

        // Show the loader
        $('#loader1').show();

        $.ajax({
            type: "POST",
            url: "./AccountDetailNxt?refnumber=" + refnumber,
            data: $("#parisone").serialize(),
            success: function (response) {
            	if ($("#schemetype").val() === "LA") {
            	    addRecords();
            	} else if ($("#schemetype").val() === "LAEMI") {
            	    addRecords();
            	} else {
            	    depositadd();
            	}


                // Insert the response into the modal-body
                $("#mypopup1_alertmsg").html(response);

                // Show the modal
                $('#mypopup1').modal('show');
            },
            error: function (xhr, status, error) {
                console.error("AJAX Error:", status, error);
                // Optionally show an error message to the user
               
                $("#mypopup1_alertmsg").html("An error occurred: " + error);
                $('#mypopup1').modal('show');
            },
            complete: function() {
                // Hide the loader regardless of success or error
                $('#loader1').hide();
            }
        });
    }
}

	function depositadd() {
		const depo = document.getElementById("depo_actno").value.trim();
		const deposit_date = changeDateFormat(document.getElementById("deposit_date").value.trim());
		const deposit_amt = document.getElementById("deposit_amt").value.trim();
		const currency = document.getElementById("currency").value.trim();
		const deposit_period = document.getElementById("deposit_period").value.trim();
		const maturity_date = document.getElementById("maturity_date").value.trim();
		const rate_of_int  = document.getElementById("rate_of_int").value.trim();
		const int_amt = document.getElementById("int_amt").value.trim();
		const maturity_amt  = document.getElementById("maturity_amt").value.trim();
		const deposit_type = document.getElementById("deposit_type").value.trim();
		const frequency = document.getElementById("frequency").value.trim(); 
		const branch_desc= document.getElementById("branchdesc").value.trim();
		const ca_glcode = document.getElementById("td_glcode").value.trim();
		const ca_gldesc = document.getElementById("td_gldesc").value.trim();
		const ca_glshcode = document.getElementById("td_glshcode").value.trim();
		const ca_glshdesc= document.getElementById("td_glscdesc").value.trim();
	const ca_solid = document.getElementById("cif_id").value.trim();
	const scheme_code = document.getElementById("schmcode").value.trim();
	const branchId = document.getElementById("prisolidpers").value.trim();
	const fullname = document.getElementById("fullname").value.trim();
	
	

	var Deposit = {
			depo_actno : depo,
			deposit_date:deposit_date,
			deposit_amt:deposit_amt,
			currency:currency,
			deposit_period:deposit_period,
			maturity_date:maturity_date,
			rate_of_int:rate_of_int,
			int_amt:int_amt,
			maturity_amt:maturity_amt,
			deposit_type:deposit_type,
			frequency:frequency,
			gl_code:ca_glcode,
			gl_desc:ca_gldesc,
			glsh_code:ca_glshcode,
			glsh_desc:ca_glshdesc,
			branch_desc:branch_desc,
			cust_id:ca_solid,
			scheme_code:scheme_code,
			branch_id:branchId,
			cust_name:fullname
	};
		if (depo === "") {
			$("#alertmsg1").text("Please fill out the Deposit Account No field.");
			$('#alert1').modal("show");
			return;

		} else {
			$.ajax({
				url : './depositAddCust',
				contentType: "application/json",
				data :JSON.stringify(Deposit),
				type : 'POST',
				success : function(data) {
					//alert(data)
					//$("#alertmsg").text(data);
					//$('#alert').modal("show");

				}
			});
		}
	}

	
	
	function showError(element, message) {
	    // Check if an error message span already exists, if not create one
	    if (!element.next('.error-message').length) {
	        // Create a new span element to hold the error message
	        var errorSpan = $('<span class="error-message"></span>').text(message);

	        // Apply styling for the error message (red color)
	        errorSpan.css('color', 'red');

	        // Append the error message span after the input field
	        element.after(errorSpan);
	    }
	}

	function hideError(element) {
	    // Remove the error message span if it exists
	    element.next('.error-message').remove();
	}

	 </script>

<style>
.file-uploadone {
	background-color: #ffffff;
	width: 200px;
	margin: 0 auto;
	padding: 20px;
	display: none;
}
</style>
<script>

function Onschemetype() {
    var schemetype = document.getElementById("schemetype").value; 
    $.ajax({
        type: 'GET',
        url: "./getSchemeDetails?schemetype=" + schemetype,
        success: function (response) {
            console.log(response);
            var SchemetypeDesc = response[0][0] != null ? response[0][0] : "";
            var SchemeCode = response[0][1];

            // Update Scheme Description based on SchemeCode
            var schemeDescription = "";
            switch(SchemeCode) {
                case 'SBGEN':
                    schemeDescription = "SAVING BANK GENERAL";
                    break;
                case 'CAGEN':
                    schemeDescription = "CURRENT ACCOUNT GENERAL";
                    break;
                case 'LAGEN':
                    schemeDescription = "LOAN ACCOUNT GENERAL";
                    break;
                case 'TDGEN':
                    schemeDescription = "TERM DEPOSIT GENERAL";
                    break;
                default:
                    schemeDescription = "UNKNOWN SCHEME";
            }

            // Update UI elements with fetched values
            $('#Schemetypedesc').text(SchemetypeDesc);
            $('#schmcode').val(SchemeCode);
            $('#Schemecodedesc').text(schemeDescription);  // Update description div

            // Hide both divs initially
            document.getElementById("Acc_TermDeposit").style.display = "none";
            document.getElementById("Acc_LeaseAccount").style.display = "none";

            // Show the respective div based on the SchemeCode
            if (SchemeCode === 'TDGEN') {
                document.getElementById("Acc_TermDeposit").style.display = "block";
            } else if (SchemeCode === 'LAGEN') {
                document.getElementById("Acc_LeaseAccount").style.display = "block";
            }
        }
    });
}


		function base64ToUint8Array(base64) {

			const binaryString = window.atob(base64);

			const length = binaryString.length;

			const uint8Array = new Uint8Array(length);

			for (let i = 0; i < length; i++) {
				uint8Array[i] = binaryString.charCodeAt(i);
			}

			return uint8Array;
		}

		function onimagesone() {
			var appl_ref_no = document.getElementById("gooom").value;
			//alert(appl_ref_no); 
			$
				.ajax({
					type: 'get',
					url: './api/getimagesone?appl_ref_no=' + appl_ref_no,

					success: function (response) {
						//alert(response); 
						const base64String = response;
						const uint8Array = base64ToUint8Array(base64String);

						const blob = new Blob([uint8Array]);

						const imageUrl = URL.createObjectURL(blob);

						const img = document.createElement("img");
						img.src = imageUrl;
						img.style.width = "200px";
						img.style.height = "200px";
						var element = document.getElementById("photoCapture1");
						element.appendChild(img);
						console.log(img);
					}
				});
		};


	</script>
<script>
function setOutstanding(inputElement) {
	var loan_outstanding = document.getElementById('loan_outstanding');
	var value = parseFloat(inputElement.value.replace(/,/g, ''));
	loan_outstanding.value = 
	(formatNumberWithIndianSeparationForOninput1(value.toFixed(2)));
}

document.addEventListener('DOMContentLoaded', (event) => {
    // Function to format numbers with Indian separators
   function formatNumberWithIndianSeparationFor(value) {
        if (!value && value !== 0) return ''; // Handle empty or null values

        // Ensure the value is a string before calling split()
        let valueStr = value.toString();

        // Split integer and decimal parts
        let [integerPart, decimalPart] = valueStr.split('.');

        // Format the integer part with Indian number system
        let lastThreeDigits = integerPart.slice(-3);
        let otherDigits = integerPart.slice(0, -3);

        if (otherDigits !== '') {
            lastThreeDigits = ',' + lastThreeDigits;
        }

        let formattedIntegerPart = otherDigits.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThreeDigits;

        // Return formatted value with decimal part if any
        return decimalPart !== undefined ? `${formattedIntegerPart}.${decimalPart}` : formattedIntegerPart;
    }
    function calculateDrawingLimit() {
        const marginLimit = document.getElementById('margin_limit').value;
        const loanSanctioned = document.getElementById('loan_sanctioned').value.replace(/,/g, '');

        // Validate the inputs
        if (marginLimit === "" || isNaN(marginLimit)) {
            document.getElementById('drawing_limit').value = ""; 
            return;
        }

        if (loanSanctioned === "" || isNaN(loanSanctioned)) {
            document.getElementById('drawing_limit').value = ""; 
            return;
        }

        const drawingLimit = ((parseFloat(marginLimit) / 100) * parseFloat(loanSanctioned)).toFixed(2);

        // Set the calculated drawing limit
        document.getElementById('drawing_limit').value = formatNumberWithIndianSeparationFor(drawingLimit);
    }

    function calculatePercentage(event) {
        event.preventDefault();
        const loanPeriod = document.getElementById('loan_period').value;
        console.log(loanPeriod ,"loanPeriodloanPeriodloanPeriodloanPeriod");
        const loanSanctioned = document.getElementById('loan_sanctioned').value.replace(/,/g, '');
        const dateOfLoan = document.getElementById('date_of_loan').value;
   
        if (loanSanctioned === "") {
            //document.getElementById('loan_period').value = "";
            document.getElementById("myrequired").textContent = "Choose Sanctioned Amount First";
            $('#alertmsg').modal("show");
            return;
        }

        if (dateOfLoan === "") {
            //document.getElementById('loan_period').value = "";
            document.getElementById("myrequired").textContent = "Choose Date of Loan";
            $('#alertmsg').modal("show");
            return;
        }

        var amount = (loanSanctioned / loanPeriod).toFixed(2);
		document.getElementById('inst_amount').value =formatNumberWithIndianSeparationForOninput(amount);



        const percentage = (loanSanctioned / 100);
        const totals = (amount / percentage);

        document.getElementById('inst_pct').value = totals.toFixed(0);
        document.getElementById('no_of_inst').value = loanPeriod;
        document.getElementById('inst_id').value = '1';

        const loanDate = new Date(dateOfLoan);
        loanDate.setMonth(loanDate.getMonth() + 1 + parseInt(loanPeriod));

    }
    function formatNumberWithIndianSeparationForOninput2(value) {
        if (!value && value !== 0) return ''; // Handle empty or null values

        // Ensure the value is a string before calling split()
        let valueStr = value.toString();

        // Split integer and decimal parts
        let [integerPart, decimalPart] = valueStr.split('.');

        // Format the integer part with Indian number system
        let lastThreeDigits = integerPart.slice(-3);
        let otherDigits = integerPart.slice(0, -3);

        if (otherDigits !== '') {
            lastThreeDigits = ',' + lastThreeDigits;
        }

        let formattedIntegerPart = otherDigits.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThreeDigits;

        // Return formatted value with decimal part if any
        return decimalPart !== undefined ? `${formattedIntegerPart}.${decimalPart}` : formattedIntegerPart;
    }
    function calculateMonthlyRepayment() {
        const loanSanctioned = document.getElementById('loan_sanctioned').value.replace(/,/g, '');
        const loanPeriod = parseFloat(document.getElementById('loan_period').value);

        if (!isNaN(loanSanctioned) && !isNaN(loanPeriod) && loanPeriod > 0) {
            const monthlyRepayment = (loanSanctioned / loanPeriod);
            var a =(formatNumberWithIndianSeparationForOninput1(monthlyRepayment));
            console.log(a,"dfdf")
            document.getElementById('monthly_repayment').value = (formatNumberWithIndianSeparationForOninput2(monthlyRepayment));
            console.log(a);
        }
    }
    function formatForInput1(date) {
        var d = new Date(date);
        var day = ('0' + d.getDate()).slice(-2);
        var month = ('0' + (d.getMonth() + 1)).slice(-2);
        var year = d.getFullYear();
        return `${day}-${month}-${year}`;
    }
   
    // Event listeners for relevant elements
    document.getElementById('margin_limit').addEventListener('input', calculateDrawingLimit);
    document.getElementById('loan_sanctioned').addEventListener('input', calculateDrawingLimit);
    document.getElementById('loan_period').addEventListener('input', calculatePercentage);
    document.getElementById('date_of_loan').addEventListener('input', calculatePercentage);
    document.getElementById('loan_period').addEventListener('input', calculateMonthlyRepayment);
  
  //  document.getElementById('inst_start_dt').addEventListener('input', expiry_date_fn);
    document.getElementById('loan_sanctioned').addEventListener('input', calculateMonthlyRepayment);
});


		function getRepaymentDetails(a) {
			event.preventDefault();

			var principleAmount = document.getElementById("loan_sanctioned").value.replace(/,/g, '');
			var santionedDate = document.getElementById("date_of_loan").value;
			var interestRate = document.getElementById("effective_interest_rate").value.replace(/,/g, '');

			var installID = $("#inst_id").val();
			var installStartDate = changeDateFormat(document.getElementById("inst_start_dt").value);
			var pricipleFreq = document.getElementById("inst_freq").value;
			var noOfInstallment = document.getElementById("no_of_inst").value;
			var installAmount = document.getElementById("inst_amount").value.replace(/,/g, '');
			var interestFreq = document.getElementById("interest_frequency").value;

			console.log(principleAmount + " " + santionedDate + " " + interestRate + " " + installID + " " + installStartDate + " "
				+ pricipleFreq + " " + noOfInstallment + " " + installAmount + " " + interestFreq);
			 $
				.ajax({
					type: "GET",
					url: "./getInterestDetails?creation_Date=" + santionedDate
						+ "&start_date=" + installStartDate + "&Product_value=" + principleAmount
						+ "&principle_frequency=" + pricipleFreq + "&int_rate=" + interestRate
						+ "&no_of_inst=" + noOfInstallment + "&int_amt="
						+ installAmount + "&interestFrequency=" + interestFreq,
					success: function (data) {
						console.log(data);
						var trHTML = '';
						$
							.each(
								data,
								function (index, entity) {

									var no_of_instalment = entity.no_of_instalment;
									var from_date = formatDate(entity.from_date);
									var installment_date = formatDate(entity.installment_date);
									var installment_description = entity.installment_description;
									var installment_amt = formatNumber(entity.installment_amt);
									var principal_amt = formatNumber(entity.principal_amt);
									var interest_amt = formatNumber(entity.interest_amt);
									var charges_amt = formatNumber(entity.charges_amt);
									var principal_outstanding = formatNumber(entity.principal_outstanding);



									trHTML += '<tr id="sechduleRow">'
										+ '<td><input type="text" class="border-0" name="scheduleNo" readonly value="' + no_of_instalment + '" /></td>'
										+ '<td><input type="text" class="border-0" name="originalDemandDate" readonly value="' + installment_date + '" /></td>'

										+ '<td><input type="text" class="border-0" name="demandType" readonly value="' + installment_description + '" /></td>'
										+ '<td><input type="text" class="text-right border-0" name="demandId" readonly value="' + installment_amt + '" /></td>'
										+ '<td><input class="text-right border-0"  type="text" readonly name="demandAmount" value="'
										+ principal_amt
										+ '" /></td>'
										+ '<td><input type="text" class="text-right border-0" name="demandId" readonly value="' + interest_amt + '" /></td>'
										+ '<td><input type="text"  class="text-right border-0" name="demandId" readonly value="' + charges_amt + '" /></td>'
										+ '<td><input type="text"  class="text-right border-0" name="demandId" readonly value="' + principal_outstanding + '" /></td>'

										+ '</tr>';

								});
						$('#repaymentDet').empty().append(trHTML);
						 


					},
					error: function (error) {
						console.error(error);
					}
				}); 
		}

		function changeDateFormat(dateString) {

			var parts = dateString.split('-');

			return parts[2] + '-' + parts[1] + '-' + parts[0];
		}
		function formatDate(dateString) {

			var date = new Date(dateString);


			var day = date.getDate();
			var month = date.getMonth()+1;
			var year = date.getFullYear();


			if (day < 10) {
				day = '0' + day;
			}
			if (month < 10) {
				month = '0' + month;
			}

			return day + '-' + month + '-' + year;
		}

		function formatNumber(number) {
			return Number(number).toLocaleString('en-US', {
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});
		}
		
		function Onglshcode() {
			var glsh = document.getElementById("glheadcode").value;
			
			$.ajax({
				type: 'GET',
				url: "./getglshCode?glsh=" + glsh,
				success: function (response) {
					console.log(response);
					var GLSHDesc = response[0] != null ? response[0] : ""; 
					$('#glshdesc').val(GLSHDesc); 
				}
			});
	} 
		
		
	</script>
<script type="text/javascript">
function Onschemetype1() {
    var schemetype = document.getElementById("schemetype").value;
    console.log("Selected schemetype:", schemetype);
    
    var scheme;
    if (schemetype === 'LA') {
        scheme = 'LSRET';
    } else if (schemetype === 'LAEMI') {
        scheme = 'LAEMI';
    } else {
        scheme = 'TDFIXED';
    }
    console.log("Mapped scheme to send:", scheme);

    $.ajax({
        url: 'Onschemetype1document',
        type: 'GET',
        dataType: 'json',
        data: {
            schemetype: scheme
        },
        success: function(response) {
            console.log("Response from server:", response);

            $("#schemetype").val(response.schemetype);
            $("#schmcode").val(response.schmcode);

            var schemeDescription = "";
            switch (response.schemetype) {
                case 'TD':
                    schemeDescription = "TERM DEPOSIT GENERAL";
                    break;
                case 'LA':
                    schemeDescription = "LOAN ACCOUNT GENERAL";
                    break;
                case 'LAEMI':
                    schemeDescription = "EQUATED MONTHLY INSTALLMENT";
                    break;
                default:
                    schemeDescription = "UNKNOWN SCHEME";
            }

            // Hide all divs initially
            document.getElementById("Acc_TermDeposit").style.display = "none";
            document.getElementById("Acc_LeaseAccount").style.display = "none";

            // Show based on the response.schemetype
            if (response.schemetype === 'TD') {
                document.getElementById("Acc_TermDeposit").style.display = "block";
            } else if (response.schemetype === 'LA' || response.schemetype === 'LAEMI') {
                document.getElementById("Acc_LeaseAccount").style.display = "block";
            }

            $("#ca_glcode").val(response.gl_code);
            $("#glshdesc").val(schemeDescription);
        },
        error: function(xhr, status, error) {
            console.error("AJAX error:", error);
        }
    });
}

	</script>
<script>
	function SmsFunction(){
		

		 $('#SmsPopUpMsg').modal('show'); 

			var a = document.getElementById("mobno").value;
			$('#mobile_no_sms').val(a);
		/* var appl_ref_no = document.getElementById("appl_ref_no").value;
		var phone_no = document.getElementById("mobno").value;
		var unique_id = 'ID_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
		
		  $.ajax({
		       type: 'POST', // or 'GET' if your server expects a GET request
		       url: 'valuesending',
		       data: { 
		           appl_ref_no: appl_ref_no,
		           unique_id: unique_id,
		           phone_no :phone_no
		       },
		       success: function(response) {
		           console.log('Success:', response);
		           $('#msgsmspopup').text("The Message has been Sent Successfully...")
	               $('#smspopup').modal('show');
		       },
		       error: function(xhr, status, error) {
		           console.error('Error:', error);
		           // Handle errors here
		       }
		   });
		
		 var appl_ref_no = document.getElementById("appl_ref_no").value;
		  var unique_id = 'ID_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
		  alert('Application Ref No: ' + appl_ref_no + '\nUnique ID: ' + unique_id);
          window.open('SmsPopup?formmode=smspopup&appl_ref_no=' + appl_ref_no, '_blank'); */ 
	}
	
	</script>
<!-- 	<script>
function SmsFunction() {
    var appl_ref_no = document.getElementById("appl_ref_no").value;
    var unique_id = 'id_' + Date.now() + '_' + Math.floor(Math.random() * 1000);
	alert('Application Ref No: ' + appl_ref_no + '\nUnique ID: ' + unique_id);
    document.getElementById("appl_ref_no_input").value = appl_ref_no;
    document.getElementById("unique_id_input").value = unique_id;
    document.getElementById("smsForm").submit();
}
</script> -->
</head>


<body onload="openCity(event, 'London');">
	<div class="col-sm-2 d-flex align-items-center">
		<div th:insert="BGLSHeaderMenu :: header"></div>
	</div>
	<!-- Start Content-->
	<div class="container-manager">
		<div class="row">
			<div class="col-sm-11 ml-5 mt-2" style="font-size: 0.8rem;">
				<!-- Start Content-->
				<div th:if="${formmode}=='list'">
					<div class="card ">
						<div class="card-header d-flex justify-content-between"
							style="background-color: #e9ecef;">
							<div class="float-left">
								<h6 style="font-size: 20px">Minimal Data</h6>
							</div>
							<!-- <div class="btn-group nav-buttons float-right">
								<button type="button" class="btn btn-xs btn-primary btns"
									onclick="fndashboard();">Dashboard</button>
							</div> -->
						</div>
						<div class="card-body">
							<form name="Proceedform" action="#" autocomplete="off"
								id="Proceedform" onsubmit="return validateForm()">

								<div class="row formline"
									style="font-size: 15px; font-weight: 500; padding: 10px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										<label for="cust_id">App Ref No</label>
									</div>
									<div class="col-sm-2">
										<input type="text" id="appl_ref_no" name="appl_ref_no"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${appreNO}" autocomplete="off" readonly />
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">
										<label for="cust_name">Customer Group</label>
									</div>
									<div class="col-sm-2">
										<select name="cust_grp" id="cust_grp"
											class="form-control form-control-sm bg-white border border-dark"
											title="Customer Group" readonly>
										</select>
									</div>
								</div>

								<div class="row formline"
									style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2"
										style="font-size: 15px; font-weight: 500;">
										<label for="sche_type">Customer Type</label>
									</div>
									<div class="col-sm-2">
										<select name="acc_type" id="acc_type"
											class="form-control form-control-sm bg-white border border-dark"
											title="Account Type" readonly>
										</select>
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2"
										style="font-size: 15px; font-weight: 500; padding: 0px 0px 0px 0px;">
										<label for="sche_code">No of Persons</label>
									</div>
									<div class="col-sm-2">
										<!-- <input type="text" placeholder="1"
													id="sche_code" name="sche_code"
													class="form-control form-control-sm bg-white border border-dark" autocomplete="off"
													readonly /> -->

										<select name="md.noOfper" id="noOfper"
											class="form-control form-control-sm bg-white border border-dark"
											title="No of Persons" readonly>
											<!-- 	<option value="1">1</option> -->
										</select>
									</div>

								</div>

								<!-- <div class="card-header d-flex justify-content-between"
										style="margin-right: 226px; margin-top: 10px; background-color: rgb(187, 195, 203); height: 40px;"> -->

								<div class="card-header d-flex justify-content-between mt-4"
									style="background-color: #e9ecef; height: 40px;">
									<div class="float-left;">
										<!-- <h6 style="margin-left: 450px; font-size: 20px">Record
											No:1/1</h6>  -->
									</div>
								</div>

								<div id="RetailDetail">



									<div class="row formline"
										style="font-size: 15px; font-weight: 500; padding: 10px 0px 2px 0px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="cust_id">Customer Group</label>
										</div>
										<div class="col-sm-2">
											<input type="text" name="cust_id" id="cust_Grp"
												class="form-control form-control-sm bg-white border border-dark"
												values="RETAIL" autocomplete="off" readonly />
										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="cust_name">First Name</label>
										</div>
										<div class="col-sm-2">
											<input type="text" id="cust_name" name="cust_name"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly />
										</div>
									</div>

									<div class="row formline"
										style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_type">Middle Name</label>
										</div>
										<div class="col-sm-2">
											<input type="text" id="sche_type" name="sche_type"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly />
										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_code">Last Name</label>
										</div>
										<div class="col-sm-2">
											<input type="text" id="last" name="sche_code"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly />
										</div>

									</div>

									<div class="row formline"
										style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_type">Short Name</label>
										</div>
										<div class="col-sm-2">
											<input type="text" name="shortName"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly />
										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_code">Full Name</label>
										</div>
										<div class="col-sm-2">
											<input type="text"
												class="form-control form-control-sm bg-white border border-dark"
												id="fullname" name="fullname" autocomplete="off" readonly />
										</div>

									</div>


									<div class="row formline"
										style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_type">Date Of Birth</label>
										</div>
										<div class="col-sm-2">
											<input type="date" name="currency"
												class="form-control form-control-sm bg-white border border-dark"
												placeholder="DD/MM/YY" autocomplete="off" readonly />
										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_code">Contact No</label>
										</div>
										<div class="col-sm-2">
											<input type="text" maxlength="7"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly />
										</div>

									</div>


									<div class="row formline"
										style="font-size: 15px; font-weight: 500; padding: 0px 0px 10px 0px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_type">Passport No</label>
										</div>
										<div class="col-sm-2">
											<input type="text" name="currency"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly />
										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">
											<label for="sche_code">National Id</label>
										</div>
										<div class="col-sm-2">
											<input type="text" id="national_id2" name="national_id2"
												class="form-control form-control-sm bg-white border border-dark"
												autocomplete="off" readonly />
										</div>

									</div>
								</div>

							</form>
						</div>

						<div class="card-footer text-center"
							style="background-color: #e9ecef">

							<button type="button" class="btn btn-primary p-2" id="btnHome"
								onclick="home()">Home</button>

							<button type="button" class="btn btn-primary p-2" id="btnSubmit"
								onclick="add();">Add New</button>



							<button type="button" class="btn btn-primary p-2" id="btnBack"
								onclick="back()">Back</button>
						</div>







					</div>
				</div>
				<div th:if="${formmode}=='add'">
					<div class="row">
						<!-- <div class="col-lg-10" style="margin-left: 300px;"> -->
						<div class="col-sm-12 card" style="margin-right: auto;">
							<!-- <div class="card" style="margin-top: 0px; width:100%;"> -->
							<div class="card" style="margin-top: 0px; width: 100%">
								<div class="card-header d-flex justify-content-between"
									style="background-color: #e9ecef;">
									<div class="float-left">


										<h6 style="font-size: 20px">Minimal Data</h6>
									</div>

									<!-- <div class="btn-group nav-buttons float-right">
										<button type="button" class="btn btn-xs btn-primary btns"
											onclick="fndashboard();">Dashboard</button>
									</div> -->
								</div>


							</div>
							<div class="card-body">
								<form name="Proceedform" action="#" autocomplete="off"
									id="Proceedform">
									<div class="form-group">
										<div class="row formline"
											style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
											<div class="col-sm-1"></div>
											<div class="col-sm-2">
												<label for="cust_id">App Ref No</label>
											</div>
											<div class="col-sm-2">
												<input type="text" id="appl_ref_no" name="appl_ref_no"
													class="form-control form-control-sm bg-white border border-dark"
													th:value="${appreNO}" autocomplete="off" readonly />
											</div>
											<div class="col-sm-2"></div>
											<div class="col-sm-2">
												<label for="cust_name">Customer Group</label>
											</div>
											<div class="col-sm-2">
												<select name="cust_grp" id="cust_grp"
													class="form-control form-control-sm bg-white border border-dark"
													title="Customer Group" onchange="custgrpclck()">
													<option value="RETAIL">RETAIL</option>
													<option value="CORPORATE CUSTOMER">CORPORATE
														CUSTOMER</option>
												</select>
											</div>


										</div>

										<div class="row formline"
											style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
											<div class="col-sm-1"></div>
											<div class="col-sm-2">
												<label for="cust_id">Customer Type <span
													style="color: red; font-size: 20px;"> *</span></label>
											</div>
											<div class="col-sm-2">
												<select name="ca_acct_type" id="acc_type"
													class="form-control form-control-sm bg-white border border-dark"
													title=" " onchange="AccountTypeChange();">
													<option value="">SELECT</option>
													<option value="INDIVIDUAL">INDIVIDUAL</option>
													<option value="JOINT ACCOUNT">JOINT ACCOUNT</option>
												</select> <input id="showcorporate"
													class="form-control form-control-sm bg-white border border-dark"
													value="CORPORATE" placeholder="CORPORATE" readonly
													style="display: none;" />


											</div>
											<div class="col-sm-2"></div>
											<div class="col-sm-2"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<label for="sche_code">No of Persons</label>
											</div>
											<div id="JointAccountDiv" class="col-sm-2">
												<!-- <input type="text" placeholder="1"
													id="sche_code" name="sche_code"
													class="form-control form-control-sm bg-white border border-dark" autocomplete="off"
													readonly /> -->


												<select id="noOfper"
													class="form-control form-control-sm bg-white border border-dark">
													<option value="1" selected>1</option>
													<option value="2">2</option>
													<option value="3">3</option>
													<option value="4">4</option>
													<option value="5">5</option>
													<option value="6">6</option>
													<option value="7">7</option>
													<option value="8">8</option>
													<option value="9">9</option>
													<option value="10">10</option>
												</select>
											</div>

										</div>



										<div class="card-header d-flex justify-content-between"
											style="margin-top: 10px; background-color: #e9ecef; height: 40px;">
											<div class="float-left;">


												<!-- <h6
													style="text-align: center; font-size: 12px; margin-left: -8px;">
													<button th:if="${holdlistsize!=1}" id="showButtonback"
														th:attr="data-count=${holdlistcount}"
														onclick="prevv(this);" style="background-color: #007bff">Prev</button>

													<input id="showButtonbackdubliate"
														th:value="${holdlistcountdub}"
														style="background-color: blue; display: none;" /> Record
													No hold: <b id="listsizecount"
														th:text="${ls != null ? ls + 1 : 1}">1</b>/ <font size="2"><b
														id="listsize" th:text="${count != null ? count : 1}">1</b></font>

													<button id="showButtonnext" onclick="nextt(this);"
														style="background-color: #007bff">Next</button>
												</h6> -->
											</div>
										</div>
										<div id="mutipage" class="card-body">

											<div id="RetailDetail" style="margin-left: -25px;">
												<div class="form-group">
													<div class="row formline "
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="sche_type">Primary Branch <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">

															<input type="text" id="prisolidmini" name="ca_solid"
																th:value="${sess_branch_id}" readonly
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />

														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="sche_type">Branch Name </label>
														</div>
														<div class="col-sm-2">
															<input type="text"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																th:value="${sess_branch_desc}" maxlength="13"
																id="branchdescmini" name="branch_desc"
																autocomplete="off" readonly="readonly" />
														</div>
													</div>
													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="cust_id">Customer Group <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="cust_id" id="Cust_Grp"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																value="RETAIL" autocomplete="off" required readonly />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="cust_name">First Name<span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" id="cust_name" name="cust_name"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" onchange="autofill()" required />
														</div>
													</div>

													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="sche_type">Middle Name</label>
														</div>
														<div class="col-sm-2">
															<input type="text" id="sche_type" name="sche_type"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="sche_code">Last Name</label>
														</div>
														<div class="col-sm-2">
															<input type="text" id="sche_code" name="sche_code"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
															<!-- oninvalid="setCustomValidity('Enter your LastName')" -->

														</div>
													</div>

													<div class="row formline mt-1"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="sche_type">Short Name <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="shortName" id="short_nam"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="sche_code">Full Name<span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																id="fullname" name="fullname" autocomplete="off" />
														</div>
													</div>
													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="date_bir">Date Of Birth<span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="date" name="dob" id="date_bir"
																class="form-control form-control-sm bg-white border border-dark"
																placeholder="DD/MM/YY" autocomplete="off" />
															<div id="dob-message"
																style="color: red; font-size: 13px; margin-top: 3px;"></div>
														</div>

														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="sche_code">Contact No<span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<div class="input-group">
																<div class="input-group-prepend">
																	<input type="text" id="country_code"
																		name="country_code"
																		class="form-control form-control-sm bg-white border border-dark"
																		value="+975" maxlength="5" style="width: 60px;"
																		readonly />
																</div>
																<input type="text" id="Mobile_num" name="Mob_No"
																	autocomplete="off" maxlength="7"
																	class="form-control form-control-sm bg-white border border-dark"
																	style="width: 100px;" />
															</div>
														</div>


													</div>
													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="sche_type">Passport No<span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="currency" id="Passport_num"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																maxlength="12" autocomplete="off" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="sche_code">National Id<span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" id="national_id3" name="national_id3"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																maxlength="13" autocomplete="off" />
														</div>

													</div>
												</div>
											</div>
											<div id="CorporateDetail">

												<div class="row formline "
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Primary Branch <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">

														<input type="text" id="prisolidmini_corp" name="ca_solid"
															th:value="${sess_branch_id}"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" readonly />
													</div>
													<div class="col-sm-2"></div>
													<div class="col-sm-2">
														<label for="sche_type">Branch Desc </label>
													</div>
													<div class="col-sm-2">
														<input type="text" th:value="${sess_branch_desc}"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="13" id="branchdescmini_corp" name="branchdesc"
															autocomplete="off" readonly="readonly" />
													</div>
												</div>
												<div class="row formline"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Customer Group</label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="cust_grp3" id="cust_grp3"
															placeholder="CORPORATE" readonly
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
													<div class="col-sm-2"></div>
													<div class="col-sm-2">
														<label for="sche_code">Constitution Name <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<select name="ca_solid" id="cons_name"
															class="form-control form-control-sm bg-white border border-dark">
															<option value="">SELECT</option>
															<option title="Proprietor">PRP</option>
															<option title="Company">COM</option>
															<option title="Corporation">PAR</option>
															<option title="Association">ASS</option>
															<option title="Trustee">TRT</option>
															<option title="Club">CLB</option>

														</select>
													</div>
												</div>


												<div class="row formline"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Corporate Name <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="busno" id="cor_name"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
													<div class="col-sm-2"></div>
													<div class="col-sm-2">
														<label for="sche_code">Trade Name <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="" id="trade_name"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
												</div>
												<div class="row formline"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Certificate of
															Incorporation <span style="color: red; font-size: 20px;">
																*</span>
														</label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="certificate_incorporation"
															id="cer_od_incop"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
													<div class="col-sm-2"></div>
													<div class="col-sm-2">
														<label for="sche_code">Business Registration No <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="business_registration"
															id="buss_ref_no"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
												</div>
												<div class="row formline"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Date of Incorporation <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="date" name="busno" id="doi"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
													<div class="col-sm-2"></div>
													<div class="col-sm-2">
														<label for="sche_code">Post Box No <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="" id="pbn"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
												</div>
												<div class="row formline"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Land Line No <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="busno" id="lno"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
													<div class="col-sm-2"></div>
													<div class="col-sm-2">
														<label for="sche_code">Fax No <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="" id="fn"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
												</div>
												<div class="row formline"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Email <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="busno" id="email"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
													<div class="col-sm-2"></div>
													<div class="col-sm-2">
														<label for="sche_code">Website <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" name="" id="website"
															class="form-control form-control-sm bg-white border border-dark"
															autocomplete="off" />
													</div>
												</div>
											</div>

											<form id="form1">
												<div id="Joint_Account_Retail">
													<div class="row formline "
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="sche_type">Primary Branch <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">

															<input type="text" id="prisolidminija" name="ca_solid"
																th:value="${sess_branch_id}"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" readonly />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="sche_type">Branch Name </label>
														</div>
														<div class="col-sm-2">
															<input type="text"
																class="form-control form-control-sm bg-white border border-dark"
																maxlength="13" id="branchdescminija" name="branch_desc"
																th:value="${sess_branch_desc}"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																autocomplete="off" readonly="readonly" />
														</div>
													</div>
													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="cust_grp2">Holder Type <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="cust_grp2" id="cust_grp2"
																value="JOINT ACCOUNT"
																class="form-control form-control-sm bg-white border border-dark"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																autocomplete="off" readonly="readonly" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="rel">Relationship <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<select name="md.rel" id="rel"
																class="form-control form-control-sm bg-white border border-dark"
																title="Relationship">
																<option value="">SELECT</option>
																<option value="SELF">SELF</option>
																<option value="SPOUSE">SPOUSE</option>
																<option value="SON">SON</option>
																<option value="DAUGHTER">DAUGHTER</option>
																<option value="FATHER">FATHER</option>
																<option value="MOTHER">MOTHER</option>
																<option value="SISTER">SISTER</option>
																<option value="BROTHER">BROTHER</option>
																<option value="COUSIN">COUSIN</option>
																<option value="MANAGER">MANAGER</option>
																<option value="DIRECTOR">DIRECTOR</option>
															</select>
														</div>
													</div>


													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="brn">Customer Group <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="brn" id="brn" value="RETAIL"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" readonly="readonly" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="first_name">First Name <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="first_name" id="first_name"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
													</div>


													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="midname">Middle Name</label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="midname" id="midname"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="last_name">Last Name</label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="last_name" id="last_name"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
													</div>


													<div class="row formline mt-1"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="shgrp">Short Name <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="shortName" id="shgrp"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="full_name">Full Name <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="full_name" id="full_name"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
													</div>


													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="dob"> Date of Birth <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="date" name="dob" id="dob"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
															<div id="dob-messageja"
																style="color: red; font-size: 13px; margin-top: 3px;"></div>
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="mbl_num">Contact No <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<!-- <div class="col-sm-2">
															<input type="text" name="mbl_num" id="mbl_num"
																maxlength="7"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div> -->
														<div class="col-sm-2">
															<div class="input-group">
																<div class="input-group-prepend">
																	<input type="text" id="country_codeja"
																		name="country_codeja"
																		class="form-control form-control-sm bg-white border border-dark"
																		value="+975" maxlength="5" style="width: 60px;"
																		readonly />
																</div>
																<input type="text" id="mbl_num" name="mbl_num"
																	autocomplete="off" maxlength="7"
																	onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																	class="form-control form-control-sm bg-white border border-dark"
																	style="width: 100px;" />
															</div>
														</div>
													</div>


													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<div class="col-sm-1"></div>
														<div class="col-sm-2">
															<label for="passno">Passport No <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="passno" id="passno"
																maxlength="12"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
														<div class="col-sm-2"></div>
														<div class="col-sm-2">
															<label for="national_id">National Id <span
																style="color: red; font-size: 20px;"> *</span></label>
														</div>
														<div class="col-sm-2">
															<input type="text" name="national_id" id="national_id"
																maxlength="13"
																onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
																class="form-control form-control-sm bg-white border border-dark"
																autocomplete="off" />
														</div>
													</div>
												</div>
											</form>




										</div>



										<div id="customerCheck" hidden>
											<div class="card-header d-flex justify-content-between"
												style="margin-right: 00px; margin-top: 10px; background-color: #e9ecef; height: 50px; width: 100%;">

												<div class="float-left;">
													<h6
														style="text-align: center; font-size: 16 px; margin-left: -8px;">
														<b>Customer Check</b>
													</h6>
												</div>
											</div>
											<div class="card-body" style="border-style: groove;">
												<div>
													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<span>1.Duplicate List</span>

													</div>
													<div class="col-sm-2"></div>

													<div class=""
														style="font-size: 15px; font-weight: 500; padding: 10px;">
														<div class="row formline">
															<div class="col-sm-12">
																<div id="duplicate_No">No Result found on Customer
																	Check</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="duplicate_Yes1"
																	style="color: Red; display: none;">MATCH FOUND</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="duplicate_Yes2"
																	style="display: none; font-weight: bold">
																	MATCHES<span style="padding-left: 190px">EXISTING
																		VALUE</span> <span style="padding-left: 56px">CURRENT
																		VALUE</span>
																</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="duplicate_Yes3" class=" "
																	style="display: none;"></div>

															</div>

														</div>
													</div>
												</div>

												<div>
													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<span>2.Black List</span>

													</div>
													<div class="col-sm-2"></div>

													<div class=""
														style="font-size: 15px; font-weight: 500; padding: 10px;">
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Blacklist_No">No Result found on Customer
																	Check</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Blacklist_Yes1"
																	style="color: Red; display: none;">MATCH FOUND</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Blacklist_Yes2"
																	style="display: none; font-weight: bold">
																	MATCHES<span style="padding-left: 190px">EXISTING
																		VALUE</span> <span style="padding-left: 56px">CURRENT
																		VALUE</span>
																</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Blacklist_Yes3" class=" "
																	style="display: none;"></div>

															</div>

														</div>
													</div>
												</div>

												<div>
													<div class="row formline"
														style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
														<span>3.Negative List</span>

													</div>
													<div class="col-sm-2"></div>

													<div class=""
														style="font-size: 15px; font-weight: 500; padding: 10px;">
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Negativelist_No">No Result found on
																	Customer Check</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Negativelist_Yes1"
																	style="color: Red; display: none;">MATCH FOUND</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Negativelist_Yes2"
																	style="display: none; font-weight: bold">
																	MATCHES<span style="padding-left: 190px">EXISTING
																		VALUE</span> <span style="padding-left: 56px">CURRENT
																		VALUE</span>
																</div>
															</div>

														</div>
														<div class="row formline">
															<div class="col-sm-12">
																<div id="Negativelist_Yes3" class=" "
																	style="display: none;"></div>

															</div>

														</div>
													</div>
												</div>

											</div>
										</div>
								</form>

							</div>

						</div>





					</div>


					<div class="card-footer w-100"
						style="background-color: #e9ecef; text-align: center;"
						id="checkbuttons">
						<div
							class="row formline text-center d-flex justify-content-center">
							<button type="button" class="btn btn-primary p-2" id="btnHome"
								onclick="home()">Home</button>
							<button type="submit" class="btn btn-primary ml-2"
								id="checkcustbtn" onclick="checkcust();">Customer Check</button>
							<button type="button" class="btn btn-primary ml-2" id="btnBack"
								onclick="back()">Back</button>
						</div>

					</div>

					<div class="card-footer w-100" id="proceed&Hold"
						style="text-align: center; margin-top: 25px; margin-bottom: 25px;"
						hidden>
						<button type="button" class="btn btn-primary p-2" id="Proceedbut"
							onclick="Refresh();">Refresh</button>
						<button type="button" class="btn btn-primary p-2" id="Proceedbut"
							onclick="proceedclick();">Proceed</button>

						<button type="button" class="btn btn-primary p-2" id="Hold"
							onclick="back();">Back</button>
					</div>








				</div>

				<!------------------------------------------------proceed starts------------------------  -->
				<div th:if="${formmode}=='proceed'">
					<div class="row">
						<!-- <div class="col-lg-10" style="margin-left: 300px";> -->
						<div class="card col-lg-12" style="width: 1600px">
							<div class="" style="margin-top: 0px;">
								<!-- <div class=" d-flex justify-content-between" 
						style="background-color: rgb(187, 195, 203);"> -->
								<div class=" d-flex justify-content-between"
									style="margin-top: 0px; margin-left: 0px; background-color: #e9ecef;">
									<div class="float-left ml-3">
										<h6
											style="margin-top: 10px; margin-bottom: 10px; font-size: 20px; padding: 10px;">
											CUSTOMER ACCOUNT OPENING - RETAIL</h6>

									</div>
									<div class="float-right mt-4 ml-700">
										<font style="font-size: 15px; color: #3C6EAC;"><b>APP
												REF NO :</b></font> <input type="text"
											style="font-size: 15px; background-color: transparent; border: none; outline-style: none; box-shadow: none; width: 100px;"
											id="appl_ref_no" th:value="${ApplRefNO}" />
									</div>


									<!-- 		<div class="card-header d-flex justify-content-between"
											style="margin-left: -35px; margin-top: 10px; background-color: rgb(187, 195, 203); height: 60px; width: 105.8%;">
											
											<div id="paginationone" class="float-left;">
												<button type="button" class="btn btn-xs btn-primary" value="pre"
													id="btnpreone" style="display:none;width: 24px;">&#8249;</button>
												
											</div>
											<div id="paginationone">
											<span id="pageNumberone" style="font-size: 20px;"></span>
											</div>
											<div id="paginationone" class="float-right;">
												
												<button type="button" class="btn btn-xs btn-primary" value=""
													id="btnnextone" style="display:none;width: 24px;">&#8250;</button>
												
											</div>

										</div> -->
								</div>



							</div>

							<div class=" " style="margin-top: 10px;">

								<div class="tab"
									style="padding: 8px 12px; position: relative; font-size: 13px; display: flex; justify-content: center; gap: 60px; margin-left: 12px; margin-right: 12px">
									<button class="tablinks"
										style="width: 250px; text-transform: uppercase;"
										onclick="openCity(event, 'London')" id="firstbutton">Personal
										Details</button>
									<button class="tablinks"
										style="width: 290px; text-transform: uppercase;"
										onclick="openCity(event, 'Paris')">Account Details</button>
									<button class="tablinks"
										style="width: 270px; text-transform: uppercase;"
										onclick="openCity(event, 'Tokyo')">Document Master</button>
									<button class="tablinks"
										style="width: 250px; text-transform: uppercase;"
										onclick="openCity(event, 'india');">Signature Upload</button>
								</div>


								<form action="#" id="Londonone">
									<div id="London" class="tabcontent"
										style="border: unset !important;">
										<div class=""></div>
										<div class="card p-1 ">
											<div class="row formline mt-2 ml-4">
												<div class="col-sm-2 ml-2">
													<h5 class="font-weight-bold ml" style="color: #00008B">Personal
														Details</h5>
												</div>


											</div>
											<!-- Loader HTML -->
											<div id="loader"
												style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; background-color: rgba(211, 211, 211, 0.6); /* Light gray with more transparency */ padding: 20px; /* Padding around the loader */ border-radius: 8px; /* Rounded corners */ text-align: center;">
												<!-- Center text in the loader -->
												<div
													style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
													<img style="width: 50px; height: 50px;"
														th:src="@{/images/loader.gif}" alt="Loading..." />
												</div>
											</div>





											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">

												<div class="col-sm-2 ml-2">
													<label for="sche_type">Customer Type<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														id="cust_type" name="la_customer_type" autocomplete="off"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														th:value="${Acc_Type}" required />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Cif Id</label>
												</div>

												<div class="col-sm-2">
													<input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														id="cif_id" name="cif_id" autocomplete="off"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														th:value="${cifid_1}" required readonly />
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Primary Branch<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="text" th:value="${BranchId}"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="10" id="prisolidpers" name="ca_solid"
														autocomplete="off" readonly />

													<!-- <select name="ca_solid" id="prisolid"
														onchange="Onbranchid()"
														class="form-control form-control-sm bg-white border border-dark">
														<option value="">SELECT</option>
														<option th:each="city : ${branch_id}"
															th:value="${city.ref_id}" th:text="${city.ref_id}"></option>
													</select> -->
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_type">Branch Name <span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<!-- <input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="10" id="prisolid" name="ca_solid"
														autocomplete="off" /> -->
													<input type="text" th:value="${BranchDesc}"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="13" id="branchdescpers" name="branch_desc"
														autocomplete="off" readonly />
												</div>
											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Account Open Date<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														th:value="${#dates.format(tran_date, 'dd-MM-yyyy')}"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="10" id="ca_acct_opendate"
														name="ca_acct_opendate" autocomplete="off" readonly />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_type">Remarks </label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="13" id="ca_remarks" name="ca_remarks"
														autocomplete="off" />
												</div>
											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Salutation<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<select name="ca_saluation" id="ca_saluation"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														required>
														<option value="">SELECT</option>
														<option value="MR">MR</option>
														<option value="MS">MS</option>
													</select>
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">First Name<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>

												<div class="col-sm-2">
													<input type="text" th:value="${FirstName}" readonly
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="first_name_indiv_retail_set" name="ca_first_name"
														autocomplete="off" required />
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Middle Name</label>
												</div>
												<div class="col-sm-2">

													<input type="text" th:value="${MiddleName}" readonly
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="middlename" name="mid_name" autocomplete="off" />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Last Name</label>
												</div>
												<div class="col-sm-2">
													<input type="text" th:value="${LastName}" readonly
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="lastname" name="ca_last_name" autocomplete="off" />
												</div>

											</div>

											<div class="row formline mt-1 ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Full Name<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<input type="text" th:value="${FullName}" readonly
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="fullname" name="ca_preferred_name" autocomplete="off"
														required />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Short Name</label>
												</div>
												<div class="col-sm-2">
													<input type="text" th:value="${ShortName}" readonly
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="shortname" name="shortName" autocomplete="off" />
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_code">Gender<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<select name="ca_gender" id="ca_gender"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="MALE">MALE</option>
														<option value="FEMALE">FEMALE</option>
													</select>
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2  ">
													<label for="sche_type">Martial Status<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<select name="ca_martial_staus" id="ca_martial_staus"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="SINGLE">SINGLE</option>
														<option value="MARRIED">MARRIED</option>
													</select>
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Occupation<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<select name="ca_occupation1"
														th:value="${holdlistdetails?.ca_occupation1}"
														id="ca_occupation1"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														required>
														<option>SELECT</option>
														<option value="SELF EMPLOYED">SELF EMPLOYED</option>
														<option value="SALARIED">SALARIED</option>
													</select>
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Date of Birth<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<input type="date" th:value="${DateBirth}"
														class="form-control form-control-sm bg-white border border-dark"
														id="date_bir" name="ca_date_of_birth" autocomplete="off"
														required readonly />
													<div id="dob-message"
														style="color: red; font-size: 13px; margin-top: 3px;"></div>
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Annual Income<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">

													<input type="text" onchange="formatAndSetValue(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="annual_income" name="annual_income" autocomplete="off" />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Monthly Income<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														id="monthly_income" name="monthly_income"
														onchange="formatAndSetValue(this)" autocomplete="off"
														readonly="readonly" />
												</div>

											</div>

											<div class="row formline   ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Loan Obligations </label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														onchange="formatAndSetValue(this)" id="loan_obligations"
														name="loan_obligations" autocomplete="off" required />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Family Maintenance</label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														onchange="formatAndSetValue(this)" id="family_maintenance"
														name="family_maintenance" autocomplete="off" />
												</div>

											</div>
											<div class="row formline ml-4 mt-1"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Email Id<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="email"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="30" id="emailid" name="ca_email_id"
														autocomplete="off" />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Contact No <span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<div class="input-group">
														<div class="input-group-prepend">
															<input type="text" id="ca_countrycode_1"
																name="ca_countrycode_1"
																class="form-control form-control-sm bg-white border border-dark"
																value="+975" readonly maxlength="5" style="width: 60px;" />
														</div>
														<input type="text" id="mobno" name="ca_mobile_number"
															autocomplete="off" maxlength="7" th:value="${Mobileno}"
															class="form-control form-control-sm bg-white border border-dark"
															style="width: 100px;" />
													</div>
												</div>

											</div>

										</div>
										<!-- next header starts -->
										<div class="card mt-1 p-1">
											<div class="row formline mt-2 ml-4">
												<div class="col-sm-2 ml-2">
													<h5 class="font-weight-bold ml" style="color: #00008B">Address
														Details</h5>
												</div>


											</div>


											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Address Type <span
														style="color: red; font-size: 20px;"> * </span></label>

												</div>
												<div class="col-sm-2">
													<select name="ca_address_type" id="ca_address_type"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="MAILING">MAILING</option>
														<option value="PERMANENT">PERMANENT</option>
													</select>
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">House no<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<input type="number"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="10" id="houseno" name="ca_house_no"
														autocomplete="off" />
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Street No<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<input type="number"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="10" id="streetno" name="ca_street_no"
														autocomplete="off" />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Street Name<span
														style="color: red; font-size: 20px;"> * </span></label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														onkeyup="this.value = this.value.toUpperCase();handleAddress(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="streetname" name="ca_street_name" autocomplete="off" />
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Country<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">

													<input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														id="ca_country" name="ca_country" value="BHUTAN"
														autocomplete="off" readonly />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">State</label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														id="ca_state" name="ca_state" autocomplete="off" />
													<!-- <select name="ca_state" id="ca_state"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="LA DIGUE">LA DIGUE</option>
														<option value="ANSE ROYALE">ANSE ROYALE</option>
														<option value="BEAU VALLON">BEAU VALLON</option>
														<option value="TAMIL NADU">TAMIL NADU</option>
														<option value="KERALA">KERALA</option>
														<option value="UP">UP</option>
													</select> -->
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">City<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<select name="ca_city" id="ca_city"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="VICTORIA">VICTORIA</option>
														<option value="LA DIGUE">LA DIGUE</option>
														<option value="ANSE ROYALE">ANSE ROYALE</option>
														<option value="BEAU VALLON">BEAU VALLON</option>
														<option value="CHENNAI">CHENNAI</option>
														<option value="THANJAVUR">THANJAVUR</option>
														<option value="SALEM">SALEM</option>
													</select>
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Postal Code</label>
												</div>
												<div class="col-sm-2">
													<input type="number"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="6" id="postalcode" name="ca_postal_code"
														autocomplete="off" />
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Address Valid From<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="Date"
														class="form-control form-control-sm bg-white border border-dark"
														id="addvalfrom" name="ca_address_validation_form"
														autocomplete="off" />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Nationality<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">

													<select name="ca_nationality" id="ca_nationality"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="BHUTANESE ">BHUTANESE</option>
														<option value="SEYCHELLOIS ">SEYCHELLOIS</option>
														<option value="INDIAN">INDIAN</option>
														<option value="USA">USA</option>
													</select>
												</div>
											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_code">Country of Birth<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<select name="ca_country_of_birth" id="ca_country_of_birth"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="BHUTAN">BHUTAN</option>
														<option value="SEYCHELLES">SEYCHELLES</option>
														<option value="INDIA">INDIA</option>
														<option value="USA">USA</option>
													</select>
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Country of Origin</label>
												</div>
												<div class="col-sm-2">
													<!-- <input type="text"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														name="country_origin" id="country_origin"
														autocomplete="off" /> -->
													<select name="countryOrigin" id="country_origin"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark">
														<option>SELECT</option>
														<option value="BHUTAN">BHUTAN</option>
														<option value="SEYCHELLES">SEYCHELLES</option>
														<option value="INDIA">INDIA</option>
														<option value="USA">USA</option>
													</select>
												</div>

											</div>
										</div>
										<div class="row formline ml-4">
											<div class="col-sm-12 d-flex justify-content-end pl-5  mt-5">

												<div
													style="display: flex; align-items: center; justify-content: center; margin-top: 5px; font-weight: 700">
													<div style="margin-right: 10px; text-align: right;">
														<b>Record : </b><span id="numberone"
															style="font-weight: 700"><b>1</b></span> <b
															id="currentvalue" th:text="${currentvalue}"></b>/ <font
															size="2"><b id="totalvalue" th:text="${noofpers}"></b></font>
													</div>
													<input type="button" value="Previous"
														placeholder="Previous" disabled
														style="background-color: #007bff; height: 35px; width: 90px; margin-right: 10px; color: white">
													<div>
														<button id="nextBtn1" disabled
															style="background-color: #007bff; height: 35px; width: 90px; margin-left: 5px; color: white">Next</button>

													</div>
												</div>
											</div>
										</div>
										<div class="card-footer"
											style="text-align: center; margin-top: 25px;">

											<button type="button" class="btn btn-primary p-2"
												id="btnHome" onclick="Cancel()">Cancel</button>


											<button type="button" class="btn btn-primary p-2"
												id="btnBack" onclick="personalDetailNxt(this)"
												th:attr="data-refnumber=${appreNO}">Next</button>
										</div>
									</div>

								</form>



								<form action="#" id="parisone">


									<div id="Paris" class="tabcontent" style="display: none">
										<div class="card p-1">
											<div class="row formline mt-2 ml-4">
												<div class="col-sm-2 ml-2">
													<h5 class="font-weight-bold ml" style="color: #00008B">Account
														Details</h5>
												</div>


											</div>
											<!-- Loader HTML -->
											<div id="loader1"
												style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; background-color: rgba(211, 211, 211, 0.6); /* Light gray with more transparency */ padding: 20px; /* Padding around the loader */ border-radius: 8px; /* Rounded corners */ text-align: center;">
												<!-- Center text in the loader -->
												<div
													style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
													<img style="width: 50px; height: 50px;"
														th:src="@{/images/loader.gif}" alt="Loading..." />
												</div>
											</div>

											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Scheme Type<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<select name="ca_schemetype" id="schemetype"
														onchange="Onschemetype1()"
														class="form-control form-control-sm bg-white border border-dark">
														<option value="">SELECT</option>
														<option value="LA">LOAN ACCOUNT</option>
														<option value="LAEMI">EMI</option>
														<option value="TD">DEPOSIT ACCOUNT</option>
													</select>
												</div>

												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Scheme Code </label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="10" id="schmcode" name="ca_scheme_code"
														autocomplete="off" />
												</div>

											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Account Branch Id<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="text" th:value="${BranchId}"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="10" id="prisolid" name="ca_solid"
														autocomplete="off" readonly />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_type">Account Branch Name </label>
												</div>
												<div class="col-sm-2">
													<input type="text" th:value="${BranchDesc}"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="13" id="branchdesc" name="branch_desc"
														autocomplete="off" readonly />
												</div>
											</div>

											<div id="Acc_TermDeposit" style="display: none;">
												<div class="row formline ml-4"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_code">GL Code<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="td_glcode" name="td_glcode"
															autocomplete="off" value="2000" readonly />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">GL Desc<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="20" id="td_gldesc" name="td_gldesc"
															autocomplete="off" value="Liability" readonly />
													</div>

												</div>
												<div class="row formline ml-4"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_code">GLSH Code<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="td_glshcode" name="td_glshcode"
															autocomplete="off" value="2500" readonly />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">GLSH Desc<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="20" id="td_glscdesc" name="td_glshdesc"
															autocomplete="off" value="DEPOSITS" readonly />
													</div>
												</div>
												<div class="row formline ml-4  mt-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Deposit Account No <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="20" id="depo_actno"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															name="td_deposit_accountno" oninput="updateAccountNo()"
															autocomplete="off" />

													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">Date of Deposits <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															th:value="${#dates.format(tran_date, 'dd-MM-yyyy')}"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="deposit_date" name="deposit_date"
															autocomplete="off" onchange="updateMaturityDate()"
															readonly />
													</div>

												</div>
												<div class="row formline ml-4 mt-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Deposit Amount <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="number"
															onchange="depositflow(); formatfornumbers(this)"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="deposit_amt" name="deposit_amt"
															autocomplete="off" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">Account Currency </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="currency" name="currency"
															autocomplete="off" title="Bhutanese Ngultrum" value="BTN" />
													</div>

												</div>
												<div class="row formline ml-4 mt-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Deposit Period <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2 d-flex align-items-center">
														<input type="text" name="deposit_period"
															id="deposit_period" onchange="updateMaturityDate()"
															class="form-control form-control-sm bg-white border border-dark"
															required style="margin-right: 0;" /> <input type="text"
															id="depositperiod"
															class="form-control form-control-sm bg-white border border-dark"
															required style="margin-left: 0;" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Maturity Date </label>
													</div>
													<div class="col-sm-2">
														<input type="date"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="13" id="maturity_date" name="maturity_date"
															autocomplete="off" />
													</div>
												</div>

												<div class="row formline ml-4 mt-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Rate of Interest<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="rate_of_int" name="rate_of_int"
															autocomplete="off" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">Interest Amount </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="int_amt" name="int_amt"
															autocomplete="off" readonly />
													</div>

												</div>
												<div class="row formline ml-4 mt-1 mb-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Compounding Factor </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="td_compounding_factor"
															name="td_compounding_factor" autocomplete="off" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Maturity Amount </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="13" id="maturity_amt" name="maturity_amt"
															autocomplete="off" readonly />
													</div>
												</div>
												<div class="row formline ml-4 mt-1 mb-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Deposit Type <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<select id="deposit_type" name="deposit_type"
															class="form-control form-control-sm bg-white border border-dark"
															required>
															<option value="Fixed">FIXED</option>
															<option value="Reinvestment">REINVESTMENT</option>
															<option value="Recurring">RECURRING</option>

														</select>
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Frequency <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<select id="frequency" name="frequency"
															onchange="updateDepositPeriod();updateMaturityDate()"
															class="form-control form-control-sm bg-white border border-dark">
															<option value="Monthly">MONTHLY</option>
															<option value="Yearly">YEARLY</option>

														</select>
													</div>
													<div class="col-sm-2 ml-2">
														<!-- Button to open modal -->
														<button type="button" class="btn btn-primary"
															id="depositFlowButton" onclick="depositflow(this)"
															data-toggle="modal" data-target="#mydepositmodal">Deposit
															Flow</button>
													</div>
												</div>

											</div>
											<div id="Acc_LeaseAccount" style="display: none;">
												<div class="row formline ml-4"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_code">GL Code<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="la_glcode" name="la_glcode"
															autocomplete="off" value="1000" readonly />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">GL Desc<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="20" id="la_gldesc" name="la_gldesc"
															autocomplete="off" value="Asset" readonly />
													</div>

												</div>
												<div class="row formline ml-4"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_code">GLSH Code<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="la_glshcode" name="la_glshcode"
															autocomplete="off" value="1500" readonly />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">GLSH Desc<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="20" id="la_glshdesc" name="la_glshdesc"
															autocomplete="off" value="LOANS AND ADVANCES" readonly />
													</div>
												</div>
												<div class="row formline ml-4 "
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Loan Account No <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" id="la_loan_accountno"
															name="la_loan_accountno"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="20" autocomplete="off" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">Date of Loan<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" id="date_of_loan" name="date_of_loan"
															th:value="${#dates.format(tran_date, 'dd-MM-yyyy')}"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" autocomplete="off" readonly />
													</div>
												</div>
												<div class="row formline ml-4  mb-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">

													<div class="col-sm-2 ml-2">
														<label for="sche_code">Account Currency</label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="loan_currency" name="loan_currency"
															value="BTN" title="Bhutanese Ngultrum "
															autocomplete="off" readonly="readonly" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2 ">
														<label for="sche_type">Interest Rate<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="effective_interest_rate"
															name="effective_interest_rate" autocomplete="off" />
													</div>

												</div>
												<div class="row formline ml-4 "
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<!-- Loan Sanctioned Field -->
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Loan Sanctioned<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="20" id="loan_sanctioned"
															onInput="setOutstanding(this)"
															onchange="formatAndSetValue(this)" name="loan_sanctioned"
															autocomplete="off" />
													</div>

													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label>Loan Period<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<div class="d-flex" style="gap: 5px;">
															<!-- day Field -->
															<input type="text" name="loan_period" id="loan_period"
																class="form-control form-control-sm bg-white border border-dark text-center"
																placeholder="mm" /> <input type="text" name=" " id=" "
																class="form-control form-control-sm bg-white border border-dark text-center"
																placeholder="Months" readonly />

															<!-- Month Field -->

															<!-- year Field -->
															<!-- <input type="text" name="loan_period3" id="loan_period3"
																class="form-control form-control-sm bg-white border border-dark text-center"
																placeholder="yyyy" readonly /> -->
														</div>
													</div>
												</div>

												<div class="row formline ml-4 "
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_code">Margin %<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text" oninput="calculateDrawingLimit()"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="margin_limit" name="margin_limit"
															autocomplete="off" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2 ">
														<label for="sche_type">Drawing Limit <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="drawing_limit" name="drawing_limit"
															autocomplete="off" readonly="readonly" />
													</div>
												</div>
												<div class="row formline ml-4 "
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Outstanding <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="loan_outstanding"
															name="loan_outstanding" autocomplete="off"
															readonly="readonly" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">Disbursement </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="disbursement" name="disbursement"
															autocomplete="off" />
													</div>
												</div>

												<div class="row formline ml-4 "
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Repayment Terms</label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="repayment_terms"
															name="repayment_terms" autocomplete="off" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2  ">
														<label for="sche_type">Recovery Method <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<select name="recovery_method" id="recovery_method"
															class="form-control form-control-sm bg-white border border-dark">
															<option value="">SELECT</option>
															<option value="Cash">CASH</option>
															<option value="Office Routing Account">OFFICE
																ROUTING ACCOUNT</option>
															<option value="Standing Instructions">STANDING
																INSTRUCTIONS</option>
														</select>
													</div>
												</div>
												<div class="row formline ml-4  mb-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_code">Expiry date <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="date"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="expiry_date" name="expiry_date"
															autocomplete="off" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Remarks </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="13" id="la_remarks" name="la_remarks"
															autocomplete="off" />
													</div>
													<div class="col-sm-2 ml-2">
														<!-- Button to open modal -->
														<button type="button" class="btn btn-primary"
															data-toggle="modal" data-target="#myaccModal"
															onclick="ToShowDTI()">DTI Validation</button>
													</div>
												</div>



												<div class="row formline mt-2 ml-4">
													<div class="col-sm-2 ml-2">
														<h5 class="font-weight-bold ml" style="color: #00008B">Repayment
															Details</h5>
													</div>


												</div>



												<div class="row formline ml-4 mt-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Installment ID</label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															id="inst_id" name="inst_id" autocomplete="off"
															readonly="readonly" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">Installment Start Date<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<input type="date"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="inst_start_dt" name="inst_start_dt"
															autocomplete="off" />
													</div>

												</div>
												<div class="row formline ml-4  mb-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">No of Installment</label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="no_of_inst" name="no_of_inst"
															autocomplete="off" readonly="readonly" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Cap At Maturity ? <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<label> <input type="radio" value="Y"
															id="maturity_flg1" name="maturity_flg"
															style="width: unset !important"> Yes
														</label> <label> <input type="radio" value="N"
															id="maturity_flg" name="maturity_flg"
															style="width: unset !important"> No
														</label>
													</div>
												</div>
												<div class="row formline ml-4 "
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Principal Installment Freq<span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<select name="inst_freq" id="inst_freq"
															class="form-control form-control-sm bg-white border border-dark">
															<option value="">SELECT</option>
															<option value="Monthly">MONTHLY</option>
														</select>
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_code">Interest Installment Freq <span
															style="color: red; font-size: 20px;"> *</span></label>
													</div>
													<div class="col-sm-2">
														<select name="interest_frequency" id="interest_frequency"
															class="form-control form-control-sm bg-white border border-dark">
															<option value="">SELECT</option>
															<option value="Monthly">MONTHLY</option>
														</select>
													</div>

												</div>
												<div class="row formline ml-4  mb-1"
													style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
													<div class="col-sm-2 ml-2">
														<label for="sche_type">Installment Amount </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="10" id="inst_amount" name="inst_amount"
															autocomplete="off" readonly="readonly" />
													</div>
													<div class="col-sm-1"></div>
													<div class="col-sm-2">
														<label for="sche_type">Installment (%) </label>
													</div>
													<div class="col-sm-2">
														<input type="text"
															onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
															class="form-control form-control-sm bg-white border border-dark"
															maxlength="13" id="inst_pct" name="inst_pct"
															autocomplete="off" readonly="readonly" />
													</div>
													<div class="col-sm-2 ml-2">
														<!-- Button to open modal -->
														<button type="button" class="btn btn-primary"
															onclick="getRepaymentDetails(this);" data-toggle="modal"
															data-target="#myleasecal">Schedule</button>
													</div>
												</div>
											</div>
										</div>
										<div class="card mt-1 p-1">
											<div class="row formline "></div>
											<div class="row formline mt-2 ml-4">
												<div class="col-sm-2 ml-2">
													<h5 class="font-weight-bold ml" style="color: #00008B">Identification</h5>
												</div>
											</div>

											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">National Id<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="13" id="nationalid" th:value="${NationalId}"
														name="ca_idenditification_number" autocomplete="off" />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Issue Date <span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="Date" id="issuedate" name="ca_issue_date"
														class="form-control form-control-sm bg-white border border-dark"
														autocomplete="off" />
												</div>
											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_type">Passport No<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="text"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="form-control form-control-sm bg-white border border-dark"
														maxlength="12" id="passno" name="ca_passport_number"
														th:value="${PassNo}" autocomplete="off" />
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Expiry Date<span
														style="color: red; font-size: 20px;"> *</span></label>
												</div>
												<div class="col-sm-2">
													<input type="hidden"
														class="form-control form-control-sm bg-white border border-dark"
														autocomplete="off" /> <input type="date" id="expdate"
														name="ca_expiry_date"
														class="form-control form-control-sm bg-white border border-dark"
														autocomplete="off" />
													<div id="expiry-message"
														style="color: red; font-size: 14px;"></div>
													<!-- Optional message div -->
												</div>

											</div>
										</div>
										<div class="card mt-1 p-1">
											<div class="row formline"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;"></div>


											<div class="row formline "></div>

											<div class="row formline mt-2 ml-4">
												<div class="col-sm-2 ml-2">
													<h5 class="font-weight-bold ml" style="color: #00008B">Other
														Details</h5>
												</div>


											</div>

											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_code">Non Resident</label>&nbsp;
													&nbsp;&nbsp;&nbsp;
												</div>
												<div class="col-sm-2">
													<input type="radio" name="ca_non_resident" id="Nonresi"
														value="Y">Yes <input type="radio"
														name="ca_non_resident" id="Nonresi" value="N" checked>No
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Staff Indicator</label>&nbsp;
													&nbsp;&nbsp;&nbsp;
												</div>
												<div class="col-sm-2">
													<input type="radio" name="ca_staff_indicator"
														id="Staffindi" value="Y"> Yes <input type="radio"
														name="ca_staff_indicator" value="N" id="Staffindi" checked>
													No
												</div>
											</div>
											<div class="row formline ml-4"
												style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
												<div class="col-sm-2 ml-2">
													<label for="sche_code">Trade Finance</label>&nbsp;
													&nbsp;&nbsp;&nbsp;
												</div>
												<div class="col-sm-2">
													<input type="radio" name="ca_trdfin" id="trdfin" value="Y">
													Yes <input type="radio" name="ca_trdfin" value="N"
														id="trdfin" checked> No
												</div>
												<div class="col-sm-1"></div>
												<div class="col-sm-2">
													<label for="sche_code">Monitor Indicator</label>&nbsp;
													&nbsp;&nbsp;&nbsp;
												</div>
												<div class="col-sm-2">
													<input type="radio" name="ca_minor_indicator" id="monindi"
														value="Y"> Yes <input type="radio"
														name="ca_minor_indicator" value="N" id="monindi" checked>
													No
												</div>

											</div>
										</div>

										<div class="card-footer"
											style="text-align: center; margin-top: 25px;">

											<button type="button" class="btn btn-primary p-2"
												id="btnHome" onclick="Cancel()">Cancel</button>


											<button type="button" class="btn btn-primary p-2"
												id="btnBack" onclick="AccountDetailNxt(this)"
												th:attr="data-refnumber=${appreNO}">Next</button>
										</div>


									</div>
								</form>
								<!-- END PARISONE  -->
								<div id="Tokyo" class="tabcontent" style="display: none">
									<!-- Loader HTML -->
									<div id="loader2"
										style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; background-color: rgba(211, 211, 211, 0.6); /* Light gray with more transparency */ padding: 20px; /* Padding around the loader */ border-radius: 8px; /* Rounded corners */ text-align: center;">
										<!-- Center text in the loader -->
										<div
											style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
											<img style="width: 50px; height: 50px;"
												th:src="@{/images/loader.gif}" alt="Loading..." />
										</div>
									</div>


									<div class="row"
										style="overflow: auto; white-space: nowrap; margin-left: 15px">
										<table border="1" id="dynamicTable"
											class="table table-bordered"
											style="text-align: center; vertical-align: 22px; margin-top: 10px; font-size: 15px;">
											<thead>
												<tr>

													<th>Document Type</th>
													<th>Document Code</th>
													<th>Document Description</th>
													<th>Unique Id</th>
													<th>Place of Issue</th>
													<th>Issue Date</th>
													<th>Expiry Date</th>
													<th>Document Upload</th>
											<tbody id="click1">
												<tr>
													<td><select id="docType0" name="docType"
														onchange="zeroth_change_re()" class="uniform-input pl-2"
														style="height: 24px">
															<option value="">SELECT</option>
															<option value="NIC">CUSTOMER-RETAIL-NIC</option>
															<option value="PSP">CUSTOMER-RETAIL-PSP</option>
															<option value="AGM">CUSTOMER-RETAIL-AGM</option>
															<option value="DOC">CUSTOMER-RETAIL-DOC</option>
													</select></td>


													<td><input type="text" id="docCode0" name="docCode"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														maxlength="10" class="uniform-input" autocomplete="off"
														readonly></td>

													<td><input type="text" id="docDesc0" name="docDesc"
														readonly
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="uniform-input" autocomplete="off"></td>
													<td><input type="text" id="uniqId0" maxlength="13"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														name="uniqId" class="uniform-input" autocomplete="off"></td>
													<td><input type="text" id="docIssPlace0"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														name="docIssPlace" maxlength="25" class="uniform-input"
														autocomplete="off"></td>
													<td><input type="date" id="docIssDate0"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														name="docIssDate" class="uniform-input" autocomplete="off"></td>
													<td><input type="date" id="docExpDate0"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														name="docExpDate" class="uniform-input" autocomplete="off"></td>
													<td class="span2"><input id="file0" type="file"
														onchange="readURL(this);"></td>
												</tr>
												<tr>

													<td><select id="docType1" name="docType"
														onchange="first_change_re()" class="uniform-input pl-2"
														style="height: 24px">
															<option value="">SELECT</option>
															<option value="NIC">CUSTOMER-RETAIL-NIC</option>
															<option value="PSP">CUSTOMER-RETAIL-PSP</option>
															<option value="AGM">CUSTOMER-RETAIL-AGM</option>
															<option value="DOC">CUSTOMER-RETAIL-DOC</option>
													</select></td>
													<td><input type="text" id="docCode1" name="docCode"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														maxlength="10" class="uniform-input" autocomplete="off"
														readonly /></td>
													<td><input type="text" id="docDesc1" name="docDesc"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="uniform-input" autocomplete="off" readonly></td>
													<td><input type="text" id="uniqId1" name="uniqId"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														class="uniform-input" autocomplete="off"></td>
													<td><input type="text" id="docIssPlace1"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														name="docIssPlace" class="uniform-input"
														autocomplete="off"></td>
													<td><input type="date" id="docIssDate1"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														name="docIssDate" class="uniform-input" autocomplete="off"></td>
													<td><input type="date" id="docExpDate1"
														onkeyup="this.value = this.value.toUpperCase();handleIn(this)"
														name="docExpDate" class="uniform-input" autocomplete="off"></td>
													<td><input type="file" id="file1"
														onchange="readURL(this);"></td>

												</tr>
											</tbody>
										</table>

									</div>
									<div class="text-center card-footer">
										<button class="btn btn-primary p-2" type="button"
											onclick="rowadd()">Add</button>
										<button class="btn btn-primary p-2" type="button"
											onclick="rowdelete()">Remove</button>
										<button class="btn btn-primary p-2" type="button"
											th:attr="data-refnumber=${appreNO}"
											onclick="submitfile(this)">Submit</button>
									</div>
								</div>
								<div>


									<!-- signature upload starts -->
									<div id="india" class="tabcontent" style="display: none">
										<!-- Loader HTML -->
										<div id="loader3"
											style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; background-color: rgba(211, 211, 211, 0.6); /* Light gray with more transparency */ padding: 20px; /* Padding around the loader */ border-radius: 8px; /* Rounded corners */ text-align: center;">
											<!-- Center text in the loader -->
											<div
												style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
												<img style="width: 50px; height: 50px;"
													th:src="@{/images/loader.gif}" alt="Loading..." />
											</div>
										</div>
										<div class="row" style="overflow: auto; white-space: nowrap;">

											<table class="mt-4 table-bordered"
												style="height: 200px; width: 100%">
												<thead>
													<tr>
														<th class=""
															style="text-align: left; vertical-align: 22px; margin-top: 12px; font-size: 15px; padding-left: 30px">
															Image Access Group <span id="accessgrp_val"
															style="color: red; font-size: 20px;"> *</span>
														</th>
														<th class=""
															style="text-align: left; vertical-align: 22px; font-size: 15px; padding-left: 30px;">
															Group</th>
														<th class=""
															style="text-align: left; vertical-align: 22px; font-size: 15px; padding-left: 30px;">
															Keyword</th>
														<th class=""
															style="text-align: left; vertical-align: 22px; font-size: 15px; padding-left: 68px;">
															Photo<span id="pic_val"
															style="color: red; font-size: 20px;"> *</span>
														</th>
														<th class=""
															style="text-align: left; vertical-align: 22px; font-size: 15px; padding-left: 35px;">
															Signature<span id="sign_val"
															style="color: red; font-size: 20px;"> *</span>
														</th>

													</tr>
												</thead>
												<tbody id="signbody">
													<tr id="row0">
														<td><select id="imgaccesscode" name="img_access_code"
															class="form-control form-control-sm bg-white border border-dark"
															style="margin-left: 30px; font-size: 15px; width: 250px">
																<option>Select</option>
																<option>Customer</option>
																<option>Account</option>
														</select></td>
														<td><input id="group" type="text" maxlength="10"
															name="img_group"
															class="form-control form-control-sm bg-white border border-dark "
															style="margin-left: 30px; width: 250px"></td>
														<td><input id="keyword" type="text" maxlength="10"
															name="keyword"
															class="form-control form-control-sm bg-white border border-dark "
															style="margin-left: 30px; width: 250px"></td>
														<td>
															<div class="file-uploadone pl-2" id="counts1"
																style="display: block">

																<div class="image-upload-wrap">
																	<input class="file-upload-input" type='file'
																		onchange="readURL(this);" id="barathphoto"
																		name="photo" accept="image/*" />
																	<div class="drag-text">
																		<h3 style="font-size: 10px;">Choose Image</h3>
																	</div>
																</div>

																<div class="file-upload-content">
																	<img class="file-upload-image" name="photo" src="#"
																		alt="your image" id="imagefile" />
																	<div class="image-title-wrap"></div>
																</div>
															</div>

														</td>



														<td>
															<div class="pl-3" id="collect1">
																<div id="signatureown1">
																	<div id="imageContainer"
																		style="width: 50%; height: 50%;">
																		<!-- Conditionally display the file input or the image based on the presence of dataURL -->
																		<div th:if="${dataURL != null}"
																			class="image-upload-wrap" id="imageContainer">

																			<img th:src="${dataURL}" alt="Signature Image"
																				style="width: 100%; height: auto;" />
																		</div>
																		<div th:if="${dataURL == null}"
																			class="image-upload-wrap" id="imageContainer">
																			<input class="file-upload-input" type='file'
																				onchange="readURL(this);" accept="*" name="sign"
																				id="barathsign" style="margin-left: 50px;">
																		</div>
																	</div>
																	<div>
																		<span id="Draw_signature">Draw signature</span> <span>/</span>
																		<span class="text-primary" onclick="SmsFunction()">click
																			to sms</span>
																	</div>
																	<div id="myModal" class="modal" style="display: none;">
																		<div class="modal-content">
																			<div class="modal-header">
																				<h2 style="background-color: #BBC3CB;">put your
																					signature</h2>
																				<div class="modal-footer">
																					<span class="close">&times;</span>
																				</div>
																			</div>
																			<div class="modal-body">
																				<canvas id="signature-pad" width="400" height="200"></canvas>
																				<button id="clear-button">Clear</button>
																				<button id="save-button">Save</button>
																				<p>please sign your signature</p>
																				<div class="modal-footer"
																					style="padding: 16px 16px;"></div>
																			</div>
																		</div>
																	</div>
																</div>
															</div>

														</td>
													</tr>

												</tbody>
											</table>

										</div>
										<form id="smsForm" action="SmsPopup" method="POST"
											target="_blank">
											<input type="hidden" id="appl_ref_no_input"
												name="appl_ref_no"> <input type="hidden"
												id="unique_id_input" name="unique_id">
										</form>


										<div class="card-footer"
											style="text-align: center; margin-top: 25px;">

											<button class="btn btn-primary p-2" type="button"
												onclick="addRowsignature()">Add</button>
											<button class="btn btn-primary p-2" type="button"
												onclick="rowdeletesignature()">Remove</button>
											<!---------------------------------------------- for appr no----------  -->
											<input hidden th:value="${apprefno}" type="text" id="gooo"
												name="btnradio">
											<button type="button" class="btn btn-primary p-2"
												id="btnBack" onclick="signsubmit(this);"
												th:attr="data-refnumber=${appreNO}">Submit</button>
											<input id="sigurl" type="text" style="display: none;" />
										</div>

										<div class="container-fluid">
											<div class="card">
												<div class="card-body text-center">
													<div class="form-group ">
														<div class="container-fluid">
															<div class="row row-cols-2 row-cols-lg-3">
																<div class="col-sm-2"
																	style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
																	<label>Entry User:</label>
																</div>
																<div class="col-sm-2">
																	<input type="hidden"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" /> <input type="text"
																		th:value="${userid}"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" />
																</div>
																<div class="col-sm-2"
																	style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
																	<label>Modify User:</label>
																</div>
																<div class="col-sm-2">
																	<input type="hidden"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" /> <input type="text"
																		th:value="${userid}"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" />
																</div>

																<div class="col-sm-2"
																	style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
																	<label>Verify User:</label>
																</div>
																<div class="col-sm-2">
																	<input type="hidden"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" /> <input type="text"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" />
																</div>
															</div>

															<div class="row row-cols-2 row-cols-lg-3">
																<div class="col-sm-2"
																	style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
																	<label>Entry Date:</label>
																</div>
																<div class="col-sm-2">
																	<input type="hidden"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" /> <input type="text"
																		th:value="${#dates.format(date, 'dd-MM-yyyy HH:mm:ss')}"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" />
																</div>

																<div class="col-sm-2"
																	style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
																	<label>Modify Date:</label>
																</div>
																<div class="col-sm-2">
																	<input type="hidden"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" /> <input type="text"
																		th:value="${#dates.format(date, 'dd-MM-yyyy HH:mm:ss')}"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" />
																</div>

																<div class="col-sm-2"
																	style="font-size: 15px; font-weight: 500; padding: 0px 0px 2px 0px;">
																	<label>Verify Date:</label>
																</div>
																<div class="col-sm-2">
																	<input type="hidden"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" /> <input type="text"
																		class="form-control form-control-sm bg-white border border-dark"
																		autocomplete="off" />
																</div>
															</div>

														</div>
													</div>
												</div>
											</div>
										</div>

									</div>

								</div>

							</div>
						</div>
					</div>
				</div>


			</div>
		</div>
	</div>

	<!---- Content tag ---->

	<div id="myModalNeg" class="modal">

		<!-- Modal content -->
		<div class="modal-content">

			<div class="negative"
				style="margin-right: inherit; margin-left: inherit; font-size: large; font-weight: bolder;">
				Negative List Checking is going on please wait<span
					class="loader__dot">.</span><span class="loader__dot">.</span><span
					class="loader__dot">.</span><span class="loader__dot">.</span><span
					class="loader__dot">.</span><span class="loader__dot">.</span>
			</div>
		</div>
	</div>

	<div id="myModalded" class="modal">

		<!-- Modal content -->
		<div class="modal-content">


			<div class="dup"
				style="margin-right: inherit; margin-left: inherit; font-size: large; font-weight: bolder;">
				Customer Checking is going on please wait<span class="loader__dot">.</span><span
					class="loader__dot">.</span><span class="loader__dot">.</span><span
					class="loader__dot">.</span><span class="loader__dot">.</span><span
					class="loader__dot">.</span>
			</div>
		</div>
	</div>

	<div id="myModalblack" class="modal">

		<!-- Modal content -->
		<div class="modal-content">

			<div class="black"
				style="margin-right: inherit; margin-left: inherit; font-size: large; font-weight: bolder;">
				Black List Checking is going on please wait<span class="loader__dot">.</span><span
					class="loader__dot">.</span><span class="loader__dot">.</span><span
					class="loader__dot">.</span><span class="loader__dot">.</span><span
					class="loader__dot">.</span>
			</div>
		</div>
	</div>

</body>


<script>

	

	function AccountTypeChange() {
		const acc_typeSelect = document.getElementById("acc_type");
		const noOfperSelect = document.getElementById("noOfper");
		const selectedacc_type = acc_typeSelect.value;

		noOfperSelect.innerHTML = null;

		if (selectedacc_type && subcategories[selectedacc_type]) {
			subcategories[selectedacc_type].forEach(noOfper => {
				const option = document.createElement("option");
				option.value = noOfper;
				option.text = noOfper;
				noOfperSelect.appendChild(option);
			});
		}
		var grp = document.getElementById("cust_grp").value;
		var type = document.getElementById("acc_type").value;

		var fieldOption1 = document.getElementById('RetailDetail'); //	INDIVIDUAL
		var fieldOption2 = document.getElementById('CorporateDetail');// INDIVIDUAL

		var fieldOption3 = document.getElementById('Joint_Account_Retail');
		var fieldOption4 = document.getElementById('showcorporate');
		
		if (grp == "RETAIL" && type == "INDIVIDUAL") {
			 hideError($("#acc_type"));
			fieldOption1.style.display = "block"
			fieldOption2.style.display = "none"
			fieldOption3.style.display = "none"
		    fieldOption4.style.display = "none"

		} else if (grp == "RETAIL" && type == "JOINT ACCOUNT") {
			 hideError($("#acc_type"));
			fieldOption1.style.display = "none"
			fieldOption2.style.display = "none"
			fieldOption3.style.display = "block"
			fieldOption4.style.display = "none"
			

		} 
	}

	function myFunction() {
		const noOfperSelect = document.getElementById("noOfper");
		const selectednoOfper = noOfperSelect.value;

		if (selectednoOfper) {
			// Perform page shift here, for example:
			// window.location.href = "new_page.html";
			console.log("Page shift to a new page based on the selected noOfper.");
		}
	}

</script>

<script>

	var signaturePad;

	function openSignaturePad() {
		var container = document.getElementById('signaturePadContainer');
		container.style.display = 'block';

		var canvas = document.getElementById('signaturePad');
		signaturePad = new SignaturePad(canvas);
	}

	function saveSignature() {
		if (signaturePad.isEmpty()) {
			$('#myrequired').modal("toggle");
			$('#alertmsg').text("Please provide a signature...!");
			
		} else {
			var signatureData = signaturePad.toDataURL();
			// Do something with the signature data, e.g., save it to a database
			console.log(signatureData);

			closeSignaturePad();
		}
	}

	function clearSignature() {
		signaturePad.clear();
	}

	function closeSignaturePad() {
		var container = document.getElementById('signaturePadContainer');
		container.style.display = 'none';
	}
</script>





<script>
	function openCity(evt, cityName) {

		const noOfper = document.getElementById("noOfper");
		var i = noOfper;

		var i, tabcontent, tablinks;
		tabcontent = document.getElementsByClassName("tabcontent");
		for (i = 0; i < tabcontent.length; i++) {
			tabcontent[i].style.display = "none";
		}
		tablinks = document.getElementsByClassName("tablinks");
		for (i = 0; i < tablinks.length; i++) {
			tablinks[i].className = tablinks[i].className
				.replace(" active", "");
		}
		document.getElementById(cityName).style.display = "block";
		evt.currentTarget.className += " active";



	}
</script>






<script>
	var modal = document.getElementById("myModal"); 
	// Get the button that opens the modal
	var btn = document.getElementById("Draw_signature"); 

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0]; 

	// When the user clicks the button, open the modal 
	btn.onclick = function () {
		modal.style.display = "block";
	} 

	// When the user clicks on <span> (x), close the modal
	span.onclick = function () {
		modal.style.display = "none";
	} 


	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function (event) {
		if (event.target == modal) {
			modal.style.display = "none";
		}
	} 
</script>

<script>// Get references to HTML elements
var canvas = document.getElementById('signature-pad'); 

var clearButton = document.getElementById('clear-button'); 

var saveButton = document.getElementById('save-button'); 

// Initialize the signature pad
var signaturePad = new SignaturePad(canvas, {
	backgroundColor: 'rgb(255, 255, 255)', // Background color of the signature pad
	penColor: 'rgb(0, 0, 0)' // Pen color
}); 
// Clear the signature pad when the "Clear" button is clicked
clearButton.addEventListener('click', function () {
	signaturePad.clear();
}); 


// Save the signature as an image when the "Save" button is clicked
saveButton.addEventListener('click', function () {
if (signaturePad.isEmpty()) {
    $('#myrequired').modal("toggle");
    $('#myrequired .modal-body').text("Please provide a signature first.");
} else {
    // Convert the signature to an image (PNG format)
    var signatureImage = signaturePad.toDataURL();
    console.log(signatureImage);

    // Create a new <img> element
    var imgElement = document.createElement('img');
    imgElement.src = signatureImage;
    imgElement.id = 'vjImage';

    // Get the 0th row and its respective cell for the signature image
    var row0 = document.getElementById('row0');
    var imageContainer = row0.querySelector('#imageContainer');

    // Clear any existing content in the image container
    imageContainer.innerHTML = '';
    // Append the new image element to the image container
    imageContainer.appendChild(imgElement);

    // Optionally, save the image data (base64) into a hidden field or somewhere else
    var hiddenInput = document.createElement('input');
    hiddenInput.type = 'hidden';
    hiddenInput.name = 'sign0';
    hiddenInput.value = signatureImage; // Store the signature as base64 data
    imageContainer.appendChild(hiddenInput); // You can append this to the same <td> or another place

    // Close the signature pad
    closeSignaturePad();
}
});
 

	function closeSignaturePad() {
		var container = document.getElementById('myModal');
		container.style.display = 'none';
	} 


	function convertSignatureToImage() {
		// Get the Data URL from the SignaturePad
		var signatureImage = signaturePad.toDataURL();

		// Create a new <img> element
		var imgElement = document.createElement('img');

		// Set the src attribute of the <img> element to the Data URL
		imgElement.src = signatureImageDataURL;

		// Append the <img> element to a container in your HTML, e.g., a <div> with the id "signatureContainer"
		document.getElementById('imageContainer').appendChild(imgElement);
		//alert(document.getElementById('imageContainer').value)
		//  alert(imgElement);
	}
	
	


	// Example goBack function to close the modal
	function goBack() {
	    $('#myrequired22').modal('hide'); // Close the modal
	}
	
	function goBackSms() {
	    $('#SmsPopUpMsg').modal('hide'); // Close the modal
	}

	
</script>
<script>
        let rowCount = 1; // Global variable to keep track of rows

        function addRowsignature() {
            // Maximum row limit
            const maxRows = 5;
            const tableBody = document.getElementById('signbody');

            // Create a new row
            const newRow = document.createElement('tr');
            newRow.id = `row${rowCount}`;

            // Create cells for the new row
            newRow.innerHTML = `
                <td>
                    <select id="imgaccesscode${rowCount}" name ="img_access_code" class="form-control form-control-sm bg-white border border-dark" style="margin-left: 30px; font-size: 15px; width: 250px">
                        <option>Select</option>
                        <option>Customer</option>
                        <option>Account</option>
                    </select>
                </td>
                <td>
                    <input id="group${rowCount}" type="text" name ="img_group" maxlength="10" class="form-control form-control-sm bg-white border border-dark" style="margin-left: 30px;width: 250px">
                </td>
                <td>
                    <input id="keyword${rowCount}" type="text" name ="keyword" maxlength="10" class="form-control form-control-sm bg-white border border-dark" style="margin-left: 30px;width: 250px">
                </td>
                <td class="pr-4">
                    <div class="file-uploadone" id="counts${rowCount}" style="display: block;">
                        <div class="image-upload-wrap">
                            <input class="file-upload-input" type='file'  name="photo" onchange="readURL(this);" id="barathphoto${rowCount}" accept="image/*" />
                            <div class="drag-text">
                                <h3 style="font-size: 10px;">Choose Image</h3>
                            </div>
                        </div>
                        <div class="file-upload-content">
                            <img class="file-upload-image" src="#"  alt="your image" id="imagefile${rowCount}" />
                            <div class="image-title-wrap"></div>
                        </div>
                    </div>
                </td>
                <td class="pl-3">
                    <div id="collect${rowCount}" style="display: block;">
                        <div id="signatureown${rowCount}">
                            <div id="imageContainer${rowCount}" style="width: 50%; height: 50%;">
                                <div class="image-upload-wrap" id="imageContainerWrap${rowCount}">
                                    <input class="file-upload-input" type='file' name="sign" onchange="readURL(this);" accept="image/*"  id="barathsign${rowCount}" style="margin-left: 50px;">
                                </div>
                            </div>
                            <div>
                                <p  onclick="openSignatureModal(${rowCount})" style="margin-bottom: 10px">Draw signature</p>
                            </div>
                        </div>
                    </div>
                </td>
            `;

            // Create the modal for the signature
            const modalHTML = `
                <div id="myModal${rowCount}" class="modal">
                    <div class="modal-content" style="width:50%">
                        <div class="modal-header">
                            <h2 style="background-color: #BBC3CB;">Put your signature</h2>
                            <div class="modal-footer">
                                <span class="close1" onclick="closeSignatureModal(${rowCount})">X</span>
                            </div>
                        </div>
                        <div class="modal-body">
                            <canvas id="signature-pad${rowCount}" width="400" height="200" style="width: 829px; border: 1px solid black;"></canvas>
                            <button id="clear-button${rowCount}">Clear</button>
                            <button id="save-button${rowCount}" onclick="saveSignature(${rowCount})">Save</button>
                            <p>Please sign your signature</p>
                        </div>
                    </div>
                </div>
            `;
            
            // Append the modal to the body (or another appropriate container)
            document.body.insertAdjacentHTML('beforeend', modalHTML);
          
            tableBody.appendChild(newRow);

            // Increment the row count
            rowCount++;
        }

        function openSignatureModal(index) {
            const modal = document.getElementById(`myModal${index}`);
            if (modal) {
                modal.style.display = 'block'; // Show the modal
                console.log(`Modal with index ${index} is displayed`);
            } else {
                console.error(`Modal with index ${index} not found`);
            }


            const canvas = document.getElementById(`signature-pad${index}`);
            const context = canvas.getContext('2d');
            context.clearRect(0, 0, canvas.width, canvas.height);

            let drawing = false;

            canvas.addEventListener('mousedown', function(event) {
                drawing = true;
                context.beginPath();
                context.moveTo(event.offsetX, event.offsetY);
            });

            canvas.addEventListener('mousemove', function(event) {
                if (drawing) {
                    context.lineTo(event.offsetX, event.offsetY);
                    context.stroke();
                }
            });

            canvas.addEventListener('mouseup', function() {
                drawing = false;
                context.closePath();
            });

            document.getElementById(`clear-button${index}`).onclick = function() {
                context.clearRect(0, 0, canvas.width, canvas.height);
            };
        }

       

        function saveSignature(index) {
            const canvas = document.getElementById(`signature-pad${index}`);
            const modal = document.getElementById(`myModal${index}`);
            const drawButton = document.querySelector(`#row${index} button[onclick='openSignatureModal(${index})']`);

            if (canvas && modal) {
                // Convert canvas content to a data URL (base64-encoded image)
                const dataURL = canvas.toDataURL();
                const img = new Image();
                img.src = dataURL;
                img.style.width = '50%'; // Set desired width
                img.style.height = '50%'; // Set desired height

                // Append the image to the corresponding <td> in the table (where signature should be displayed)
                const td = document.querySelector(`#row${index} td:last-child`); // Last <td> in the row
                td.innerHTML = ''; // Clear any existing content
                td.appendChild(img); // Show the saved signature image

                // Optionally, save the image data (base64) into a hidden field or somewhere else
                // This will store the signature in a hidden field, for example:
                const hiddenInput = document.createElement('input');
                hiddenInput.type = 'hidden';
                hiddenInput.name = `sign${index}`;
                hiddenInput.value = dataURL; // Store the signature as base64 data
                td.appendChild(hiddenInput); // You can append this to the same <td> or another place

                // Hide the "Draw Signature" button after saving the signature
                if (drawButton) {
                    drawButton.style.display = 'none'; // Hide the button after saving the signature
                }

                // Create a new "Draw Signature" button to allow drawing again
                const newDrawButton = document.createElement('p');
                newDrawButton.textContent = 'Draw Signature';
                newDrawButton.onclick = function() {
                    openSignatureModal(index); // Open the signature modal again
                };
                td.appendChild(newDrawButton); // Append the new button to the <td>

                modal.style.display = 'none'; // Close modal after saving
            } else {
                console.error(`Canvas or modal with ID signature-pad${index} not found.`);
            }
        }

        // Close modal logic
        function closeSignatureModal(index) {
            const modal = document.getElementById(`myModal${index}`);
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        function rowdeletesignature() {
            var tableBody = document.getElementById('signbody');
            var rows = tableBody.getElementsByTagName('tr');
            if (rows.length < 1) {
                alert("There is no row available to delete!");
                return;
            }

            var lastRow = rows[rows.length - 2]; // Get the last row (excluding the spacer row)
            var lastSpacerRow = rows[rows.length - 1]; // Get the last spacer row
            if (lastRow && lastSpacerRow) {
                lastRow.remove();
                lastSpacerRow.remove();
                rowCount--;
                console.log("Row deleted successfully.");
            } else {
                alert("No rows found to delete.");
            }
        }
    </script>
<script>
	var modal = document.getElementById("myModal"); 
	// Get the button that opens the modal
	var btn = document.getElementById("Draw_signature"); 

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0]; 

	// When the user clicks the button, open the modal 
	btn.onclick = function () {
		modal.style.display = "block";
	} 

	// When the user clicks on <span> (x), close the modal
	span.onclick = function () {
		modal.style.display = "none";
	} 


	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function (event) {
		if (event.target == modal) {
			modal.style.display = "none";
		}
	} 
</script>
<script>
function Onbranchid() {
	var sol_id = document.getElementById("prisolid").value; 
	$.ajax({
		type: 'GET',
		url: "./getBranchDetails?sol_id=" + sol_id,
		success: function (response) {
			console.log(response);
			var BranchId = response[0] != null ? response[0] : ""; 
			$('#branchdesc').val(BranchId); 
		}
	});
}
function Onbranchidmini() {
	var sol_id = document.getElementById("prisolidmini").value; 
	$.ajax({
		type: 'GET',
		url: "./getBranchDetails?sol_id=" + sol_id,
		success: function (response) {
			console.log(response);
			var BranchId = response[0] != null ? response[0] : ""; 
			$('#branchdescmini').val(BranchId); 
		}
	}); 
}
function Onbranchidminija() {
	var sol_id = document.getElementById("prisolidminija").value; 
	$.ajax({
		type: 'GET',
		url: "./getBranchDetails?sol_id=" + sol_id,
		success: function (response) {
			console.log(response);
			var BranchId = response[0] != null ? response[0] : ""; 
			$('#branchdescminija').val(BranchId); 
		}
	}); 
}
</script>
<script>

//Function to update the full name field
function updateFullName() {
    var firstName = document.getElementById('firstName').value;
    var middleName = document.getElementById('middleName').value;
    var lastName = document.getElementById('lastName').value;

    var fullName = firstName;

    if (middleName) {
        fullName += ' ' + middleName;
    }

    if (lastName) {
        fullName += ' ' + lastName;
    }

    document.getElementById('fullName').value = fullName;
}

// Add event listeners to the input fields
document.getElementById('firstName').addEventListener('input', updateFullName);
document.getElementById('middleName').addEventListener('input', updateFullName);
document.getElementById('lastName').addEventListener('input', updateFullName);

</script>
<script>

//Function to update the full name field
function updateName() {
    var firstName = document.getElementById('cust_name').value;
    var middleName = document.getElementById('sche_type').value;
    var lastName = document.getElementById('sche_code').value;

    var fullName = firstName;

    if (middleName) {
        fullName += ' ' + middleName;
    }

    if (lastName) {
        fullName += ' ' + lastName;
    }

    document.getElementById('fullname').value = fullName;
}

// Add event listeners to the input fields
document.getElementById('cust_name').addEventListener('input', updateName);
document.getElementById('sche_type').addEventListener('input', updateName);
document.getElementById('sche_code').addEventListener('input', updateName);

</script>
<script>

//Function to update the full name field
function updateName() {
    var firstName = document.getElementById('first_name').value;
    var middleName = document.getElementById('midname').value;
    var lastName = document.getElementById('last_name').value;

    var fullName = firstName;

    if (middleName) {
        fullName += ' ' + middleName;
    }

    if (lastName) {
        fullName += ' ' + lastName;
    }

    document.getElementById('full_name').value = fullName;
}

// Add event listeners to the input fields
document.getElementById('first_name').addEventListener('input', updateName);
document.getElementById('midname').addEventListener('input', updateName);
document.getElementById('last_name').addEventListener('input', updateName);



function ToShowDTI() { 
    var loanSanctionedValue = document.getElementById("annual_income").value; 
    var monthlyIncome =  document.getElementById("monthly_income").value.replace(/,/g, ''); 
 
    
    document.getElementById("month_income").value = (formatNumberWithIndianSeparationForOninput1(monthlyIncome));
    var CustType = document.getElementById("cust_type").value; 
    document.getElementById("constitution").value = CustType;
    var FullName = document.getElementById("fullname").value; 
    document.getElementById("borrower_name").value = FullName;
}
function Annual_Income() { 
    var loanSanctionedValue = document.getElementById("annual_income").value; 
    document.getElementById("Annu_income").value = loanSanctionedValue;
    var CustType = document.getElementById("cust_type").value; 
    document.getElementById("constitution_corp").value = CustType;
    var FullName = document.getElementById("fullName").value; 
    document.getElementById("borrower_name_corp").value = FullName;
}



 
</script>
<script type="text/javascript">


function calculateDTI() {
    // Get values of monthly repayment and monthly income
    var monthlyRepayment = parseFloat(document.getElementById('monthly_repayment').value) || 0;
    var monthlyIncome = parseFloat(document.getElementById('month_income').value) || 0;

    // Validate inputs to make sure monthly income is greater than 0
    if (monthlyIncome > 0) {
        // Calculate DTI ratio (Monthly Repayment / Monthly Income) * 100
        var dtiRatio = (monthlyRepayment / monthlyIncome) * 100;

        // Display DTI ratio in the DTI Ratio field, rounded to 2 decimal places
        document.getElementById('dti_ratio').value = dtiRatio.toFixed(2) + '%';

        // Determine the status based on DTI ratio
        var statusMessage;
        if (dtiRatio <= 35) {
            statusMessage = "Favorable";
        } else if (dtiRatio >= 36 && dtiRatio <= 49) {
            statusMessage = "Adequate";
        } else {
            statusMessage = "Not Favorable"; // You can adjust this message as needed
        }

        // Display the status message in a separate field or alert
        document.getElementById('dti_status').textContent = statusMessage; // Update this line based on how you want to display it
    } else {
        // Show error message if income is invalid
        document.getElementById('dti_ratio').value = 'Invalid input';
     //   alert('Please enter a valid Monthly Income greater than 0.');
        document.getElementById('dti_status').textContent = ""; // Clear status message if input is invalid
    }
}


    function formatForInput(date) {
            var d = new Date(date);
            var day = ('0' + d.getDate()).slice(-2);
            var month = ('0' + (d.getMonth() + 1)).slice(-2);
            var year = d.getFullYear();
            return `${year}-${month}-${day}`;
        }

    document.addEventListener('DOMContentLoaded', function() {
        var dateOfLoanInput = document.getElementById('inst_start_dt');
        if (TRANDATE !== '1970-01-01') {
            dateOfLoanInput.value = formatForInput(TRANDATE);
        }
    });
</script>
<script th:inline="javascript">
        /*<![CDATA[*/
        var TRANDATE = /*[[${TRANDATE}]]*/ '1970-01-01';
        /*]]>*/
    </script>

<script>

function depositflow(a) {
	event.preventDefault();

	var depotype = document.getElementById("deposit_type").value;
	var depoactno = document.getElementById("depo_actno").value;
	var depodate = document.getElementById("deposit_date").value;
	var depoper = document.getElementById("deposit_period").value;
	var depoamt = document.getElementById("deposit_amt").value;
	var intrate = document.getElementById("rate_of_int").value;
	var freq = document.getElementById("frequency").value;

	console.log(depotype + " " + depoactno + " " + depodate + " " + depoper
			+ " " + depoamt + " " + intrate + " " + freq);
	$
			.ajax({
				type : "GET",
				url : "./getDepositFlow?deposit_type=" + depotype
						+ "&depo_actno=" + depoactno + "&deposit_date="
						+ depodate + "&deposit_period=" + depoper
						+ "&deposit_amt=" + depoamt + "&rate_of_int="
						+ intrate + "&frequency=" + freq,
				success : function(data) {
					console.log(data);
					var trHTML = '';

					$
							.each(
									data,
									function(index, entity) {
										var flow_id = entity.flow_id;
										var flow_code = entity.flow_code;
										var flow_date = formatDate(entity.flow_date);
										var flow_amount = formatNumber(entity.flow_amt);
										var outstanding_balance = formatNumber(entity.clr_bal_amt);
										var titleText = "";
								        if (flow_code === "PI") {
								            titleText = "Principal Inflow";
								        } else if (flow_code === "II") {
								            titleText = "Interest Inflow";
								        }else if (flow_code === "IO") {
								            titleText = "Interest Outflow";
								        }else if (flow_code === "PO") {
								            titleText = "Principal Outflow";
								        }else{
								        	titleText = "Total Outflow";
								        }
								        
										trHTML += '<tr id="scheduleRow">'
												+ '<td ><input type="text" class="border-0" name="flowId" readonly value="' + flow_id + '" /></td>'
												+ '<td><input type="text" class="border-0" name="flowCode" readonly value="' + flow_code + '" title="' + titleText + '" /></td>'
												+ '<td><input type="text" class="border-0" name="flowDate" readonly value="' + flow_date + '" /></td>'
												+ '<td style="text-align: right;"><input type="text" class="border-0 text-right" name="flowAmount" readonly value="' + flow_amount + '" /></td>'
												+ '<td style="text-align: right;"><input type="text" class="border-0 text-right" name="outstandingBalance" readonly value="' + outstanding_balance + '" /></td>'
												+ '</tr>';
									});

					$('#depositflow').empty().append(trHTML);
					
					var lastFlowAmount = $('#depositflow tr:last').find('input[name="flowAmount"]').val();
					
document.getElementById("maturity_amt").value = lastFlowAmount.toString().replace(/,/g, '').split('.')[0];


					
				 // Calculate the total of the middle rows
		            var totalFlowAmount = 0;
		            var rows = $('#depositflow tr');
		            var rowCount = rows.length;

		            if (rowCount > 2) { // Ensure there are at least 3 rows
		                for (var i = 1; i < rowCount - 1; i++) { // Start from 1 to rowCount - 1 to skip first and last row
		                    var flowAmount = parseFloat(rows.eq(i).find('input[name="flowAmount"]').val().replace(/,/g, '')); // Assuming formatNumber adds commas
		                    totalFlowAmount += isNaN(flowAmount) ? 0 : flowAmount; // Sum the amounts
		                }
		            }
		            document.getElementById("int_amt").value = totalFlowAmount;
				},
				error : function(error) {
					console.error(error);
				}
			});
}




// Helper function to convert dataURL to Blob
function dataURLtoBlob(dataURL) {
    var byteString = atob(dataURL.split(',')[1]);
    var mimeString = dataURL.split(',')[0].split(':')[1].split(';')[0];
    var ab = new ArrayBuffer(byteString.length);
    var ia = new Uint8Array(ab);
    for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }
    return new Blob([ab], { type: mimeString });
}

// Helper function to convert dataURL to Blob
function dataURLtoBlob(dataURL) {
    var byteString = atob(dataURL.split(',')[1]);
    var mimeString = dataURL.split(',')[0].split(':')[1].split(';')[0];
    var ab = new ArrayBuffer(byteString.length);
    var ia = new Uint8Array(ab);
    for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }
    return new Blob([ab], { type: mimeString });
}

document.addEventListener('DOMContentLoaded', function () {
    const dateInput = document.getElementById('dob');
    const dobMessage = document.getElementById('dob-messageja');
    
    // Disable future dates
    const today = new Date().toISOString().split('T')[0];
    dateInput.setAttribute('max', today);

    dateInput.addEventListener('change', function () {
        const selectedDate = new Date(dateInput.value);
        const today = new Date();

        // Calculate age
        let age = today.getFullYear() - selectedDate.getFullYear();
        const monthDifference = today.getMonth() - selectedDate.getMonth();
        
        if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < selectedDate.getDate())) {
            age--;
        }

        // Clear previous messages
        dobMessage.textContent = '';

        // Validation rules
        if (age < 18) {
            dobMessage.textContent = 'Customer is a Minor, Not Eligible.';
        } else if (age > 60) {
            dobMessage.textContent = 'Senior Citizen';
        }
    });
});
document.addEventListener('DOMContentLoaded', function () {
    const dateInput = document.getElementById('date_bir');
    const dobMessage = document.getElementById('dob-message');
    
    // Disable future dates
    const today = new Date().toISOString().split('T')[0];
    dateInput.setAttribute('max', today);

    dateInput.addEventListener('change', function () {
        const selectedDate = new Date(dateInput.value);
        const today = new Date();

        // Calculate age
        let age = today.getFullYear() - selectedDate.getFullYear();
        const monthDifference = today.getMonth() - selectedDate.getMonth();
        
        if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < selectedDate.getDate())) {
            age--;
        }

        // Clear previous messages
        dobMessage.textContent = '';

        // Validation rules
        if (age < 18) {
            dobMessage.textContent = 'Customer is a Minor, Not Eligible.';
        } else if (age > 60) {
            dobMessage.textContent = 'Senior Citizen';
        }
    });
});
document.addEventListener('DOMContentLoaded', function () {
    const expDateInput = document.getElementById('expdate');
    const expiryMessage = document.getElementById('expiry-message');

    // Set the minimum date to today
    const today = new Date();
    const todayString = today.toISOString().split('T')[0]; // Format as YYYY-MM-DD
    expDateInput.setAttribute('min', todayString);

    expDateInput.addEventListener('change', function () {
        const selectedDate = new Date(expDateInput.value);
        const today = new Date();
        
        // Clear previous messages
        expiryMessage.textContent = '';

        // Check if the selected date is in the past
        if (selectedDate < today) {
            expiryMessage.textContent = 'Please select a future date.';
            expDateInput.value = ''; // Clear the input field
        }
    });
});

</script>
<script>
    // Get today's date in YYYY-MM-DD format
    const today = new Date().toISOString().split('T')[0];

    // Set the max date for 'issuedate' (no future dates)
    document.getElementById('issuedate').setAttribute('max', today);

    // Set the min date for 'la_expiry_date' (no past dates)
    document.getElementById('la_expiry_date').setAttribute('min', today);
    document.getElementById('doi').setAttribute('min', today);
    // Set the max date for additional issue dates
    document.getElementById('docIssDate0').setAttribute('max', today);
    document.getElementById('docIssDate1').setAttribute('max', today);

    // Set the min date for additional expiry dates
    document.getElementById('docExpDate0').setAttribute('min', today);
    document.getElementById('docExpDate1').setAttribute('min', today);
    
  //no past data
    function pastdatefn(input) {
        const today = new Date().toISOString().split('T')[0];
        input.setAttribute('min', today);
    }
    


 
</script>
<script>
//to hide future values
function Futuredatefn(dateInput) {
    const today = new Date().toISOString().split('T')[0];
    dateInput.setAttribute('max', today);
}

document.addEventListener('DOMContentLoaded', (event) => {
    const doiInput = document.getElementById('doi');
    const addvalfromInput = document.getElementById('addvalfrom');
    const docIssDate0 = document.getElementById('docIssDate0');
    const docIssDate1 = document.getElementById('docIssDate1');
    if (doiInput) {
        Futuredatefn(doiInput);
    }
    
    if (addvalfromInput) {
        Futuredatefn(addvalfromInput);
    }
    
    if (docIssDate0) {
        Futuredatefn(docIssDate0);
    }
    if (docIssDate1) {
        Futuredatefn(docIssDate1);
    }
});

        //to hide past values
        function pastdatefn(input) {
            const today = new Date().toISOString().split('T')[0];
            input.setAttribute('min', today);
        }
        
         document.addEventListener('DOMContentLoaded', (event) => {
            const dateInput = document.getElementById('docExpDate0');
            const dateInput1 = document.getElementById('docExpDate1');
           
            if (dateInput) {
            	pastdatefn(dateInput);
            }
            if (dateInput1) {
            	pastdatefn(dateInput1);
            }
       
        }); 
    </script>

<script>
    // Function for issue date (restricts future dates)
    function setIssueDateLimit() {
        const todayIssue = new Date().toISOString().split('T')[0];
        document.getElementById('issuedate').setAttribute('max', todayIssue);
    }

    // Function for expiry date (restricts past dates)
    function setExpiryDateLimit() {
        const todayExpiry = new Date().toISOString().split('T')[0];
        document.getElementById('la_expiry_date').setAttribute('min', todayExpiry);
    }

    // Call both functions on page load
    setIssueDateLimit();
    setExpiryDateLimit();
    
	function handleIn(input) {
		// Remove special characters using regex
		input.value = input.value.replace(/[^\w\s]/gi, '').toUpperCase();
	}
	function handleAddress(input) {
		input.value = input.value.replace(/[^a-zA-Z0-9\s,]/g, '').toUpperCase();
	}
</script>

<div class="modal fade " id="myModalpopup1" data-backdrop="false"
	data-keyboard="false" style="height: 100%">
	<div
		class="modal-dialog modal-fullscreen  modal-dialog-centered modal-dialog-scrollable">
		<div class="modal-content">
			<div class="menu-title-header">
				<div class="modal-title" id="exampleModalLabel"
					style="text-align: center; color: white;">BANK OF BARODA</div>
			</div>
			<div class="modal-body"
				style="text-align: center; background-color: #c6ccd2">
				<!-- Add content here if needed -->
			</div>
			<div class="modal-footer"
				style="background-color: #c6ccd2; border-top: none; text-align: center;">
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick="openCity(event, 'Paris');" style="margin-right: 45%;">Close</button>
			</div>
		</div>
	</div>
</div>
<!--  -->
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	tabindex="-1" role="dialog" aria-hidden="true" id="SmsPopUpMsg">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
		style="height: 20%">
		<div class="modal-content">
			<div class="modal-body" style="text-align: center">
				<div class="row formline" style="font-weight: 500; margin-top: 5px">
					<label class="col-form-label ml-3 p-2" style="font-size: 14px;">
						Primary Contact No </label>
					<!-- Adjusted label to align -->
					<div class="col-sm-6 mb-2">
						<!-- Increased input width for better alignment -->
						<input type="text" id="mobile_no_sms" style="font-weight: 500"
							class="form-control form-control-sm bg-white border border-dark"
							autocomplete="off" />
					</div>
				</div>
				<button type="button" class="btn btn-primary mt-2"
					data-dismiss="modal" onclick="goBackSms();">Send</button>
				<button type="button" class="btn btn-primary mt-2"
					data-dismiss="modal" onclick="goBackSms();">Close</button>
			</div>
		</div>
	</div>
</div>
<!-- for tab 1 ajax pop up -->
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	tabindex="-1" role="dialog" aria-hidden="true"
	style="padding-right: 850px" id="mypopup">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
		style="height: 20%">
		<div class="modal-content">
			<div class="modal-body" style="text-align: center">
				<p id="mypopup_alertmsg"></p>
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick="openCity(event, 'Paris');">Close</button>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" data-backdrop="false" data-keyboard="false"
	tabindex="-1" role="dialog" aria-hidden="true"
	style="padding-right: 9px" id="DOCPOPUP">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
		style="height: 20%">
		<div class="modal-content">
			<div class="modal-body" style="text-align: center">
				<p id="alertmsgdoc"></p>
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick="openCity(event, 'india');">Close</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	tabindex="-1" role="dialog" aria-hidden="true"
	style="padding-right: 850px" id="mypopup1">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
		style="height: 20%">
		<div class="modal-content">
			<div class="modal-body" style="text-align: center">
				<p id="mypopup1_alertmsg"></p>
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick=" openCity(event, 'Tokyo');">Close</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	id="mypopup2" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
		<div class="modal-content" style="width: 120%; height: 25%">
			<div class="card">
				<!-- Header with Alert Message -->
				<div class="modal-header">
					<h5 class="modal-title" id="popupAlert" style="font-size: 13px">Alert
						Message</h5>
					<!-- Alert message will appear here -->
				</div>

				<!-- Body with Response -->
				<div class="modal-body"
					style="text-align: center; display: flex; justify-content: center; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px">
					<h6 id="popupmsg"></h6>
					<!-- Response will be displayed here -->
				</div>

				<!-- Footer with Close Button -->
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal"
						onclick="openCity(event, 'india');">Close</button>
					<!-- Calls goBack function -->
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	id="mypopup3" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
		<div class="modal-content" style="width: 120%; height: 25%">
			<div class="card">
				<!-- Header with Alert Message -->
				<div class="modal-header">
					<h5 class="modal-title" id="popupAlert" style="font-size: 13px">Alert
						Message</h5>
					<!-- Alert message will appear here -->
				</div>

				<!-- Body with Response -->
				<div class="modal-body"
					style="text-align: center; display: flex; justify-content: center; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px">
					<h6 id="popupmsg"></h6>
					<!-- Response will be displayed here -->
				</div>

				<!-- Footer with Close Button -->
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal"
						onclick=" openCity(event, 'Tokyo');">Close</button>
					<!-- Calls goBack function -->
				</div>
			</div>
		</div>
	</div>
</div>

<div class="modal fade" data-backdrop="false" data-keyboard="false"
	tabindex="-1" role="dialog" aria-hidden="true"
	style="padding-left: 10%; padding-top: 20%" id="myrequired">
	<div
		class="modal-dialog modal-diaCap At Maturity ? log-centered modal-dialog-scrollable"
		style="height: 20%">
		<div class="modal-content">
			<div class="modal-body" style="text-align: center">
				<p id="alertmsg"></p>
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick="goBack()">Close</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	tabindex="-1" role="dialog" aria-hidden="true"
	style="padding-right: 850px" id="finalpopup">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
		style="height: 20%">
		<div class="modal-content">
			<div class="modal-body" style="text-align: center">
				<p id="finalpopup_alert"></p>
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick="  ">Close</button>
			</div>
		</div>
	</div>
</div>
<div class="modal" id="myaccModal" tabindex="-1" style="height: 170%"
	role="dialog" aria-labelledby="myModalLabel" data-backdrop="false"
	aria-hidden="true">
	<div class="modal-dialog custom-modal" role="document">
		<!-- Custom class added here -->
		<div class="modal-content" style="height: 150%">
			<div class="modal-header">
				<h5 class="modal-title" id="myModalLabel">DTI- DEBT TO INCOME
					RATIO</h5>
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body" style="overflow-y: auto;">
				<div class="row formline mt-2">
					<div class="col-sm-6 ml-2">
						<label for="borrower_name">Borrower Name</label>
					</div>
					<div class="col-sm-3">
						<input type="text" id="borrower_name"
							class="form-control form-control-sm bg-white border border-dark"
							maxlength="10" autocomplete="off" />
					</div>
				</div>

				<div class="row formline mt-2">
					<div class="col-sm-6 ml-2">
						<label for="constitution">Constitution</label>
					</div>
					<div class="col-sm-3">
						<input type="text" id="constitution"
							class="form-control form-control-sm bg-white border border-dark"
							maxlength="10" autocomplete="off" />
					</div>
				</div>

				<div class="row formline mt-2">
					<div class="col-sm-6 ml-2">
						<label for="">Monthly Income</label>
					</div>
					<div class="col-sm-3">
						<input type="text" id="month_income"
							class="form-control form-control-sm bg-white border border-dark"
							autocomplete="off" />
					</div>
				</div>

				<div class="row formline mt-2">
					<div class="col-sm-6 ml-2">
						<label for="monthly_repayment">Monthly Repayment</label>
					</div>
					<div class="col-sm-3">
						<input type="text" id="monthly_repayment"
							class="form-control form-control-sm bg-white border border-dark"
							autocomplete="off" />
					</div>
				</div>

				<div class="row formline mt-2">
					<div class="col-sm-3 ml-2">
						<label for="date_to_income" style="font-size: 14px"><strong>DEBT
								TO INCOME </strong></label>
					</div>
					<div class="col-sm-3">
						<button type="button" class="btn btn-primary"
							onclick="calculateDTI()">Calculate DTI</button>
					</div>
				</div>
				<div class="row formline mt-2">
					<div class="col-sm-6 ml-2">
						<label for="dti_ratio" style="font-size: 14px"> <strong>DTI
								Ratio = Monthly Repayment / Monthly Income x 100</strong>
						</label>
					</div>
					<div class="col-sm-3">
						<input type="text" id="dti_ratio" name="dti_ratio"
							class="form-control form-control-sm bg-white border border-dark"
							readonly />
					</div>
				</div>
				<div class="row formline mt-2">
					<div class="col-sm-6 ml-2">
						<label for="dti_status" style="font-size: 14px"><strong>Status:</strong></label>
					</div>
					<div class="col-sm-3">
						<span id="dti_status"
							class="form-control form-control-sm bg-white border border-dark"
							style="border: none; background: transparent;"></span>
					</div>
				</div>
				<div class="row formline mt-2">
					<div class="col-sm-3 ml-2">
						<label for="date_to_income" style="font-size: 14px"><strong>NOTE:
						</strong></label>
					</div>
					<div class="col-sm-3">
						<label for="date_to_income" style="font-size: 14px"><strong>35%
								Favorable </strong></label> <br> <label for="date_to_income"
							style="font-size: 14px"><strong>36% to 49%
								Adequate </strong></label>
					</div>
				</div>
			</div>


			<div class="modal-footer">
				<!-- <button type="button" class="btn btn-primary"
																	onclick="calculateDTI()">Calculate DTI</button> -->
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>

</div>
<div class="modal" id="mydepositmodal" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" data-backdrop="false" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable"
		role="document">
		<!-- Custom class added here -->
		<div class="modal-content" style="width: 200%; margin-left: -100px">
			<div class="modal-header">
				<h5 class="modal-title" id="myModalLabel">Deposit Flow Details</h5>
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body" style="overflow-y: auto;">
				<div class="table-responsive" id="demandtable">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th style="width: 60px !important;">FLOW ID</th>
								<!--<th style="text-align: center; width: 60px !important;">From
										Date</th>-->
								<th style="width: 60px !important;">FLOW CODE</th>
								<th style="width: 60px !important;">FLOW DATE</th>
								<th style="text-align: right; width: 60px !important;">
									FLOW AMOUNT</th>
								<th style="text-align: right; width: 60px !important;">
									OUTSTANDING BALANCE</th>


							</tr>
						</thead>
						<tbody id="depositflow">
					</table>
				</div>
			</div>



			<div class="modal-footer">
				<!-- <button type="button" class="btn btn-primary"
																	onclick="calculateDTI()">Calculate DTI</button> -->
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>

</div>
<div class="modal" id="myleasecal" tabindex="-1" role="dialog"
	aria-labelledby="myModalLabel" data-backdrop="false" aria-hidden="true">
	<div class="modal-dialog custom-modal" role="document">
		<!-- Custom class added here -->
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="myModalLabel">Demand Schedule
					Details</h5>
				<button type="button" class="close" data-dismiss="modal"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body" style="overflow-y: auto;">
				<div class="table-responsive" id="demandtable">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th style="text-align: left; width: 60px !important;">Srl.
									No.</th>
								<!--<th style="text-align: center; width: 60px !important;">From
										Date</th>-->
								<th style="text-align: left; width: 60px !important;">
									Installment Date</th>
								<th style="text-align: left; width: 60px !important;">
									Installment Description</th>
								<th style="text-align: right; width: 60px !important;">
									Installment Amt.</th>
								<th style="text-align: right; width: 60px !important;">
									Principal Amt.</th>
								<th style="text-align: right; width: 60px !important;">Interest
									Amt.</th>
								<th style="text-align: right; width: 60px !important;">Charges
									Amt.</th>
								<th style="text-align: right; width: 60px !important;">
									Principal Outstanding</th>

							</tr>
						</thead>
						<tbody id="repaymentDet">

							<!-- More rows can be added similarly -->
						</tbody>
					</table>
				</div>
			</div>


			<div class="modal-footer">
				<!-- <button type="button" class="btn btn-primary"
																	onclick="calculateDTI()">Calculate DTI</button> -->
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>

</div>
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	id="myrequired22" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
		<div class="modal-content" style="width: 120%; height: 25%">
			<div class="card">
				<!-- Header with Alert Message -->
				<div class="modal-header">
					<h5 class="modal-title" id="popupAlert" style="font-size: 13px">Alert
						Message</h5>
					<!-- Alert message will appear here -->
				</div>

				<!-- Body with Response -->
				<div class="modal-body"
					style="text-align: center; display: flex; justify-content: center; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px">
					<h6 id="popupmsg">Maximum of rows reached.Cannot add more
						rows.</h6>
					<!-- Response will be displayed here -->
				</div>

				<!-- Footer with Close Button -->
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal"
						onclick="goBack()">Close</button>
					<!-- Calls goBack function -->
				</div>
			</div>
		</div>
	</div>
</div>

<!--NEW SCRIPT -->
<script>
function nextPagecorp() {
    const numberElement = document.getElementById("listsizecount");
    let currentCount = parseInt(numberElement.innerText);
    const totalValue = parseInt(document.getElementById("nopfperson").innerText);

    if (currentCount < totalValue) {
        // Increment the count
        currentCount++;
        numberElement.innerText = currentCount;

        // Loop through all tabs and display the correct one based on the current count
        for (let i = 1; i <= totalValue; i++) {
            const tabElement = document.getElementById(`corporatetab${i}`);
            if (tabElement) {
                tabElement.style.display = (i === currentCount) ? "block" : "none";
            }
        }
    }
}

function previousPagecorp() {
    const numberElement = document.getElementById("listsizecount");
    let currentCount = parseInt(numberElement.innerText);  // Use 'let' instead of 'const'
    const totalValue = parseInt(document.getElementById("nopfperson").innerText);

    if (currentCount > 1) {
        // Decrement the count
        currentCount--;
        numberElement.innerText = currentCount;

        // Loop through all tabs and display the correct one based on the current count
        for (let i = 1; i <= totalValue; i++) {
            const tabElement = document.getElementById(`corporatetab${i}`);
            if (tabElement) {
                tabElement.style.display = (i === currentCount) ? "block" : "none";
            }
        }
    }
}

// Initialize the first tab on page load
function initializeTabs() {
    const totalValue = parseInt(document.getElementById("nopfperson").innerText);
    for (let i = 1; i <= totalValue; i++) {
        const tabElement = document.getElementById(`corporatetab${i}`);
        if (tabElement) {
            tabElement.style.display = (i === 1) ? "block" : "none";
        }
    }
}

// Call this function when the page loads to set up the initial state
initializeTabs();
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    	
        function updateFullName(index) {
            var firstName = document.getElementById('ca_first_name_' + index).value;
            var middleName = document.getElementById('ca_middle_name_' + index).value;
            var lastName = document.getElementById('ca_last_name_' + index).value;
            
            
            var fullName = firstName;

            if (middleName) {
                fullName += ' ' + middleName;
            }

            if (lastName) {
                fullName += ' ' + lastName;
            }

            document.getElementById('ca_full_name_' + index).value = fullName;
        }

        // Add event listeners to the input fields in a loop
        for (let i = 1; i <= 10; i++) {
            let firstNameField = document.getElementById('ca_first_name_' + i);
            let middleNameField = document.getElementById('ca_middle_name_' + i);
            let lastNameField = document.getElementById('ca_last_name_' + i);

            // Check if the fields exist before adding event listeners
            if (firstNameField && middleNameField && lastNameField) {
                firstNameField.addEventListener('input', function() {
                    updateFullName(i);
                });
                middleNameField.addEventListener('input', function() {
                    updateFullName(i);
                });
                lastNameField.addEventListener('input', function() {
                    updateFullName(i);
                });
            }
        }
    });
    
    </script>
<script>
    
    function Onbranchidmini_corp() {
    	var sol_id = document.getElementById("prisolidmini_corp").value; 
    	$.ajax({
    		type: 'GET',
    		url: "./getBranchDetails?sol_id=" + sol_id,
    		success: function (response) {
    			console.log(response);
    			var BranchId = response[0] != null ? response[0] : ""; 
    			$('#branchdescmini_corp').val(BranchId); 
    		}
    	}); 
    }
    </script>

<script type="text/javascript">
    function updateAccountNo() {
        const accountNo = document.getElementById("depo_actno").value;
        document.getElementById("displayAccountNo").textContent = "Account No : " + accountNo;
    }
    </script>
<script type="text/javascript">
	
	
	function addRecords() {

		event.preventDefault();

		var leaseData = {

			loanDetails: {
				customer_id: $(
					"input[name='cif_id']")
					.val(),
				customer_name: $("input[name='ca_preferred_name']").val(),
				branch_name: $("input[name='branch_desc']")
					.val(),
				branch_id: $(
					"input[name='ca_solid']").val(),
				loan_type: $("select[name='ca_schemetype']")
					.val(),
				loan_accountno: $("#la_loan_accountno")
					.val(),
				date_of_loan: changeDateFormat($("input[name='date_of_loan']")
					.val()),
				loan_sanctioned: $("input[name='loan_sanctioned']").val().replace(/,/g, ''),
				margin_limit: $("input[name='margin_limit']").val().replace(/,/g, ''),
				drawing_limit: $("input[name='drawing_limit']").val().replace(/,/g, ''),
				loan_currency: $("input[name='loan_currency']")
					.val(),
				disbursement: $("input[name='disbursement']").val().replace(/,/g, ''),
				loan_outstanding: $(
					"input[name='loan_outstanding']").val().replace(/,/g, ''),
				loan_period: $("input[name='loan_period']").val().replace(/,/g, ''),
				expiry_date: $("input[name='expiry_date']")
					.val(),
				repayment_terms: $("input[name='repayment_terms']")
					.val(),
				recovery_method: $(
					"select[name='recovery_method']").val(),
				effective_interest_rate: $(
					"input[name='effective_interest_rate']").val(),
                                gl_code: $("input[name='la_glcode']").val(),
				gl_desc: $("input[name='la_gldesc']").val(),
				glsh_code: $("input[name='la_glshcode']").val(),
				glsh_desc: $("input[name='la_glshdesc']").val(),
			},
			repaymentDetails: {
				customer_id: $(
					"input[name='cif_id']")
					.val(),
				branch_id: $("input[name='ca_solid']").val(),
				account_no: $("#la_loan_accountno")
				.val(),
				acid: $("#la_loan_accountno")
				.val(),
				inst_id: $("input[name='inst_id']")
					.val(),
				inst_start_dt: $("input[name='inst_start_dt']")
					.val(),
				inst_freq: $("select[name='inst_freq']").val(),
				inst_amount: $("input[name='inst_amount']").val().replace(/,/g, ''),
				no_of_inst: $("input[name='no_of_inst']").val(),
				inst_pct: $("input[name='inst_pct']").val().replace(/%/g, ''),
				interest_frequency: $("select[name='interest_frequency']")
					.val(),
					maturity_flg: $("input[name='maturity_flg']:checked").val() 
			}
		};

		console.log(leaseData);

		 $.ajax({
			type: "POST",
			contentType: "application/json",
			url: './addLeaseAccount',
			data: JSON.stringify(leaseData),
			success: function (responseText, statusText, xhr, $form) {
				
			},
			error: function (error) {
				console.error(error);
			}
		}); 
	}
	
	
	function addRecords1() {

		event.preventDefault();

		var leaseData = {

			loanDetails: {
				customer_id: $(
					"input[name='ca_cif_id_1']")
					.val(),
				customer_name: $("input[name='corporateName']").val(),
				branch_name: $("input[name='branch_desc']")
					.val(),
				branch_id: $(
					"input[name='ca_solid']").val(),
				loan_type: $("select[name='ca_schemetype']")
					.val(),
				loan_accountno: $("input[name='la_loan_accountno']")
					.val(),
				date_of_loan: changeDateFormat($("input[name='date_of_loan']")
					.val()),
				loan_sanctioned: $("input[name='loan_sanctioned']").val().replace(/,/g, ''),
				margin_limit: $("input[name='margin_limit']").val().replace(/,/g, ''),
				drawing_limit: $("input[name='drawing_limit']").val().replace(/,/g, ''),
				loan_currency: $("input[name='loan_currency']")
					.val(),
				disbursement: $("input[name='disbursement']").val().replace(/,/g, ''),
				loan_outstanding: $(
					"input[name='loan_outstanding']").val().replace(/,/g, ''),
				loan_period: $("input[name='loan_period']").val().replace(/,/g, ''),
				expiry_date: $("input[name='expiry_date']")
					.val(),
				repayment_terms: $("input[name='repayment_terms']")
					.val(),
				recovery_method: $(
					"select[name='recovery_method']").val(),
				effective_interest_rate: $(
					"input[name='effective_interest_rate']").val()
			},
			repaymentDetails: {
				customer_id: $(
					"input[name='ca_cif_id_1']")
					.val(),
				branch_id: $("input[name='ca_solid']").val(),
				account_no: $("input[name='la_loan_accountno']")
					.val(),
				acid: $("input[name='la_loan_accountno']")
					.val(),
				inst_id: $("input[name='inst_id']")
					.val(),
				inst_start_dt: $("input[name='inst_start_dt']")
					.val(),
				inst_freq: $("select[name='inst_freq']").val(),
				inst_amount: $("input[name='inst_amount']").val().replace(/,/g, ''),
				no_of_inst: $("input[name='no_of_inst']").val(),
				inst_pct: $("input[name='inst_pct']").val().replace(/%/g, ''),
				interest_frequency: $("select[name='interest_frequency']")
					.val(),
					maturity_flg: $("input[name='maturity_flg']:checked").val() 

			}
		};

		console.log(leaseData);

		 $.ajax({
			type: "POST",
			contentType: "application/json",
			url: './addLeaseAccount',
			data: JSON.stringify(leaseData),
			success: function (responseText, statusText, xhr, $form) {
				
			},
			error: function (error) {
				console.error(error);
			}
		}); 
	}
    </script>
<script>
    function calculateMonthlyIncome() {
        var annualIncome = document.getElementById('annual_income').value;
        console.log(annualIncome)
        if (annualIncome) {
        	var annualIncomeValue = parseFloat(annualIncome.replace(/,/g, ''));

            // Calculate the monthly income
            var monthlyIncome = (annualIncomeValue / 12).toFixed(2);
           
          console.log(monthlyIncome)
          document.getElementById('monthly_income').value = (formatNumberWithIndianSeparationForOninput1(monthlyIncome));
            
        } else {
            document.getElementById('monthly_income').value = ''; // Clear monthly income if annual income is empty
        }
    }
    function formatNumberWithIndianSeparationForOninput1(value) {
        if (!value && value !== 0) return ''; // Handle empty or null values

        // Ensure the value is a string before calling split()
        let valueStr = value.toString();

        // Split integer and decimal parts
        let [integerPart, decimalPart] = valueStr.split('.');

        // Format the integer part with Indian number system
        let lastThreeDigits = integerPart.slice(-3);
        let otherDigits = integerPart.slice(0, -3);

        if (otherDigits !== '') {
            lastThreeDigits = ',' + lastThreeDigits;
        }

        let formattedIntegerPart = otherDigits.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThreeDigits;

        // Return formatted value with decimal part if any
        return decimalPart !== undefined ? `${formattedIntegerPart}.${decimalPart}` : formattedIntegerPart;
    }

    document.addEventListener("DOMContentLoaded", function() {
    	calculateMonthlyIncome();
        document.getElementById('annual_income').addEventListener('input', calculateMonthlyIncome);

    });
    
</script>
<script>

    function updateDepositPeriod() {
		const frequency = document.getElementById('frequency').value;
		const depositPeriod = document.getElementById('depositperiod');

		if (frequency === 'Monthly') {
			depositPeriod.placeholder = 'months';
		} else if (frequency === 'Yearly') {
			depositPeriod.placeholder = 'years';
		}
	}
	document.addEventListener('DOMContentLoaded', () => {
	    // Set default placeholder as 'months' when the page loads.
	    document.getElementById('depositperiod').placeholder = 'months';
	});
	
	function updateMaturityDate() {
	    // Parse the date string into a Date object
	    const dateOfDeposit = new Date(document.getElementById('deposit_date').value);
	    console.log("Parsed date of deposit:", dateOfDeposit); // Check if this outputs a valid date
	    
	    // Parse the deposit period as an integer
	    const depositPeriod = parseInt(document.getElementById('deposit_period').value, 10);
	    const frequency = document.getElementById('frequency').value;

	    // Ensure date is valid
	    /* if (isNaN(dateOfDeposit.getTime())) {
	        alert('Invalid deposit date');
	        return;
	    } */

	    // Adjust the date based on the frequency
	    if (frequency === 'Monthly') {
	        dateOfDeposit.setMonth(dateOfDeposit.getMonth() + depositPeriod);
	    } else if (frequency === 'Yearly') {
	        dateOfDeposit.setFullYear(dateOfDeposit.getFullYear() + depositPeriod);
	    }
	    console.log("Updated date of deposit (after period adjustment):", dateOfDeposit);

	    // Check if the date is still valid after modification
	   /*  if (isNaN(dateOfDeposit.getTime())) {
	        alert('Invalid maturity date');
	        return;
	    } */

	    // Format the date to 'yyyy-MM-dd'
	    const year = dateOfDeposit.getFullYear();
	    const month = String(dateOfDeposit.getMonth() + 1).padStart(2, '0'); // Months are zero-based
	    const day = String(dateOfDeposit.getDate()).padStart(2, '0');
	    const formattedMaturityDate = `${year}-${month}-${day}`;

	    console.log("Formatted Maturity Date:", formattedMaturityDate);

	    // Display the formatted maturity date
	    //alert(formattedMaturityDate);
	    document.getElementById('maturity_date').value = formattedMaturityDate;
	}
	
	
	
	function onloaddigit() {
	    const input = document.getElementById('annual_income');
	    const value = input.value;

	    // Check if the input value does not already end with ".00"
	    if (!value.endsWith('.00')) {
	    	value = parseFloat(value).toFixed(2);

	    }
	  
	}
	
    </script>
<script>
        // Function to format and set value
        function formatAndSetValue(inputField) {
            // Remove any commas from the value (for number input types only)
            let rawValue = inputField.value.replace(/,/g, '');
            // Ensure the value has decimal precision
            let formattedValue = formatForNumbers(rawValue);

            // If it's a number input, avoid commas in the input field value (parse as number)
            if (inputField.type === 'number') {
                inputField.value = parseFloat(formattedValue); // Assign the raw number value without commas
            } else {
                inputField.value = formatNumberWithIndianSeparationForOninput(formattedValue); // Apply Indian separation for text input
            }
        }

        // Function to format number with Indian separation
        function formatNumberWithIndianSeparationForOninput(value) {
            if (!value) return '';

            let [integerPart, decimalPart] = value.split('.');

            let lastThreeDigits = integerPart.slice(-3);
            let otherDigits = integerPart.slice(0, -3);

            if (otherDigits !== '') {
                lastThreeDigits = ',' + lastThreeDigits;
            }

            let formattedIntegerPart = otherDigits.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThreeDigits;

            return decimalPart !== undefined ? `${formattedIntegerPart}.${decimalPart}` : formattedIntegerPart;
        }

        // Function to ensure the number has two decimal places
        function formatForNumbers(value) {
            let num = parseFloat(value);
            return isNaN(num) ? '0.00' : num.toFixed(2); // Ensure two decimal places for consistent formatting
        }
        
        
    
    </script>

<script>
  
     // Function to format date as yyyy-MM-dd
     function formatForInput1(date) {
         var d = new Date(date);
         var day = ('0' + d.getDate()).slice(-2);
         var month = ('0' + (d.getMonth() + 1)).slice(-2);
         var year = d.getFullYear();
         return `${year}-${month}-${day}`;
     }

     // Function to calculate and set the expiry date
     function expiry_date_fn() {
         var loanPeriodValue = document.getElementById('loan_period').value.trim();
         var instStartDtValue = document.getElementById('inst_start_dt').value;

         console.log('loanPeriodValue:', loanPeriodValue);
         console.log('instStartDtValue:', instStartDtValue);

         // Validate and parse loan_period
         if (!loanPeriodValue || isNaN(loanPeriodValue)) {
             console.error("Invalid loan period value:", loanPeriodValue);
             document.getElementById('expiry_date').value = 'Invalid input';
             return;
         }
         var loan_period = parseInt(loanPeriodValue);

         console.log('Parsed loan_period:', loan_period);

         // Validate inst_start_dt
         if (!instStartDtValue) {
             console.error("Invalid start date value:", instStartDtValue);
             document.getElementById('expiry_date').value = 'Invalid input';
             return;
         }

         var startDate = new Date(instStartDtValue);
         startDate.setMonth(startDate.getMonth() + loan_period);

         var formattedExpiryDate = formatForInput1(startDate);
         console.log('Formatted Expiry Date:', formattedExpiryDate);
         
         document.getElementById('expiry_date').value = formattedExpiryDate;
     }

     // Add event listeners to trigger expiry_date_fn when inputs change
     document.getElementById('loan_period').addEventListener('input', expiry_date_fn);
     document.getElementById('inst_start_dt').addEventListener('input', expiry_date_fn);
 </script>
<div class="modal fade" data-backdrop="false" data-keyboard="false"
	tabindex="-1" role="dialog" aria-hidden="true"
	style="padding-left: 10%; padding-top: 20%" id="smspopup">
	<div
		class="modal-dialog modal-diaCap At Maturity ? log-centered modal-dialog-scrollable"
		style="height: 20%">
		<div class="modal-content">

			<div class="modal-body" style="text-align: center">
				<p id="msgsmspopup"></p>
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick="goBack()">Close</button>
			</div>
		</div>
	</div>
</div>
</html>
