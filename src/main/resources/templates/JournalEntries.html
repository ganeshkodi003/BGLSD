<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<!--
	CREATED BY : PRAVEEN
	DATE : 18-09-24
-->

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css"
		th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.min.css}">
	<link rel="stylesheet" type="text/css" href="/webjars/font-awesome/5.9.0/css/all.min.css"
		th:href="@{/webjars/font-awesome/5.9.0/css/all.min.css}">
	<link rel="stylesheet" type="text/css" href="/webjars/jquery-ui/1.12.1/jquery-ui.min.css"
		th:href="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.css}">
	<link rel="stylesheet" type="text/css" href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css"
		th:href="@{/webjars/datatables/1.10.19/css/jquery.dataTables.min.css}">
	<link rel="shortcut icon" th:href="@{/favicon.ico}" type="image/x-icon">
	<link rel="icon" th:href="@{/favicon.ico}" type="image/x-icon">

	<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"
		th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.min.js}"></script>
	<script src="/webjars/popper.js/1.14.7/umd/popper.min.js"
		th:src="@{/webjars/popper.js/1.14.7/umd/popper.min.js}"></script>
	<script src="/webjars/jquery/3.4.1/jquery.min.js" th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
	<script src="/webjars/jquery-ui/1.12.1/jquery-ui.min.js"
		th:src="@{/webjars/jquery-ui/1.12.1/jquery-ui.min.js}"></script>

	<script src="/webjars/jquery-form/4.2.2/jquery.form.min.js"
		th:src="@{/webjars/jquery-form/4.2.2/jquery.form.min.js}"></script>

	<script src="/webjars/jquery-validation/1.19.0/jquery.validate.min.js"
		th:src="@{/webjars/jquery-validation/1.19.0/jquery.validate.min.js}"></script>

	<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"
		th:src="@{/webjars/datatables/1.10.19/js/jquery.dataTables.min.js}"></script>
	<script src="/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js"
		th:src="@{/webjars/datatables/1.10.19/js/dataTables.bootstrap4.min.js}"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>




	<style>
		body {
			font-size: 0.8rem;
		}

		.btn {
			line-height: 0.5rem;
		}

		.table-bordered td,
		.table-bordered th {
			font-size: smaller;
		}

		.container-manager {
			width: 83.5%;
			padding-right: 15px;
			padding-left: 15px;
			margin-right: auto;
			margin-left: 17.3%;
			margin-top: 100px;
			margin-top: 80px;
		}

		.table .thead-light th {
			color: #495057;
			background-color: #e9ecef;
			border-color: #dee2e6;
			width: 23px;
		}

		.tablinks {
			background-color: #f2f2f2;
			color: #000;
		}

		.tablinks.active {
			background-color: #007bff;
			color: #fff;
		}

		.tab {
			overflow: hidden;
			border: 1px solid #ccc;
			background-color: #f1f1f1;
		}

		.scroll {
			max-height: 60vh;
			overflow-y: scroll;
			overflow-x: hidden;
		}

		.tab button {
			background-color: inherit;
			float: left;
			border: none;
			outline: none;
			cursor: pointer;
			padding: 14px 16px;
			transition: 0.3s;
			font-size: 17px;
		}

		.tab button:hover {
			background-color: #ddd;
		}

		.tabcontent {
			display: none;
			padding: 6px 12px;
			border: 0px solid #ccc;
			border-top: none;
		}

		#myPieChart {
			width: 100px;
			height: 100px;
		}
	</style>
	<style>
		.modal {
			display: none;
			position: fixed;
			z-index: 1;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			overflow: auto;
			background-color: rgba(0, 0, 0, 0.4);
			margin-left: 350px;
		}

		.modal-content {
			background-color: #fefefe;
			margin: 15% auto;
			padding: 20px;
			border: 1px solid #888;
			width: 70%;
			height: 50%;
			margin-left: 200px;
		}

		.modal-pass {
			background-color: #fefefe;
			margin: 15% auto;
			padding: 20px;
			border: 1px solid #888;
			width: 40%;
			height: 25%;
			margin-left: 400PX;
			margin-right: auto;
			border-radius: 10px;
			box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);
			font-family: Arial, sans-serif;
		}

		.close {
			color: red;
			font-size: 28px;
			font-weight: bold;
		}

		.close:hover,
		.close:focus {
			color: black;
			text-decoration: none;
			cursor: pointer;
		}
	</style>
	<style>
		.password-info {
			visibility: hidden;
			width: 320px;
			background-color: #333;
			color: #fff;
			text-align: left;
			border-radius: 10px;
			padding: 10px;
			position: absolute;
			z-index: 1;
			top: calc(100% + 10px);
			left: 50%;
			transform: translateX(-50%);
			opacity: 0;
			transition: opacity 0.3s;
		}

		input:hover+.password-info {
			visibility: visible;
			opacity: 0.8;
		}

		.table-responsive {
			max-height: 650px;
			overflow-y: auto;
		}

		table {
			width: 100%;
			border-collapse: collapse;
		}

		thead {
			top: 0;
			background-color: #f9f9f9;
			z-index: 10;
		}

		th,
		td {
			padding: 12px;
			text-align: left;
			border-bottom: 1px solid #ddd;
		}
	</style>


	<script>
		function Home() {

			location.href = 'Dashboard';
		}

		function lists() {

			location.href = 'journalEntries?formmode=list1';
		}

		function enquiryuser(element) {
			var tranId = $(element).attr('data-tranid');
			var partnId = $(element).attr('data-partnid');
			var acctNum = $(element).attr('data-acctnum');

			var url = 'journalEntries?formmode=view&tran_id=' + tranId
				+ '&part_tran_id=' + partnId + '&acct_num=' + acctNum;

			location.href = url;
		}

		function deleteuser(element) {
			var tranId = $(element).attr('data-tranid');
			var partnId = $(element).attr('data-partnid');
			var acctNum = $(element).attr('data-acctnum');

			var url = './deletescreen?tran_id=' + tranId + '&part_tran_id='
				+ partnId + '&acct_num=' + acctNum;

			$.ajax({
				url: url,
				data: $("#upon").serialize(),
				type: 'POST',
				success: function (data) {
					console.log(data);
					$("#alertmsg").text(data);
					$('#alertsval1').modal("toggle");
				},
				error: function (xhr, status, error) {
					console.error("Error occurred: " + error);
				}
			});
		}

		function Back() {
			window.history.back();
		}

		$(function () {
			$(
				"#doj,#dob,#date_of_offer,#date_of_appointment_letter,#aed,#ped,#dsd,#ded")
				.datepicker({
					dateFormat: "dd-mm-yy",
					changeMonth: true,
					changeYear: true

				});
		});
	</script>
	<script>
		function add() {

			location.href = 'journalEntries?formmode=add';
		}

		function list() {

			location.href = './assosiateProfile?formmode=list';
		}

		function backs() {
			window.location.reload();
		}

		function refreshPage() {
			window.location.reload();
		}
		function refreshPagemulti() {
			location.href = 'journalEntries?formmode=list1';
		}

		function views() {
			var lkg = document.getElementById("usertablevalues");
			lkg.classList.remove('d-none'); // Remove the 'd-none' class to show the table 
		}

		function selectActions(element) {
			var tranId = $(element).attr('data-tranid');
			var partnId = $(element).attr('data-partnid');
			var acctNum = $(element).attr('data-acctnum');

			$.ajax({
				type: 'GET',
				url: './transactionaccountdetailsvalues',
				data: {
					tran_id: tranId,
					part_tran_id: partnId,
					acct_num: acctNum
				},
				success: function (data) {
					console.log(data);
					$("#tran_id").val(data.tran_id);
					$("#part_tran_id").val(data.part_tran_id);
					$("#acct_num").val(data.acct_num);
					$("#acct_name").val(data.acct_name);
					$("#tran_type").val(data.tran_type);
					$("#part_tran_type").val(data.part_tran_type);
					$("#acct_crncy").val(data.acct_crncy);
					$("#tran_amt").val(data.tran_amt);
					$("#tran_particular").val(data.tran_particular);
					$("#tran_remarks").val(data.tran_remarks);
					$("#gst_amount").val(data.gst_amount);
					$("#gst_type").val(data.gst_type);
					$("#tran_code").val(data.tran_code);
					$("#tran_rpt_code").val(data.tran_rpt_code);
					$("#tran_ref_no").val(data.tran_ref_no);
					$("#add_details").val(data.add_details);
					$("#partition_type").val(data.partition_type);
					$("#partition_det").val(data.partition_det);
					$("#instr_num").val(data.instr_num);
					$("#ref_crncy").val(data.ref_crncy);
					$("#ref_crncy_amt").val(data.ref_crncy_amt);
					$("#rate_code").val(data.rate_code);
					$("#rate").val(data.rate);
					$("#entry_user").val(data.entry_user);
					$("#post_user").val(data.post_user);
					$("#tran_status").val(data.tran_status);
					$("#del_flg").val(data.del_flg);
				},
				error: function () {
					$('#errorMessage').text('Error fetching data');
					$('#errorModal').modal('show');
				}
			});
		}

		function flowcodemodule(a) {
			event.preventDefault();

			var modal = document.getElementById("myModalval");
			modal.style.display = "block";

		}

		function flowcodemodule1(a) {
			event.preventDefault();

			var modal = document.getElementById("myModalvalues");
			modal.style.display = "block";

		}

		function closeModal1(a) {
			event.preventDefault();

			var modal = document.getElementById("myModalval");
			modal.style.display = "none";

		}

		function closeModal2(a) {
			event.preventDefault();

			var modal = document.getElementById("myModalvalues");
			modal.style.display = "none";

		}

		function setAccountDetailsvalues(element) {
			var acctNum = $(element).attr('data-acct_num');
			var acctname = $(element).attr('data-acct_name');
			//	alert(acctNum);
			$.ajax({
				type: 'GET',
				url: './transactionaccountdetailsvaluesed',
				data: {
					acid: acctNum
				},
				success: function (data) {
					console.log(data);
					var flowDate = new Date(data.flow_date);
					var formattedDate = ("0" + flowDate.getDate()).slice(-2) + "-"
						+ ("0" + (flowDate.getMonth() + 1)).slice(-2) + "-"
						+ flowDate.getFullYear();

					$("#tran_type").val("transfer");
					$("#part_tran_type1").val("debit");
					$("#acct_crncy").val(data.tdt_crncy_code);
					$("#flow_code1").val(data.flow_code);
					$("#gst_type").val(formattedDate);
				},
				error: function () {
					$('#errorMessage').text('Error fetching data');
					$('#errorModal').modal('show');
				}
			});
			closeModal1(this);
		}

		function setAccountDetailsvalues1(element) {
			var acctNum = $(element).attr('data-acct_num');
			var acctname = $(element).attr('data-acct_name');
			//	alert(acctNum);
			$.ajax({
				type: 'GET',
				url: './transactionaccountdetailsvaluesed1',
				data: {
					acid: acctNum
				},
				success: function (data) {
					console.log(data);
					var flowDate = new Date(data.date_of_loan);
					var formattedDate = ("0" + flowDate.getDate()).slice(-2) + "-"
						+ ("0" + (flowDate.getMonth() + 1)).slice(-2) + "-"
						+ flowDate.getFullYear();

					$("#tran_type").val("transfer");
					$("#part_tran_type").val("credit");
					$("#acct_crncy").val(data.loan_currency);
					$("#flow_code1").val(data.loan_type);
					$("#gst_type").val(formattedDate);
				},
				error: function () {
					$('#errorMessage').text('Error fetching data');
					$('#errorModal').modal('show');
				}
			});
			closeModal2(this);
		}
	</script>
	<script>
		/* modal functions */
		function openModal1(a) {
			event.preventDefault();

			var modal = document.getElementById("myModal");
			modal.style.display = "block";

		}

		function openTranRefModal() {
			event.preventDefault();

			var acctNo = $('#acct_num1').val();



			$.ajax({
				type: "GET",
				url: "getTranRefDetails",
				data: {
					accountNum: acctNo
				},
				success: function (response) {
					console.log(response);

					var trHTML = '';
					$
						.each(
							response,
							function (index, entity) {


								var org_tran_date = formatDateDDMMYY(entity.org_tran_date);
								var org_tran_id = entity.org_tran_id;
								var org_part_tran_id = entity.org_part_tran_id;
								var org_tran_ref_no = entity.org_tran_ref_no ? entity.org_tran_ref_no : "";
								var org_tran_amt = formatNumber(entity.org_tran_amt);
								var bal_outstd_amt = formatNumber(entity.bal_outstd_amt);
								var add_details = entity.org_add_details;


								trHTML += '<tr id="TarnRefRow">'

									+ '<td>' + org_tran_date + '</td>'
									+ '<td>' + org_tran_id + '</td>'
									+ '<td>' + org_part_tran_id + '</td>'
									+ '<td>' + org_tran_ref_no + '</td>'

									+ '<td class="text-right">' + org_tran_amt + '</td>'
									+ '<td class="text-right">' + bal_outstd_amt + '</td>'
									+ '<td class="text-center">'
									+ '<input type="radio" '
									+ 'data-tran-ref-no="' + org_tran_ref_no + '" '
									+ 'data-add-details="' + add_details + '" '
									+ 'onclick="setTranRef(this)">'
									+ '</td>'
									+ '</tr>';



							});
					$('#tranRefBody').empty().append(trHTML);
					var modal = document.getElementById("tranRefModal");
					modal.style.display = "block";



				},
				error: function (error) {
					showResponse("Error: " + error.responseText);
					reject(false); // Reject the Promise if there's an error
				}
			});
		}

		function setTranRef(a) {
			var tranRefNo = a.getAttribute('data-tran-ref-no');
			var addDetails = a.getAttribute('data-add-details');

			console.log('Tran Ref No:', tranRefNo);
			console.log('Additional Details:', addDetails);

			$('#tran_ref_no').val(tranRefNo);
			$('#add_details').val(addDetails);

			var modal = document.getElementById("tranRefModal");
			modal.style.display = "none";

			// Add logic to display or process these details
		}

		function closeModal(a) {
			event.preventDefault();

			var modal = document.getElementById("myModal");
			modal.style.display = "none";

		}

		function closeModalTran(a) {
			event.preventDefault();

			var modal = document.getElementById("tranRefModal");
			modal.style.display = "none";

		}

		function formatDateDDMMYY(dateString) {

			var date = new Date(dateString);


			var day = date.getDate();
			var month = date.getMonth() + 1;
			var year = date.getFullYear();


			if (day < 10) {
				day = '0' + day;
			}
			if (month < 10) {
				month = '0' + month;
			}

			return day + '-' + month + '-' + year;
		}

		function formatNumber(number) {
			return Number(number).toLocaleString('en-US', {
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});
		}

		function openModalmassentries(inputElement) {
			//alert("hihihi")
			event.preventDefault();
			window.selectedInputId = inputElement.id;
			var modal = document.getElementById("myModalmass");
			modal.style.display = "block";

		}

		function closeModalmass(a) {
			event.preventDefault();
			//	alert("hihi")

			var modal = document.getElementById("myModalmass");
			modal.style.display = "none";

		}

		function setAccountDetails(a) {

			var acct_num = a.getAttribute("data-acct_num");

			var acct_name = a.getAttribute("data-acct_name");
			var acct_crncy = a.getAttribute("data-acct_crncy");
			var ref_crncy = a.getAttribute("data-ref_crncy");

			$
				.ajax({
					type: 'GET',
					url: './transactionaccountdetails',
					data: {
						acct_num: acct_num
					},
					success: function (data) {
						console.log(data);

						var datas1 = data.gl_code;
						var datas2 = data.glsh_code;
						var datas3 = data.acct_crncy;
						var datas4 = data.acct_bal;
						var datas5 = data.add_det_flg;

						$("#tran_type").val("transfer");
						$("#part_tran_type").val("debit");

						var trHTML = '';

						trHTML += '<tr style="cursor: pointer;" data-acct_num="' + acct_num + '">'
							+ '<td style="text-align: left;">'
							+ datas1
							+ '</td>'
							+ '<td style="text-align:left;">'
							+ datas2
							+ '</td>'
							+ '<td style="text-align:left;">'
							+ datas3
							+ '</td>'
							+ '<td style="text-align:center;">'
							+ parseFloat(datas4).toFixed(2) // Ensures 2 decimal places for amount
							+ '</td>'
							+ '<td style="text-align:left;">'
							+ datas5 + '</td>' + '</tr>';

						$('#transactionaccountvaluesbody').empty().append(
							trHTML);
					},
					error: function () {
						$('#errorMessage').text('Error fetching data');
						$('#errorModal').modal('show');
					}
				});

			var lkg = document.getElementById("transactionaccountvalues");
			console.log(acct_num);
			lkg.classList.remove('d-none');

			$("#acct_num1").val(acct_num);
			$("#acct_name").val(acct_name);
			$("#acct_crncy").val(acct_crncy);
			$("#ref_crncy").val(ref_crncy);

			closeModal(this);
		}

		var rowCounter = 0;  // Initialize a row counter

		function setAccountDetailsmassentry(a) {
			// Fetching data attributes from the clicked account button
			var acct_num = a.getAttribute("data-acct_num");
			var acct_name = a.getAttribute("data-acct_name");

			// Use the stored input ID to get the input field
			var clickedId = window.selectedInputId;

			// Check if the clicked input field is filled
			if ($("#" + clickedId).val()) {
				// If filled, replace the values directly
				$("#" + clickedId).val(acct_num);
				$("#acct_name_mass" + clickedId.replace("acct_num_mass", "")).val(acct_name);
			} else {
				// If not filled, find the first empty row starting from the current rowCounter
				while ($("#acct_num_mass" + rowCounter).val()) {
					rowCounter++;  // Increment rowCounter until an empty row is found
				}

				// Now rowCounter points to the first empty row
				console.log("Account Number: " + acct_num);
				console.log("Row Counter: " + rowCounter);  // Track the incrementing rowCounter

				// Use the current rowCounter as the row identifier
				$("#acct_num_mass" + rowCounter).val(acct_num);
				$("#acct_name_mass" + rowCounter).val(acct_name);
			}

			// AJAX call to fetch account details (if needed)
			$.ajax({
				type: 'GET',
				url: './transactionaccountdetails',
				data: {acct_num: acct_num},
				success: function (data) {
					// Use rowCounter for dynamic row updates
					$("#acct_num_mass" + rowCounter).val(data.acct_num);
					$("#acct_name_mass" + rowCounter).val(data.acct_name);
				},
				error: function () {
					$('#errorMessage').text('Error fetching data');
					$('#errorModal').modal('show');
				}
			});

			// Close modal after the data is set
			closeModalmass(a);
		}


	</script>
	<script>
		$(document)
			.ready(
				function () {
					$('.filterable .btn-filter').click(function (event) {
						event.preventDefault(); // Prevent the default action of the button

						var $panel = $(this).parents('.filterable');
						var $filters = $panel.find('.filters input');
						var $tbody = $panel.find('.table tbody');

						if ($filters.prop('disabled') == true) {
							$filters.prop('disabled', false);
							$filters.first().focus();
						} else {
							$filters.val('').prop('disabled', true);
							$tbody.find('.no-result').remove();
							$tbody.find('tr').show();
						}
					});

					$('.filterable .filters input')
						.keyup(
							function (e) {
								/* Ignore tab key */
								var code = e.keyCode || e.which;
								if (code == '9')
									return;
								/* Useful DOM data and selectors */
								var $input = $(this), inputContent = $input
									.val().toLowerCase(), $panel = $input
										.parents('.filterable'), column = $panel
											.find('.filters th')
											.index($input.parents('th')), $table = $panel
												.find('.table'), $rows = $table
													.find('tbody tr');
								/* Dirtiest filter function ever ;)  */
								var $filteredRows = $rows
									.filter(function () {
										var value = $(this)
											.find('td').eq(
												column)
											.text()
											.toLowerCase();
										return value
											.indexOf(inputContent) === -1;
									});
								/* Clean previous no-result if exist */
								$table.find('tbody .no-result')
									.remove();
								/* Show all rows, hide filtered ones (never do that outside of a demo ! xD) */
								$rows.show();
								$filteredRows.hide();
								/* Prepend no-result row if all rows are filtered */
								if ($filteredRows.length === $rows.length) {
									$table
										.find('tbody')
										.prepend(
											$('<tr class="no-result text-center"><td colspan="'
												+ $table
													.find('.filters th').length
												+ '">No result found</td></tr>'));
								}
							});
				});

		document.getElementById("filterButton").addEventListener("click",
			function (event) {
				//alert("hi")
				event.preventDefault(); // Prevent the default action of the button
				// Your filtering logic goes here
			});

		// Function to filter modal content based on input values
		function filtermodal() {
			var inputClassification = document
				.getElementById("filterclassification").value.toUpperCase();
			var inputAccountName = document.getElementById("filteraccountname").value
				.toUpperCase();
			var inputCurrency = document.getElementById("filtercurrency").value
				.toUpperCase();
			// Add similar variables for other filter inputs

			var rows = document
				.querySelectorAll("#myModal .modal-content table tbody tr");
			rows.forEach(function (row) {
				var classification = row.cells[0].textContent.toUpperCase();
				var accountName = row.cells[1].textContent.toUpperCase();
				var currency = row.cells[3].textContent.toUpperCase();
				// Add similar variables for other cell values

				if (classification.indexOf(inputClassification) > -1
					&& accountName.indexOf(inputAccountName) > -1
					&& currency.indexOf(inputCurrency) > -1) {
					row.style.display = "";
				} else {
					row.style.display = "none";
				}
			});
		}

		// Add event listeners to filter input fields
		document.getElementById("filterclassification").addEventListener("input",
			filtermodal);
		document.getElementById("filteraccountname").addEventListener("input",
			filtermodal);
		document.getElementById("filtercurrency").addEventListener("input",
			filtermodal);
		// Add similar event listeners for other filter input fields



		function filtermodalmass() {
			var inputClassification = document
				.getElementById("filterclassification").value.toUpperCase();
			var inputAccountName = document.getElementById("filteraccountname").value
				.toUpperCase();
			var inputCurrency = document.getElementById("filtercurrency").value
				.toUpperCase();
			// Add similar variables for other filter inputs

			var rows = document
				.querySelectorAll("#myModalmass .modal-content table tbody tr");
			rows.forEach(function (row) {
				var classification = row.cells[0].textContent.toUpperCase();
				var accountName = row.cells[1].textContent.toUpperCase();
				var currency = row.cells[3].textContent.toUpperCase();
				// Add similar variables for other cell values

				if (classification.indexOf(inputClassification) > -1
					&& accountName.indexOf(inputAccountName) > -1
					&& currency.indexOf(inputCurrency) > -1) {
					row.style.display = "";
				} else {
					row.style.display = "none";
				}
			});
		}

		// Add event listeners to filter input fields
		document.getElementById("filterclassification").addEventListener("input",
			filtermodalmass);
		document.getElementById("filteraccountname").addEventListener("input",
			filtermodalmass);
		document.getElementById("filtercurrency").addEventListener("input",
			filtermodalmass);
		// Add similar event listeners for other filter input fields





	</script>

	<script>
		async function addTransactionRows(a) {
			event.preventDefault();

			if (valueCheck() && await pointingCheck() && await partitionCheck()) {

				console.log("inside transaction leg");
				var table = document.getElementById("transactionTable");
				table.classList.remove("d-none");

				var addbutton = document.getElementById("transactionAddButton");
				addbutton.classList.remove("d-none");

				var tbody = document.getElementById("transactionTableBody");

				var tranId = document.getElementById("tran_id").value || '';
				var partTranID = document.getElementById("part_tran_id").value
					|| '';
				var acct_num = document.getElementById("acct_num1").value || '';
				var acct_name = document.getElementById("acct_name").value || '';
				var tran_type = document.getElementById("tran_type").value || '';
				var part_tran_type = document.getElementById("part_tran_type1").value
					|| '';
				var acct_crncy = document.getElementById("acct_crncy").value || '';
				var tran_amt = document.getElementById("tran_amt").value || '';


				var tran_particular = document.getElementById("tran_particular").value
					|| '';
				var tran_remarks = document.getElementById("tran_remarks").value
					|| '';
				var tran_date = document.getElementById("tran_date").value || '';
				var value_date = document.getElementById("value_date").value || '';
				var tran_code = document.getElementById("tran_code").value || '';
				var tran_rpt_code = document.getElementById("tran_rpt_code").value
					|| '';
				var tran_ref_no = document.getElementById("tran_ref_no").value
					|| '';
				var add_details = document.getElementById("add_details").value
					|| '';
				var partition_type = document.getElementById("partition_type").value
					|| '';
				var partition_det = document.getElementById("partition_det").value
					|| '';
				var instr_num = document.getElementById("instr_num").value || '';
				var instr_date = document.getElementById("instr_date").value || '';
				var ref_crncy = document.getElementById("ref_crncy").value || '';
				var ref_crncy_amt = document.getElementById("ref_crncy_amt").value
					|| '';
				var rate_code = document.getElementById("rate_code").value || '';
				var rate = document.getElementById("rate").value || '';
				var entry_user = document.getElementById("entry_user").value || '';
				var post_user = document.getElementById("post_user").value || '';
				var entry_time = document.getElementById("entry_time").value || '';
				var post_time = document.getElementById("post_time").value || '';
				var flow_code = document.getElementById("flow_code1").value || '';
				var gst_type = document.getElementById("gst_type").value || '';
				var modify_user = document.getElementById("modify_user").value
					|| '';
				var modify_time = document.getElementById("modify_time").value
					|| '';
				var tran_status = document.getElementById("tran_status").value
					|| '';
				var del_flg = document.getElementById("del_flg").value || '';

				var existRowCount = document.getElementById("existRowValue").value
					|| '';

				var row = tbody.insertRow();
				var cell1 = row.insertCell();
				var cell2 = row.insertCell();
				var cell3 = row.insertCell();
				var cell4 = row.insertCell();
				var cell5 = row.insertCell();
				var cell6 = row.insertCell();
				var cell7 = row.insertCell();
				var cell8 = row.insertCell();
				var cell9 = row.insertCell();
				var cell10 = row.insertCell();
				var cell11 = row.insertCell();
				var cell12 = row.insertCell();
				var cell13 = row.insertCell();
				var cell14 = row.insertCell();
				var cell15 = row.insertCell();
				var cell16 = row.insertCell();
				var cell17 = row.insertCell();
				var cell18 = row.insertCell();
				var cell19 = row.insertCell();
				var cell20 = row.insertCell();
				var cell21 = row.insertCell();
				var cell22 = row.insertCell();
				var cell23 = row.insertCell();
				var cell24 = row.insertCell();
				var cell25 = row.insertCell();
				var cell26 = row.insertCell();
				var cell27 = row.insertCell();
				var cell28 = row.insertCell();
				var cell29 = row.insertCell();
				var cell30 = row.insertCell();
				var cell31 = row.insertCell();
				var cell32 = row.insertCell();
				var cell33 = row.insertCell();
				var cell34 = row.insertCell();
				var cell35 = row.insertCell();

				cell9.setAttribute('hidden', 'hidden');
				cell10.setAttribute('hidden', 'hidden');
				cell11.setAttribute('hidden', 'hidden');
				cell12.setAttribute('hidden', 'hidden');
				cell13.setAttribute('hidden', 'hidden');
				cell14.setAttribute('hidden', 'hidden');
				cell15.setAttribute('hidden', 'hidden');
				cell16.setAttribute('hidden', 'hidden');
				cell17.setAttribute('hidden', 'hidden');
				cell18.setAttribute('hidden', 'hidden');
				cell19.setAttribute('hidden', 'hidden');
				cell20.setAttribute('hidden', 'hidden');
				cell21.setAttribute('hidden', 'hidden');
				cell22.setAttribute('hidden', 'hidden');
				cell23.setAttribute('hidden', 'hidden');
				cell24.setAttribute('hidden', 'hidden');
				cell25.setAttribute('hidden', 'hidden');
				cell26.setAttribute('hidden', 'hidden');
				cell27.setAttribute('hidden', 'hidden');
				cell28.setAttribute('hidden', 'hidden');
				cell29.setAttribute('hidden', 'hidden');
				cell30.setAttribute('hidden', 'hidden');
				cell31.setAttribute('hidden', 'hidden');
				cell32.setAttribute('hidden', 'hidden');
				cell33.setAttribute('hidden', 'hidden');
				cell34.setAttribute('hidden', 'hidden');

				var mrowCount;

				if (existRowCount === null || existRowCount === '') {
					mrowCount = 2;
				} else {
					existRowCount = parseInt(existRowCount, 10);
					mrowCount = existRowCount + 1;
				}

				cell1.innerHTML = '<input type="text" name="tran_date" id="tran_date' + mrowCount + '" value="' + tran_date + '" style="border: none;" class="w-60" readonly>';
				cell2.innerHTML = '<input type="text" name="tran_id" id="tran_id' + mrowCount + '" value="' + tranId + '/' + partTranID + '" style="border: none;"  class="w-60" readonly>';
				cell3.innerHTML = '<input type="text" name="part_tran_type" id="part_tran_type1' + mrowCount + '" value="' + part_tran_type + '" style="border: none;"  class="w-60" readonly>';
				cell4.innerHTML = '<input type="text" name="acct_crncy" id="acct_crncy' + mrowCount + '" value="' + acct_crncy + '" style="border: none;"  class="w-60" readonly>';
				cell5.innerHTML = '<input type="text" name="tran_amt" id="tran_amt' + mrowCount + '" value="' + tran_amt + '" style="border: none;"  class="w-60" readonly>';
				cell6.innerHTML = '<input type="text" name="acct_num" id="acct_num' + mrowCount + '" value="' + acct_num + '" style="border: none;"  class="w-60" readonly>';
				cell7.innerHTML = '<input type="text" name="acct_name" id="acct_name' + mrowCount + '" value="' + acct_name + '" style="border: none;"  class="w-60" readonly>';
				cell8.innerHTML = '<input type="text" name="tran_status" id="tran_status' + mrowCount + '" value="' + tran_status + '" style="border: none;"  class="w-60" readonly>';

				cell9.innerHTML = '<input type="text" name="part_tran_id" id="part_tran_id' + mrowCount + '" value="' + partTranID + '">';
				cell10.innerHTML = '<input type="text" name="tran_type" id="tran_type' + mrowCount + '" value="' + tran_type + '">';
				cell11.innerHTML = '<input type="text" name="tran_particular" id="tran_particular' + mrowCount + '" value="' + tran_particular + '">';
				cell12.innerHTML = '<input type="text" name="tran_remarks" id="tran_remarks' + mrowCount + '" value="' + tran_remarks + '">';
				cell13.innerHTML = '<input type="text" name="value_date" id="value_date' + mrowCount + '" value="' + value_date + '">';
				cell14.innerHTML = '<input type="text" name="tran_ref_no" id="tran_ref_no' + mrowCount + '" value="' + tran_ref_no + '">';
				cell15.innerHTML = '<input type="text" name="add_details" id="add_details' + mrowCount + '" value="' + add_details + '">';
				cell16.innerHTML = '<input type="text" name="partition_type" id="partition_type' + mrowCount + '" value="' + partition_type + '">';
				cell17.innerHTML = '<input type="text" name="partition_det" id="partition_det' + mrowCount + '" value="' + partition_det + '">';
				cell18.innerHTML = '<input type="text" name="instr_num" id="instr_num' + mrowCount + '" value="' + instr_num + '">';
				cell19.innerHTML = '<input type="text" name="instr_date" id="instr_date' + mrowCount + '" value="' + instr_date + '">';
				cell20.innerHTML = '<input type="text" name="ref_crncy" id="ref_crncy' + mrowCount + '" value="' + ref_crncy + '">';
				cell21.innerHTML = '<input type="text" name="ref_crncy_amt" id="ref_crncy_amt' + mrowCount + '" value="' + ref_crncy_amt + '">';
				cell22.innerHTML = '<input type="text" name="rate_code" id="rate_code' + mrowCount + '" value="' + rate_code + '">';
				cell23.innerHTML = '<input type="text" name="rate" id="rate' + mrowCount + '" value="' + rate + '">';
				cell24.innerHTML = '<input type="text" name="entry_user" id="entry_user' + mrowCount + '" value="' + entry_user + '">';
				cell25.innerHTML = '<input type="text" name="post_user" id="post_user' + mrowCount + '" value="' + post_user + '">';
				cell26.innerHTML = '<input type="text" name="entry_time" id="entry_time' + mrowCount + '" value="' + entry_time + '">';
				cell27.innerHTML = '<input type="text" name="post_time" id="post_time' + mrowCount + '" value="' + post_time + '">';
				cell28.innerHTML = '<input type="text" name="del_flg" id="del_flg' + mrowCount + '" value="' + del_flg + '">';
				cell29.innerHTML = '<input type="text" name="tran_code" id="tran_code' + mrowCount + '" value="' + tran_code + '">';
				cell30.innerHTML = '<input type="text" name="tran_rpt_code" id="tran_rpt_code' + mrowCount + '" value="' + tran_rpt_code + '">';
				cell31.innerHTML = '<input type="text" name="modify_user" id="modify_user' + mrowCount + '" value="' + modify_user + '">';
				cell32.innerHTML = '<input type="text" name="modify_time" id="modify_time' + mrowCount + '" value="' + modify_time + '">';
				cell33.innerHTML = '<input type="text" name="flow_code" id="flow_code1' + mrowCount + '" value="' + flow_code + '">';
				cell34.innerHTML = '<input type="text" name="gst_type" id="gst_type' + mrowCount + '" value="' + gst_type + '">';

				cell35.innerHTML = '<i class="fa fa-minus-circle" aria-hidden="true" style=" font-size: 23px;color:red;" onclick="deleterow3(this)"></i>';

				partTranID = parseInt(partTranID, 10);
				partTranID = partTranID + 1;

				document.getElementById("tran_id").value = tranId;
				document.getElementById("part_tran_id").value = partTranID;
				document.getElementById("acct_num1").value = '';
				document.getElementById("acct_name").value = '';
				document.getElementById("tran_type").value = '';
				document.getElementById("part_tran_type1").value = '';
				document.getElementById("acct_crncy").value = '';
				document.getElementById("tran_amt").value = '';
				document.getElementById("tran_particular").value = '';
				document.getElementById("tran_remarks").value = '';
				document.getElementById("tran_date").value = tran_date;
				document.getElementById("value_date").value = value_date;
				document.getElementById("tran_ref_no").value = '';
				document.getElementById("add_details").value = '';
				document.getElementById("partition_type").value = '';
				document.getElementById("partition_det").value = '';
				document.getElementById("instr_num").value = '';
				document.getElementById("ref_crncy").value = '';
				document.getElementById("ref_crncy_amt").value = '';
				document.getElementById("rate_code").value = '';
				document.getElementById("rate").value = '';
				document.getElementById("entry_user").value = entry_user;
				document.getElementById("post_user").value = post_user;
				document.getElementById("entry_time").value = entry_time;
				document.getElementById("post_time").value = post_time;
				document.getElementById("tran_status").value = tran_status;
				document.getElementById("del_flg").value = '';
				document.getElementById("instr_date").value = '';
				document.getElementById("tran_code").value = '';
				document.getElementById("tran_rpt_code").value = '';
				document.getElementById("modify_user").value = '';
				document.getElementById("modify_time").value = '';
				document.getElementById("flow_code1").value = '';
				document.getElementById("gst_type").value = '';

				document.getElementById("existRowValue").value = mrowCount;

				var accountNumValues = document.getElementById("accountnumvalues");
				accountNumValues.classList.remove('d-none');
				updateTotals(part_tran_type, tran_amt);
			} else {
				event.preventDefault();
				console.log("outside transaction leg");
			}

		}
		// Global variables to store the totals


		// Function to update the totals based on transaction type and amount
		// Initialize global totals
		var totalCredit = 0; // Global variable for total credit
		var totalDebit = 0;  // Global variable for total debit

		function updateTotals(part_tran_type, tran_amt) {
			// Alert the transaction amount and type
			// alert("Transaction Type: " + part_tran_type + "\nTransaction Amount: " + tran_amt);

			var tran_amt1 = parseFloat(tran_amt) || 0;

			// Update the totals based on transaction type
			if (part_tran_type === 'Credit') {
				totalCredit += tran_amt1; // Add to the total credit
				//   alert("Total Credit Updated: " + totalCredit.toFixed(2));  // Alert for updated total credit
			} else if (part_tran_type === 'Debit') {
				totalDebit += tran_amt1; // Add to the total debit
				// alert("Total Debit Updated: " + totalDebit.toFixed(2));  // Alert for updated total debit
			}

			// Set the total values to the corresponding elements
			document.getElementById("totalCredit1").textContent = totalCredit.toFixed(2);
			document.getElementById("totalDebit1").textContent = totalDebit.toFixed(2);
		}

		function deleterow3(ele) {
			event.preventDefault();

			// Update part_tran_id
			var partTranID = document.getElementById("part_tran_id").value || '';
			partTranID = parseInt(partTranID, 10);
			partTranID = partTranID - 1;
			document.getElementById("part_tran_id").value = partTranID;

			var table = $('#transactionTableBody')[0];
			var rowCount = table.rows.length;

			if (rowCount <= 0) {
				alert("There is no row available to delete!");
				return;
			}

			var rowToDelete;

			if (ele) {
				// If a specific row button is clicked
				rowToDelete = $(ele).closest('tr').data('transactionTable'); // Retrieve data stored in the row
				$(ele).parent().parent().remove(); // Remove the row
			} else {
				// Delete the last row by default if no specific button is clicked
				rowToDelete = table.rows[rowCount - 1].data('transaction'); // Retrieve last row's transaction data
				table.deleteRow(rowCount - 1); // Remove the last row
			}

			// Initialize credit and debit values to recalculate them dynamically
			var newTotalCredit = 0;
			var newTotalDebit = 0;

			// Loop through all remaining rows to recalculate totals dynamically
			$("#transactionTableBody tr").each(function () {
				var tranType = $(this).find("input[name='part_tran_type']").val();
				var tranAmt = parseFloat($(this).find("input[name='tran_amt']").val().replace(/,/g, '')) || 0;

				if (tranType === 'Credit') {
					newTotalCredit += tranAmt;
				} else if (tranType === 'Debit') {
					newTotalDebit += tranAmt;
				}
			});

			// Update the global totalCredit and totalDebit based on new calculations
			totalCredit = newTotalCredit;
			totalDebit = newTotalDebit;

			// Update the displayed totals
			document.getElementById("totalCredit1").textContent = totalCredit.toFixed(2);
			document.getElementById("totalDebit1").textContent = totalDebit.toFixed(2);

			// Alert the updated totals
			// alert("Total Credit: " + totalCredit.toFixed(2) + "\nTotal Debit: " + totalDebit.toFixed(2));

			// Check if there are no more rows left and hide the table if empty
			if ($("#transactionTableBody tr").length == 0) {
				var tableElement = document.getElementById("transactionTable");
				tableElement.classList.add("d-none");

				var addbutton = document.getElementById("transactionAddButton");
				addbutton.classList.add("d-none");
			}
		}



		function deleterow3demo(ele) {

			event.preventDefault();
			var partTranID = document.getElementById("part_tran_id").value || '';
			partTranID = parseInt(partTranID, 10);
			partTranID = partTranID - 1;
			document.getElementById("part_tran_id").value = partTranID;

			var table = $('#transactionTableBody')[0];
			var rowCount = table.rows.length;

			console.log(rowCount);
			if (rowCount == 1) {
				var table = document.getElementById("transactionTable");
				table.classList.add("d-none");

				var addbutton = document.getElementById("transactionAddButton");
				addbutton.classList.add("d-none");
			}

			if (rowCount <= 0) {
				alert("There is no row available to delete!");
				return;
			}
			if (ele) {
				$(ele).parent().parent().remove();
			} else {
				table.deleteRow(rowCount - 1);
			}

		}
	</script>
	<script>
		/*Praveen*/
		function letterOnly(input) {

			var cleanValue = input.value.replace(/[^a-zA-Z\s]/g, '');
			input.value = cleanValue;
		}

		/*Praveen*/
		function amountInput(input) {

			var cleanValue = input.value.replace(/[^0-9.]/g, '');

			// Only allow one decimal point in the input
			if (cleanValue.indexOf('.') !== cleanValue.lastIndexOf('.')) {
				cleanValue = cleanValue.substring(0, cleanValue.lastIndexOf('.'));
			}

			input.value = cleanValue;
		}

		/*Praveen*/
		function valueCheck() {

			var acctNo = $('#acct_num1').val();
			var tranType = $('#tran_type').val();
			var parttranType = $('#part_tran_type').val();
			var tranamt = $('#tran_amt').val();
			var tranParticulars = $('#tran_particular').val();
			var tranRemarks = $('#tran_remarks').val();
			var value;

			if (acctNo === "") {
				$("#normalalertmsg").text("Fill Account NO");
				$('#normalalert').modal('show');
				value = false;
			} else if (tranType === "") {
				$("#normalalertmsg").text("Fill Tran Type");
				$('#normalalert').modal('show');
				value = false;
			} else if (parttranType === "") {
				$("#normalalertmsg").text("Fill Part Tran type");
				$('#normalalert').modal('show');
				value = false;
			} else if (tranamt === "") {
				$("#normalalertmsg").text("Fill Tran Amount");
				$('#normalalert').modal('show');
				value = false;
			} else if (tranParticulars === "") {
				$("#normalalertmsg").text("Fill Tran Particular");
				$('#normalalert').modal('show');
				value = false;
			} else if (tranRemarks === "") {
				$("#normalalertmsg").text("Fill Tran Remarks");
				$('#normalalert').modal('show');
				value = false;
			}

			else {
				value = true;
			}
			return value;
		}

		function partitionCheck() {
			return new Promise((resolve, reject) => {
				var acctNo = $('#acct_num1').val();

				$.ajax({
					type: "GET",
					url: "getPartitionFlag",
					data: {
						accountNum: acctNo
					},
					success: function (response) {
						console.log(response);
						var partitionFlag = response.trim();
						var value;

						if (partitionFlag === "Y") {
							var partitionType = $('#partition_type').val();
							var partitonDetails = $('#partition_det').val();

							if (partitionType === "") {
								$("#normalalertmsg").text("Fill Partition Type");
								$('#normalalert').modal('show');
								value = false;
							} else if (partitonDetails === "") {
								$("#normalalertmsg").text("Fill Partiton Details");
								$('#normalalert').modal('show');
								value = false;
							} else {
								value = true;
							}
						} else {
							value = true;
						}

						resolve(value); // Resolve the Promise with the value
					},
					error: function (error) {
						showResponse("Error: " + error.responseText);
						reject(false); // Reject the Promise if there's an error
					}
				});
			});
		}


		function pointingCheck() {
			return new Promise((resolve, reject) => {
				var acctNo = $('#acct_num1').val();

				$.ajax({
					type: "GET",
					url: "getPointingDetail",
					data: {
						accountNum: acctNo
					},
					success: function (response) {
						console.log(response);
						var pointingDetail = response.trim();
						var value;

						if (pointingDetail === "C" || pointingDetail === "D") {
							var tranRefNo = $('#tran_ref_no').val();
							var additionalDetail = $('#add_details').val();

							if (tranRefNo === "") {
								$("#normalalertmsg").text("Fill Tran Ref No");
								$('#normalalert').modal('show');
								value = false;
							} else if (additionalDetail === "") {
								$("#normalalertmsg").text("Fill Additional Detail");
								$('#normalalert').modal('show');
								value = false;
							} else {
								value = true;
							}
						} else {
							value = true;
						}

						resolve(value); // Resolve the Promise with the value
					},
					error: function (error) {
						showResponse("Error: " + error.responseText);
						reject(false); // Reject the Promise if there's an error
					}
				});
			});
		}

		function viewTranRefSearch(a) {
			var acctNo = $('#acct_num1').val();
			var partTranType = $('#part_tran_type1').val();

			console.log(partTranType);

			$.ajax({
				type: "GET",
				url: "getPointingDetail",
				data: {
					accountNum: acctNo
				},
				success: function (response) {
					console.log(response);
					var pointingDetail = response.trim();
					var pointingExpantion = pointingDetail === 'C'
						? "Credit"
						: pointingDetail === 'D'
							? "Debit"
							: "null";


					console.log(pointingExpantion);

					// Get the tranrefDiv element
					var tranrefDiv = $('#tranrefDiv');

					// Toggle the d-none class
					if (pointingExpantion === "null") {
						tranrefDiv.addClass('d-none');
					}
					else if (partTranType !== pointingExpantion) {
						tranrefDiv.removeClass('d-none');
					} else {
						tranrefDiv.addClass('d-none');
					}



				},
				error: function (error) {
					showResponse("Error: " + error.responseText);
					reject(false); // Reject the Promise if there's an error
				}
			});
		}


		function dateAsYYYYMMDD(dateString) {
			if (dateString != "") {
				var parts = dateString.split("-");
				var day = parts[0];
				var month = parts[1];
				var year = parts[2];
				return year + "-" + month + "-" + day;
			} else {
				return "";
			}
		}

		function checkValue(inputValue) {
			return inputValue ? inputValue : "";
		}
	</script>
	<script>
		function transactionSubmit(a) {
			var transactionDetails = [];
			var totalCredit = 0;
			var totalDebit = 0;

			// Loop through each row in the transaction table
			$("#transactionTable tbody tr").each(function () {
				var row = {};

				// Process other fields and push row data to transactionDetails
				var tran_dateDemo = $(this).find("input[name='tran_date']").val();
				//  alert("Transaction Date: " + tran_dateDemo);
				var value_dateDemo = $(this).find("input[name='value_date']").val();
				var instr_dateDemo = $(this).find("input[name='instr_date']").val();
				var entry_timeDemo = $(this).find("input[name='entry_time']").val();
				var post_timeDemo = $(this).find("input[name='post_time']").val();
				var modify_timeDemo = $(this).find("input[name='modify_time']").val();
				var flow_datedemo = $(this).find("input[name='flow_date']").val();

				row.tran_date = formatDate(tran_dateDemo);
				//   alert("Transaction Date: " + row.tran_date);

				row.value_date = formatDate(value_dateDemo);
				row.instr_date = formatDate(instr_dateDemo);
				row.entry_time = formatDate(entry_timeDemo);
				row.post_time = formatDate(post_timeDemo);
				row.modify_time = formatDate(modify_timeDemo);
				row.flow_date = formatDate(entry_timeDemo);
				row.tran_id = checkValue($(this).find("input[name='tran_id']").val()).split("/")[0];
				row.part_tran_id = checkValue($(this).find("input[name='part_tran_id']").val());
				row.acct_num = checkValue($(this).find("input[name='acct_num']").val()) || 0;
				row.acct_name = checkValue($(this).find("input[name='acct_name']").val());
				row.tran_type = checkValue($(this).find("input[name='tran_type']").val());
				row.part_tran_type = checkValue($(this).find("input[name='part_tran_type']").val());
				row.acct_crncy = checkValue($(this).find("input[name='acct_crncy']").val());
				row.tran_amt = parseFloat(checkValue($(this).find("input[name='tran_amt']").val().replace(/,/g, ''))) || 0;

				row.tran_particular = checkValue($(this).find("input[name='tran_particular']").val());
				row.tran_remarks = checkValue($(this).find("input[name='tran_remarks']").val());
				row.tran_ref_no = checkValue($(this).find("input[name='tran_ref_no']").val());
				row.add_details = checkValue($(this).find("input[name='add_details']").val());
				row.partition_type = checkValue($(this).find("input[name='partition_type']").val());
				row.partition_det = checkValue($(this).find("input[name='partition_det']").val());
				row.instr_num = checkValue($(this).find("input[name='instr_num']").val());
				row.ref_crncy = checkValue($(this).find("input[name='ref_crncy']").val());
				row.ref_crncy_amt = checkValue($(this).find("input[name='ref_crncy_amt']").val());
				row.rate_code = checkValue($(this).find("input[name='rate_code']").val());
				row.rate = checkValue($(this).find("input[name='rate']").val());
				row.entry_user = checkValue($(this).find("input[name='entry_user']").val());
				row.post_user = checkValue($(this).find("input[name='post_user']").val());
				row.tran_status = checkValue($(this).find("input[name='tran_status']").val());
				row.del_flg = checkValue($(this).find("input[name='del_flg']").val());
				row.tran_code = checkValue($(this).find("input[name='tran_code']").val());
				row.tran_rpt_code = checkValue($(this).find("input[name='tran_rpt_code']").val());
				row.modify_user = checkValue($(this).find("input[name='modify_user']").val());
				row.flow_code = checkValue($(this).find("input[name='flow_code']").val());
				//   row.flow_date = checkValue($(this).find("input[name='flow_date']").val());

				// Check part_tran_type and sum acct_num to totalCredit or totalDebit
				if (row.part_tran_type == 'Credit') {
					totalCredit += row.tran_amt;
				} else if (row.part_tran_type == 'Debit') {
					totalDebit += row.tran_amt;
				}

				transactionDetails.push(row);
			});

			// Check if totalCredit and totalDebit are equal
			if (totalCredit.toFixed(2) === totalDebit.toFixed(2)) {
				// Submit the transaction details via AJAX
				$.ajax({
					type: "POST",
					contentType: "application/json",
					url: './addtransactiondata',
					data: JSON.stringify(transactionDetails),
					success: function (responseText) {
						console.log(responseText);
						$("#alertmsg1").text(responseText);
						$('#alertsval').modal("toggle");
						clearFields(); // Clear fields after success
					},
					error: function (xhr, status, error) {
						console.error("Error: " + error);
						console.error("Response Text: " + xhr.responseText);
					}
				});
			} else {
				// Show alert if Credit and Debit are not equal
				alert("Total Credit and Debit do not match. Please check the transaction details.");
			}
		}


		function formatDatemodify(dateString) {
			// Check if the date string is in the expected format dd-MM-yyyy
			var dateParts = dateString.split('-'); // Split by '-'
			if (dateParts.length === 3) {
				var day = dateParts[0]; // dd
				var month = dateParts[1]; // MM
				var year = dateParts[2]; // yyyy

				// Ensure the parts are valid numbers and format them as yyyy-MM-dd
				if (day.length === 2 && month.length === 2 && year.length === 4) {
					return year + '-' + month + '-' + day;
				}
			}
			return dateString; // Return the original date if it doesn't match the format
		}

		function Submitdatasmodify(a) {
			var transactionDetails = [];
			var formSelector = '#modifyForm'; // Use your actual form selector

			// Loop through each set of transaction rows
			$(formSelector).find('.transaction-row').each(function () {
				var row = {};
				var tran_dateDemo = $(this).find("input[name='tran_date']").val();
				//  alert("Transaction Date: " + tran_dateDemo);
				var value_dateDemo = $(this).find("input[name='value_date']").val();
				var instr_dateDemo = $(this).find("input[name='instr_date']").val();
				var entry_timeDemo = $(this).find("input[name='entry_time']").val();
				var post_timeDemo = $(this).find("input[name='post_time']").val();
				var modify_timeDemo = $(this).find("input[name='modify_time']").val();
				var flow_datedemo = $(this).find("input[name='flow_date']").val();
				// Collecting and processing the form data for each transaction row
				row.tran_date = formatDatemodify(tran_dateDemo);
				//    alert("Transaction Date: " + row.tran_date);

				row.value_date = formatDatemodify(value_dateDemo);
				row.instr_date = formatDatemodify(instr_dateDemo);
				row.entry_time = formatDatemodify(entry_timeDemo);
				row.post_time = formatDatemodify(post_timeDemo);
				row.modify_time = formatDatemodify(modify_timeDemo);
				row.flow_date = formatDatemodify(flow_datedemo);

				// Collecting additional fields
				row.tran_id = checkValue($(this).find("input[name='tran_id']").val()).split("/")[0];
				row.part_tran_id = checkValue($(this).find("input[name='part_tran_id']").val());
				row.acct_num = checkValue($(this).find("input[name='acct_num']").val());
				row.acct_name = checkValue($(this).find("input[name='acct_name']").val());
				row.tran_type = checkValue($(this).find("input[name='tran_type']").val());
				row.part_tran_type = checkValue($(this).find("input[name='part_tran_type']").val());
				row.acct_crncy = checkValue($(this).find("input[name='acct_crncy']").val());
				row.tran_amt = checkValue($(this).find("input[name='tran_amt']").val().replace(/,/g, ''));
				row.tran_particular = checkValue($(this).find("input[name='tran_particular']").val());
				row.tran_remarks = checkValue($(this).find("input[name='tran_remarks']").val());
				row.tran_ref_no = checkValue($(this).find("input[name='tran_ref_no']").val());
				row.add_details = checkValue($(this).find("input[name='add_details']").val());
				row.partition_type = checkValue($(this).find("input[name='partition_type']").val());
				row.partition_det = checkValue($(this).find("input[name='partition_det']").val());
				row.instr_num = checkValue($(this).find("input[name='instr_num']").val());
				row.ref_crncy = checkValue($(this).find("input[name='ref_crncy']").val());
				row.ref_crncy_amt = checkValue($(this).find("input[name='ref_crncy_amt']").val());
				row.rate_code = checkValue($(this).find("input[name='rate_code']").val());
				row.rate = checkValue($(this).find("input[name='rate']").val());
				row.entry_user = checkValue($(this).find("input[name='entry_user']").val());
				row.post_user = checkValue($(this).find("input[name='post_user']").val());
				row.tran_status = checkValue($(this).find("input[name='tran_status']").val());
				row.del_flg = checkValue($(this).find("input[name='del_flg']").val());
				row.tran_code = checkValue($(this).find("input[name='tran_code']").val());
				row.tran_rpt_code = checkValue($(this).find("input[name='tran_rpt_code']").val());
				row.modify_user = checkValue($(this).find("input[name='modify_user']").val());
				row.flow_code = checkValue($(this).find("input[name='flow_code']").val());
				//   row.flow_date = checkValue($(this).find("input[name='flow_date']").val());

				// Push the row to transactionDetails array
				transactionDetails.push(row);
			});

			console.log(transactionDetails); // Log the collected data

			// Build the URL with the first transaction row's IDs as query parameters
			if (transactionDetails.length > 0) {
				var firstRow = transactionDetails[0]; // Use the first row to get tran_id and part_tran_id
				var url = './addtransactiondatamodiy?tran_id=' + encodeURIComponent(firstRow.tran_id) +
					'&part_tran_id=' + encodeURIComponent(firstRow.part_tran_id);
			} else {
				var url = './addtransactiondatamodiy'; // Fallback URL if no transaction details
			}

			// AJAX request to submit the data
			$.ajax({
				type: "POST",
				contentType: "application/json",
				url: url, // Use the constructed URL with query parameters
				data: JSON.stringify(transactionDetails),
				success: function (responseText) {
					console.log(responseText);
					$("#alertmsg1").text(responseText); // Display success message
					$('#alertsval').modal("show"); // Show modal alert
				},
				error: function (xhr, status, error) {
					console.error("Error: " + error); // Log any errors
					console.error("Response Text: " + xhr.responseText);
				}
			});
		}

		function clearFields() {
			document.getElementById("acct_num1").value = '';
			document.getElementById("tran_amt").value = '';
			document.getElementById("flow_code1").value = '';
			document.getElementById("gst_type").value = '';
		}

		// Function to format date to dd-MM-yyyy
		function formatDate(dateString) {
			var dateParts = dateString.split('/');
			if (dateParts.length === 3) {
				return dateParts[2] + '-' + dateParts[1] + '-' + dateParts[0]; // Convert to dd-MM-yyyy
			}
			return dateString; // Return original if format is incorrect
		}
		function formatDate1(dateString) {
			// Ensure the date string is in the format dd/MM/yyyy
			var dateParts = dateString.split('/');
			if (dateParts.length === 3) {
				// Keep the original format without adding any dashes
				return dateParts.join('/'); // Returns as dd/MM/yyyy
			}
			return dateString; // Return original if format is incorrect
		}
	</script>
	<script>
		//Define the toggleValue function
		function toggleValue() {
			var dropdown = document.getElementById('actionDropdown');
			console.log("Selected Value: ", dropdown.value); // Log the selected value

			var tranIdField = document.getElementById('tran_id');
			var partTranIdField = document.getElementById('part_tran_id');
			var tranDateField = document.getElementById('tran_date');
			var valueDateField = document.getElementById('value_date');
			var entryuserField = document.getElementById('entry_user');
			var entrytimeField = document.getElementById('entry_time');
			var tran_statusField = document.getElementById('tran_status');
			var flowdate = document.getElementById('gst_type');

			var addTransactionList = document.getElementById('addtransactionlist');
			var mainTransactionHeader = document
				.getElementById('mainTransactionHeader'); // Main header element

			// Get current date in desired format (dd-MM-yyyy)
			var currentDate = new Date();
			var options = {
				day: '2-digit',
				month: '2-digit',
				year: 'numeric'
			};
			var formattedDate = currentDate.toLocaleDateString('en-GB', options);

			if (dropdown.value === 'add') {
				console.log("Add option selected");

				var selectedOption = dropdown.options[dropdown.selectedIndex];
				var tranId = selectedOption.getAttribute('data-tranid');
				var partId = selectedOption.getAttribute('data-partnid');
				var entryuser = selectedOption.getAttribute('data-entryuser');
				var transtatus = selectedOption.getAttribute('data-transtatus');

				tranIdField.value = tranId;
				partTranIdField.value = partId;
				entryuserField.value = entryuser;
				tran_statusField.value = transtatus;
				tranDateField.value = formattedDate;
				valueDateField.value = formattedDate;
				entrytimeField.value = formattedDate;
				//flowdate.value=formattedDate;
				var lkg = document.getElementById("addscreenfunctions");
				lkg.classList.remove('d-none');
				// Show the add transaction list and hide the main header
				addTransactionList.classList.remove('d-none');
				mainTransactionHeader.classList.add('d-none'); // Hide the main header

			} else if (dropdown.value === 'list') {
				location.href = 'journalEntries?formmode=list1';
			} else if (dropdown.value === 'modify') {
				location.href = 'journalEntries?formmode=modify';
			} else if (dropdown.value === 'upload') {
				$('#uploadfiles').modal("toggle");
			} else if (dropdown.value === 'massEntries') {
				var selectedOption = dropdown.options[dropdown.selectedIndex];
				var tranId = selectedOption.getAttribute('data-tranid');
				var partId = selectedOption.getAttribute('data-partnid');

				location.href = 'journalEntries?formmode=view2&tran_id=' + tranId
					+ '&part_tran_id=' + partId;
			} else {
				mainTransactionHeader.classList.remove('d-none'); // Show the main header for non-add options
				addTransactionList.classList.add('d-none'); // Hide the add transaction list
			}
		}

		function performAction(radio) {
			var tranId = radio.getAttribute('data-tranid');
			var partId = radio.getAttribute('data-partnid');
			var acctNum = radio.getAttribute('data-acctnum');

			console.log("Transaction ID: " + tranId + ", Part ID: " + partId
				+ ", Account Number: " + acctNum);

			// Construct the URL with query parameters
			var url = 'journalEntries?formmode=modify1&tran_id='
				+ encodeURIComponent(tranId) + '&part_tran_id='
				+ encodeURIComponent(partId) + '&acct_num='
				+ encodeURIComponent(acctNum);

			// Navigate to the constructed URL
			location.href = url;
		}
	</script>
	<script type="text/javascript">
		function submitdatas() {
			//	alert("hi");
			var form = $('#reportform')[0];
			var data = new FormData(form);

			$.ajax({
				type: "POST",
				url: "uploadxml",
				data: data,
				processData: false,
				contentType: false,
				success: function (response) {
					console.log(response);
					showResponse(response);
					$('#uploadfiles').modal('hide');
				},
				error: function (error) {
					showResponse("Error: " + error.responseText);
				}
			});
		}
		function showResponse(responseText) {
			$("#alertmsg").text(responseText);
			$('#normalalertvalues').modal("toggle");
		}

		function updateFileName() {
			var fileInput = document.getElementById('fileInput');
			var report_nameInput = document.getElementById('report_name');

			if (fileInput.files.length > 0) {
				var report_name = fileInput.files[0].name;
				report_nameInput.value = report_name;
			} else {
				report_nameInput.value = '';
			}
		}
	</script>

	<script>
		function getPartTranRecords(button) {
			event.preventDefault();

			const currentPartTran = parseInt(document.getElementById('currentPartTran').innerText);
			const maxPartTran = parseInt(document.getElementById('maxPartTran').innerText);

			var tranId = $("#tran_id").val();

			let partTranId = currentPartTran;

			if (button.id === 'previous-btn') {

				if (currentPartTran > 1) {
					/*previous record*/
					partTranId = currentPartTran - 1;
					document.getElementById('currentPartTran').innerText = partTranId;

					$("#tran_id").val("");
					$("#part_tran_id").val("");
					$("#acct_num1").val("");
					$("#acct_name").val("");
					$("#tran_type").val("");
					$("#part_tran_type").val("");
					$("#acct_crncy").val("");
					$("#tran_amt").val("");
					$("#tran_particular").val("");
					$("#tran_remarks").val("");
					$("#gst_amount").val("");
					$("#gst_type").val("");
					$("#tran_code").val("");
					$("#tran_rpt_code").val("");
					$("#tran_ref_no").val("");
					$("#add_details").val("");
					$("#partition_type").val("");
					$("#partition_det").val("");
					$("#instr_num").val("");
					$("#ref_crncy").val("");
					$("#ref_crncy_amt").val("");
					$("#rate_code").val("");
					$("#rate").val("");
					$("#entry_user").val("");
					$("#post_user").val("");
					$("#tran_status").val("");
					$("#del_flg").val("");
					$("#value_date").val("");
					$("#tran_date").val("");
					$("#entry_time").val("");
					$("#post_time").val("");
					$("#srl_no").val("");



					$.ajax({
						type: 'GET',
						url: './transactionValues',
						data: {
							tran_id: tranId,
							part_tran_id: partTranId

						},
						success: function (data) {
							console.log(data);

							$("#tran_id").val(data.tran_id != null ? data.tran_id : "");
							$("#part_tran_id").val(data.part_tran_id != null ? data.part_tran_id : "");
							$("#acct_num1").val(data.acct_num != null ? data.acct_num : "");
							$("#acct_name").val(data.acct_name != null ? data.acct_name : "");
							$("#tran_type").val(data.tran_type != null ? data.tran_type : "");
							$("#part_tran_type").val(data.part_tran_type != null ? data.part_tran_type : "");
							$("#acct_crncy").val(data.acct_crncy != null ? data.acct_crncy : "");
							$("#tran_amt").val(data.tran_amt != null ? formatNumberWithCommas(data.tran_amt) : "");
							$("#tran_particular").val(data.tran_particular != null ? data.tran_particular : "");
							$("#tran_remarks").val(data.tran_remarks != null ? data.tran_remarks : "");
							$("#gst_amount").val(data.flow_code != null ? data.flow_code : "");
							$("#gst_type").val(data.flow_date != null ? formatDateToDD(data.flow_date) : "");
							$("#tran_code").val(data.tran_code != null ? data.tran_code : "");
							$("#tran_rpt_code").val(data.tran_rpt_code != null ? data.tran_rpt_code : "");
							$("#tran_ref_no").val(data.tran_ref_no != null ? data.tran_ref_no : "");
							$("#add_details").val(data.add_details != null ? data.add_details : "");
							$("#partition_type").val(data.partition_type != null ? data.partition_type : "");
							$("#partition_det").val(data.partition_det != null ? data.partition_det : "");
							$("#instr_num").val(data.instr_num != null ? data.instr_num : "");
							$("#ref_crncy").val(data.ref_crncy != null ? data.ref_crncy : "");
							$("#ref_crncy_amt").val(data.ref_crncy_amt != null ? data.ref_crncy_amt : "");
							$("#rate_code").val(data.rate_code != null ? data.rate_code : "");
							$("#rate").val(data.rate != null ? data.rate : "");
							$("#entry_user").val(data.entry_user != null ? data.entry_user : "");
							$("#post_user").val(data.post_user != null ? data.post_user : "");
							$("#tran_status").val(data.tran_status != null ? data.tran_status : "");
							$("#del_flg").val(data.del_flg != null ? data.del_flg : "");
							$("#value_date").val(data.value_date != null ? formatDateToDD(data.value_date) : "");
							$("#tran_date").val(data.tran_date != null ? formatDateToDD(data.tran_date) : "");
							$("#entry_time").val(data.entry_time != null ? formatDateToDD(data.entry_time) : "");
							$("#post_time").val(data.post_time != null ? formatDateToDD(data.post_time) : "");
							$("#srl_no").val(data.srl_no != null ? data.srl_no : "");
						},
						error: function () {
							$('#errorMessage').text('Error fetching data');
							$('#errorModal').modal('show');
						}
					});
				} else {
					alert('This is the first record!');
					return;
				}
			} else if (button.id === 'next-btn') {

				if (currentPartTran < maxPartTran) {
					/*next record*/
					partTranId = currentPartTran + 1;
					document.getElementById('currentPartTran').innerText = partTranId;


					$("#tran_id").val("");
					$("#part_tran_id").val("");
					$("#acct_num1").val("");
					$("#acct_name").val("");
					$("#tran_type").val("");
					$("#part_tran_type").val("");
					$("#acct_crncy").val("");
					$("#tran_amt").val("");
					$("#tran_particular").val("");
					$("#tran_remarks").val("");
					$("#gst_amount").val("");
					$("#gst_type").val("");
					$("#tran_code").val("");
					$("#tran_rpt_code").val("");
					$("#tran_ref_no").val("");
					$("#add_details").val("");
					$("#partition_type").val("");
					$("#partition_det").val("");
					$("#instr_num").val("");
					$("#ref_crncy").val("");
					$("#ref_crncy_amt").val("");
					$("#rate_code").val("");
					$("#rate").val("");
					$("#entry_user").val("");
					$("#post_user").val("");
					$("#tran_status").val("");
					$("#del_flg").val("");
					$("#value_date").val("");
					$("#tran_date").val("");
					$("#entry_time").val("");
					$("#post_time").val("");
					$("#srl_no").val("");



					$.ajax({
						type: 'GET',
						url: './transactionValues',
						data: {
							tran_id: tranId,
							part_tran_id: partTranId

						},
						success: function (data) {
							console.log(data);

							$("#tran_id").val(data.tran_id != null ? data.tran_id : "");
							$("#part_tran_id").val(data.part_tran_id != null ? data.part_tran_id : "");
							$("#acct_num1").val(data.acct_num != null ? data.acct_num : "");
							$("#acct_name").val(data.acct_name != null ? data.acct_name : "");
							$("#tran_type").val(data.tran_type != null ? data.tran_type : "");
							$("#part_tran_type").val(data.part_tran_type != null ? data.part_tran_type : "");
							$("#acct_crncy").val(data.acct_crncy != null ? data.acct_crncy : "");
							$("#tran_amt").val(data.tran_amt != null ? formatNumberWithCommas(data.tran_amt) : "");
							$("#tran_particular").val(data.tran_particular != null ? data.tran_particular : "");
							$("#tran_remarks").val(data.tran_remarks != null ? data.tran_remarks : "");
							$("#gst_amount").val(data.flow_code != null ? data.flow_code : "");
							$("#gst_type").val(data.flow_date != null ? formatDateToDD(data.flow_date) : "");
							$("#tran_code").val(data.tran_code != null ? data.tran_code : "");
							$("#tran_rpt_code").val(data.tran_rpt_code != null ? data.tran_rpt_code : "");
							$("#tran_ref_no").val(data.tran_ref_no != null ? data.tran_ref_no : "");
							$("#add_details").val(data.add_details != null ? data.add_details : "");
							$("#partition_type").val(data.partition_type != null ? data.partition_type : "");
							$("#partition_det").val(data.partition_det != null ? data.partition_det : "");
							$("#instr_num").val(data.instr_num != null ? data.instr_num : "");
							$("#ref_crncy").val(data.ref_crncy != null ? data.ref_crncy : "");
							$("#ref_crncy_amt").val(data.ref_crncy_amt != null ? data.ref_crncy_amt : "");
							$("#rate_code").val(data.rate_code != null ? data.rate_code : "");
							$("#rate").val(data.rate != null ? data.rate : "");
							$("#entry_user").val(data.entry_user != null ? data.entry_user : "");
							$("#post_user").val(data.post_user != null ? data.post_user : "");
							$("#tran_status").val(data.tran_status != null ? data.tran_status : "");
							$("#del_flg").val(data.del_flg != null ? data.del_flg : "");
							$("#value_date").val(data.value_date != null ? formatDateToDD(data.value_date) : "");
							$("#tran_date").val(data.tran_date != null ? formatDateToDD(data.tran_date) : "");
							$("#entry_time").val(data.entry_time != null ? formatDateToDD(data.entry_time) : "");
							$("#post_time").val(data.post_time != null ? formatDateToDD(data.post_time) : "");
							$("#srl_no").val(data.srl_no != null ? data.srl_no : "");
						},
						error: function () {
							$('#errorMessage').text('Error fetching data');
							$('#errorModal').modal('show');
						}
					});
				} else {
					alert('This is the last record!');
					return;
				}
			}


			console.log('Navigating to partTranId:', partTranId);

		}

		function formatDateToDD(dateString) {
			var date = new Date(dateString);

			var day = date.getDate();
			// Use date.getMonth() + 1 to get the correct month (1-12)
			var month = date.getMonth() + 1; // Add 1 to adjust for zero-indexed months
			var year = date.getFullYear();

			if (day < 10) {
				day = '0' + day;
			}
			if (month < 10) {
				month = '0' + month; // Ensure month is two digits
			}

			return day + '-' + month + '-' + year;
		}

		//number input
		function formatNumberWithCommas(number) {

			if (!number && number !== 0) return '';
			console.log("number : " + number);
			let numberString = number.toString();
			console.log("numberString : " + numberString);

			let [integerPart, decimalPart] = numberString.split('.');

			let lastThreeDigits = integerPart.slice(-3);
			let otherDigits = integerPart.slice(0, -3);

			if (otherDigits !== '') {
				lastThreeDigits = ',' + lastThreeDigits;
			}

			let formattedIntegerPart = otherDigits.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThreeDigits;

			if (!decimalPart) {
				decimalPart = '00';
			}
			let formattedNumber = formattedIntegerPart + '.' + decimalPart;
			console.log("formattedIntegerPart : " + formattedIntegerPart);
			console.log("decimalPart : " + decimalPart);

			return formattedNumber;
		}
	</script>

	<script>
		function getPartTranRecordsmodify(button) {
			event.preventDefault();

			const currentPartTran = parseInt(document.getElementById('currentPartTran').innerText);
			//	alert(currentPartTran)
			const maxPartTran = parseInt(document.getElementById('maxPartTran').innerText);
			//	alert(maxPartTran)

			var tranId = $("#tran_id").val();

			let partTranId = currentPartTran;

			if (button.id === 'previous-btn') {

				if (currentPartTran > 1) {
					/*previous record*/
					partTranId = currentPartTran - 1;
					document.getElementById('currentPartTran').innerText = partTranId;

					$("#tran_id").val("");
					$("#part_tran_id").val("");
					$("#acct_num1").val("");
					$("#acct_name").val("");
					$("#tran_type").val("");
					$("#part_tran_type").val("");
					$("#acct_crncy").val("");
					$("#tran_amt").val("");
					$("#tran_particular").val("");
					$("#tran_remarks").val("");
					$("#gst_amount").val("");
					$("#gst_type").val("");
					$("#tran_code").val("");
					$("#tran_rpt_code").val("");
					$("#tran_ref_no").val("");
					$("#add_details").val("");
					$("#partition_type").val("");
					$("#partition_det").val("");
					$("#instr_num").val("");
					$("#ref_crncy").val("");
					$("#ref_crncy_amt").val("");
					$("#rate_code").val("");
					$("#rate").val("");
					$("#entry_user").val("");
					$("#post_user").val("");
					$("#tran_status").val("");
					$("#del_flg").val("");
					$("#value_date").val("");
					$("#tran_date").val("");
					$("#entry_time").val("");
					$("#post_time").val("");
					$("#srl_no").val("");
					$("#flow_code").val("");
					$("#flow_date").val("");



					$.ajax({
						type: 'GET',
						url: './transactionValues',
						data: {
							tran_id: tranId,
							part_tran_id: partTranId

						},
						success: function (data) {
							console.log(data);

							$("#tran_id").val(data.tran_id != null ? data.tran_id : "");
							$("#part_tran_id").val(data.part_tran_id != null ? data.part_tran_id : "");
							$("#acct_num1").val(data.acct_num != null ? data.acct_num : "");
							$("#acct_name").val(data.acct_name != null ? data.acct_name : "");
							$("#tran_type").val(data.tran_type != null ? data.tran_type : "");
							$("#part_tran_type").val(data.part_tran_type != null ? data.part_tran_type : "");
							$("#acct_crncy").val(data.acct_crncy != null ? data.acct_crncy : "");
							$("#tran_amt").val(data.tran_amt != null ? formatNumberWithCommas(data.tran_amt) : "");
							$("#tran_particular").val(data.tran_particular != null ? data.tran_particular : "");
							$("#tran_remarks").val(data.tran_remarks != null ? data.tran_remarks : "");
							$("#gst_amount").val(data.flow_code != null ? data.flow_code : "");

							$("#tran_code").val(data.tran_code != null ? data.tran_code : "");
							$("#tran_rpt_code").val(data.tran_rpt_code != null ? data.tran_rpt_code : "");
							$("#tran_ref_no").val(data.tran_ref_no != null ? data.tran_ref_no : "");
							$("#add_details").val(data.add_details != null ? data.add_details : "");
							$("#partition_type").val(data.partition_type != null ? data.partition_type : "");
							$("#partition_det").val(data.partition_det != null ? data.partition_det : "");
							$("#instr_num").val(data.instr_num != null ? data.instr_num : "");
							$("#ref_crncy").val(data.ref_crncy != null ? data.ref_crncy : "");
							$("#ref_crncy_amt").val(data.ref_crncy_amt != null ? data.ref_crncy_amt : "");
							$("#rate_code").val(data.rate_code != null ? data.rate_code : "");
							$("#rate").val(data.rate != null ? data.rate : "");
							$("#entry_user").val(data.entry_user != null ? data.entry_user : "");
							$("#post_user").val(data.post_user != null ? data.post_user : "");
							$("#tran_status").val(data.tran_status != null ? data.tran_status : "");
							$("#del_flg").val(data.del_flg != null ? data.del_flg : "");
							$("#value_date").val(data.value_date != null ? formatDateToDD(data.value_date) : "");
							$("#tran_date").val(data.tran_date != null ? formatDateToDD(data.tran_date) : "");
							$("#entry_time").val(data.entry_time != null ? formatDateToDD(data.entry_time) : "");
							$("#post_time").val(data.post_time != null ? formatDateToDD(data.post_time) : "");
							$("#srl_no").val(data.srl_no != null ? data.srl_no : "");
							$("#flow_code").val(data.flow_code != null ? data.flow_code : "");
							//$("#flow_date").val(data.flow_date != null ? formatDateToDD(data.flow_date) : "");
							$("#gst_type").val(data.flow_date != null ? formatDateToDD(data.flow_date) : "");
						},
						error: function () {
							$('#errorMessage').text('Error fetching data');
							$('#errorModal').modal('show');
						}
					});
				} else {
					alert('This is the first record!');
					return;
				}
			} else if (button.id === 'next-btn') {

				if (currentPartTran < maxPartTran) {
					/*next record*/
					partTranId = currentPartTran + 1;
					document.getElementById('currentPartTran').innerText = partTranId;


					$("#tran_id").val("");
					$("#part_tran_id").val("");
					$("#acct_num1").val("");
					$("#acct_name").val("");
					$("#tran_type").val("");
					$("#part_tran_type").val("");
					$("#acct_crncy").val("");
					$("#tran_amt").val("");
					$("#tran_particular").val("");
					$("#tran_remarks").val("");
					$("#gst_amount").val("");
					$("#gst_type").val("");
					$("#tran_code").val("");
					$("#tran_rpt_code").val("");
					$("#tran_ref_no").val("");
					$("#add_details").val("");
					$("#partition_type").val("");
					$("#partition_det").val("");
					$("#instr_num").val("");
					$("#ref_crncy").val("");
					$("#ref_crncy_amt").val("");
					$("#rate_code").val("");
					$("#rate").val("");
					$("#entry_user").val("");
					$("#post_user").val("");
					$("#tran_status").val("");
					$("#del_flg").val("");
					$("#value_date").val("");
					$("#tran_date").val("");
					$("#entry_time").val("");
					$("#post_time").val("");
					$("#srl_no").val("");
					$("#flow_code").val("");
					$("#flow_date").val("");



					$.ajax({
						type: 'GET',
						url: './transactionValues',
						data: {
							tran_id: tranId,
							part_tran_id: partTranId

						},
						success: function (data) {
							console.log(data);

							$("#tran_id").val(data.tran_id != null ? data.tran_id : "");
							$("#part_tran_id").val(data.part_tran_id != null ? data.part_tran_id : "");
							$("#acct_num1").val(data.acct_num != null ? data.acct_num : "");
							$("#acct_name").val(data.acct_name != null ? data.acct_name : "");
							$("#tran_type").val(data.tran_type != null ? data.tran_type : "");
							$("#part_tran_type").val(data.part_tran_type != null ? data.part_tran_type : "");
							$("#acct_crncy").val(data.acct_crncy != null ? data.acct_crncy : "");
							$("#tran_amt").val(data.tran_amt != null ? formatNumberWithCommas(data.tran_amt) : "");
							$("#tran_particular").val(data.tran_particular != null ? data.tran_particular : "");
							$("#tran_remarks").val(data.tran_remarks != null ? data.tran_remarks : "");
							$("#gst_amount").val(data.flow_code != null ? data.flow_code : "");

							$("#tran_code").val(data.tran_code != null ? data.tran_code : "");
							$("#tran_rpt_code").val(data.tran_rpt_code != null ? data.tran_rpt_code : "");
							$("#tran_ref_no").val(data.tran_ref_no != null ? data.tran_ref_no : "");
							$("#add_details").val(data.add_details != null ? data.add_details : "");
							$("#partition_type").val(data.partition_type != null ? data.partition_type : "");
							$("#partition_det").val(data.partition_det != null ? data.partition_det : "");
							$("#instr_num").val(data.instr_num != null ? data.instr_num : "");
							$("#ref_crncy").val(data.ref_crncy != null ? data.ref_crncy : "");
							$("#ref_crncy_amt").val(data.ref_crncy_amt != null ? data.ref_crncy_amt : "");
							$("#rate_code").val(data.rate_code != null ? data.rate_code : "");
							$("#rate").val(data.rate != null ? data.rate : "");
							$("#entry_user").val(data.entry_user != null ? data.entry_user : "");
							$("#post_user").val(data.post_user != null ? data.post_user : "");
							$("#tran_status").val(data.tran_status != null ? data.tran_status : "");
							$("#del_flg").val(data.del_flg != null ? data.del_flg : "");
							$("#value_date").val(data.value_date != null ? formatDateToDD(data.value_date) : "");
							$("#tran_date").val(data.tran_date != null ? formatDateToDD(data.tran_date) : "");
							$("#entry_time").val(data.entry_time != null ? formatDateToDD(data.entry_time) : "");
							$("#post_time").val(data.post_time != null ? formatDateToDD(data.post_time) : "");
							$("#srl_no").val(data.srl_no != null ? data.srl_no : "");
							$("#flow_code").val(data.flow_code != null ? data.flow_code : "");
							//	$("#flow_date").val(data.flow_date != null ? formatDateToDD(data.flow_date) : "");
							$("#gst_type").val(data.flow_date != null ? formatDateToDD(data.flow_date) : "");

						},
						error: function () {
							$('#errorMessage').text('Error fetching data');
							$('#errorModal').modal('show');
						}
					});
				} else {
					alert('This is the last record!');
					return;
				}
			}


			console.log('Navigating to partTranId:', partTranId);

		}

		function formatDateToDD(dateString) {
			var date = new Date(dateString);

			var day = date.getDate();
			// Use date.getMonth() + 1 to get the correct month (1-12)
			var month = date.getMonth() + 1; // Add 1 to adjust for zero-indexed months
			var year = date.getFullYear();

			if (day < 10) {
				day = '0' + day;
			}
			if (month < 10) {
				month = '0' + month; // Ensure month is two digits
			}

			return day + '-' + month + '-' + year;
		}


		//number input
		function formatNumberWithCommas(number) {

			if (!number && number !== 0) return '';
			console.log("number : " + number);
			let numberString = number.toString();
			console.log("numberString : " + numberString);

			let [integerPart, decimalPart] = numberString.split('.');

			let lastThreeDigits = integerPart.slice(-3);
			let otherDigits = integerPart.slice(0, -3);

			if (otherDigits !== '') {
				lastThreeDigits = ',' + lastThreeDigits;
			}

			let formattedIntegerPart = otherDigits.replace(/\B(?=(\d{2})+(?!\d))/g, ',') + lastThreeDigits;

			if (!decimalPart) {
				decimalPart = '00';
			}
			let formattedNumber = formattedIntegerPart + '.' + decimalPart;
			console.log("formattedIntegerPart : " + formattedIntegerPart);
			console.log("decimalPart : " + decimalPart);

			return formattedNumber;
		}
	</script>



</head>


<body>

	<div class="col-sm-2">
		<div th:insert="BGLSHeaderMenu :: header"></div>
	</div>
	<!---------------------User List Starts------------------------------------------------------->
	<!-- Start Content-->
	<div class="container-manager">



		<div class="row">


			<div class="col-sm-11 ml-5 mt-2" style="font-size: 0.8rem;">


				<!-- ------------------------------------Journal Entries List---------------------------------- -->
				<div th:if="${formmode}=='list1'">


					<div class="card w-100 border">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">TRANSACTION
									MAINTANANCE - LIST</h6>
							</div>

						</div>
						<div class="card-body">
							<div class="table-responsive">
								<table class="table  table-bordered  table-hover table-sm"
									style="margin-bottom: 0px; font-size: initial; table-layout: fixed; width: 100%;"
									id="usertable">
									<thead class="thead-light">


										<tr>
											<th style="text-align: center">TRAN DATE</th>
											<th style="text-align: center">TRAN ID</th>
											<th style="text-align: center">PA TRAN TY</th>
											<th style="text-align: center">CURRENCY</th>
											<th style="text-align: center">AMOUNT</th>
											<th style="text-align: center">ACCT NUM</th>
											<th style="text-align: center; width: 20%;">ACCT NAME</th>
											<th style="text-align: center; width: 20%;">TRAN
												PARTICULAR</th>
											<th style="text-align: center">STATUS</th>
											<th style="text-align: center">SELECT</th>
										</tr>
									</thead>
									<tbody id="placelist">
										<tr th:each="details : ${jour}">

											<td
												th:text="${details.tran_date != null ? #dates.format(details.tran_date,'dd-MM-yyyy') : ''}">
											</td>
											<td th:text="${details.tran_id} + '/' + ${details.part_tran_id}"></td>
											<td th:text="${details.part_tran_type}"></td>
											<td th:text="${details.acct_crncy}"></td>

											<td style="text-align: right;"
												th:text="${details?.tran_amt == 0 ? '0.00' :#numbers.formatDecimal(details?.tran_amt, 0, 'COMMA', 2, 'POINT')}">
											</td>
											<td th:text="${details.acct_num}"></td>
											<td th:text="${details.acct_name}"></td>
											<td th:text="${details.tran_particular}"></td>
											<td th:text="${details.tran_status}"></td>
											<td>
												<div class="dropdown" style="text-align: center;">
													<button class="btn btn-primary p-2" type="button"
														id="dropdownMenuButton" data-toggle="dropdown"
														aria-haspopup="true" aria-expanded="false">
														Action</button>
													<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
														<a class="dropdown-item" id="btndelete"
															th:attr="data-tranid=${details.tran_id}, data-partnid=${details.part_tran_id}, data-acctnum=${details.acct_num}"
															th:if="${details.tran_status} == 'ENTERED'"
															style="text-align: center;"
															onclick="deleteuser(this);">Delete</a>

														<div class="dropdown-divider"
															th:if="${details.tran_status} == 'ENTERED'"></div>
														<a class="dropdown-item" id="btnEnquiry"
															th:attr="data-tranid=${details.tran_id}, data-partnid=${details.part_tran_id}, data-acctnum=${details.acct_num}"
															style="text-align: center;"
															onclick="enquiryuser(this);">view</a>
													</div>
												</div>
											</td>


										</tr>

									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer text-center" style="background-color: #e9ecef">


							<button class="btn btn-primary p-2" onclick="Home();">Home</button>
							<button class="btn btn-primary p-2" onclick="Back();">Back</button>

						</div>
					</div>


				</div>

				<div th:if="${formmode}=='modify'">
					<div class="card w-100 border">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">TRANSACTION
									MAINTANANCE - MODIFY</h6>
							</div>

						</div>
						<div class="card-body">
							<div class="table-responsive">
								<table class="table  table-bordered  table-hover table-sm"
									style="margin-bottom: 0px; font-size: initial; table-layout: fixed; width: 100%;"
									id="usertable">
									<thead class="thead-light">


										<tr>
											<th style="text-align: center">TRAN DATE</th>
											<th style="text-align: center">TRAN ID</th>
											<th style="text-align: center">PA TRAN TY</th>
											<th style="text-align: center">CURRENCY</th>
											<th style="text-align: center">AMOUNT</th>
											<th style="text-align: center">ACCT NUM</th>
											<th style="text-align: center; width: 20%;">ACCT NAME</th>
											<th style="text-align: center; width: 20%;">TRAN
												PARTICULAR</th>
											<th style="text-align: center">STATUS</th>
											<th style="text-align: center">SELECT</th>
										</tr>
									</thead>
									<tbody id="placelist">
										<tr th:each="details : ${jour}">

											<td
												th:text="${details.tran_date != null ? #dates.format(details.tran_date,'dd-MM-yyyy') : ''}">
											</td>

											<td th:text="${details.tran_id} + '/' + ${details.part_tran_id}"></td>
											<td th:text="${details.part_tran_type}"></td>
											<td th:text="${details.acct_crncy}"></td>

											<td style="text-align: right;"
												th:text="${details?.tran_amt == 0 ? '0.00' :#numbers.formatDecimal(details?.tran_amt, 0, 'COMMA', 2, 'POINT')}">
											</td>
											<td th:text="${details.acct_num}"></td>
											<td th:text="${details.acct_name}"></td>
											<td th:text="${details.tran_particular}"></td>
											<td th:text="${details.tran_status}"></td>
											<td>
												<div style="text-align: center;">
													<input type="radio" name="tran_action" id="actionEntered"
														th:attr="value='ENTERED', data-tranid=${details.tran_id}, data-partnid=${details.part_tran_id}, data-acctnum=${details.acct_num}"
														onclick="performAction(this);" /> <label
														for="actionEntered"></label>
												</div>
											</td>

										</tr>

									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer text-center" style="background-color: #e9ecef">


							<button class="btn btn-primary p-2" onclick="Home();">Home</button>
							<button class="btn btn-primary p-2" onclick="Back();">Back</button>

						</div>
					</div>


				</div>

				<!-- ------------------------------------Journal Entries add---------------------------------- -->
				<div th:if="${formmode}=='add'">
					<script>
						$(function () {
							$("#post_time,#tran_date,#value_date,#gst_type,#instr_date").datepicker({
								dateFormat: "dd/mm/yy",

							});
						});
					</script>

					<div class="card w-100 border">
						<div class="card-header" style="background-color: #e9ecef;">
							<div class="d-flex justify-content-between align-items-center h-100">
								<!-- Left side: Title -->
								<div class="float-left">
									<h6 style="font-size: 1.2rem; color: black;">TRANSACTION MAINTENANCE</h6>
								</div>

								<!-- Right side: Date field -->
								<div class="d-flex align-items-center">
									<div class="col-auto mr-5">
										<label style="font-size: 14px; color: black;">Function</label>
									</div>

									<div class="col-auto mr-5">
										<select class="form-select" style="width: 180px; font-size: 18px; color: black;"
											id="actionDropdown" onchange="toggleValue()">
											<option selected disabled>Select</option>
											<option value="add" th:attr="data-tranid=${plusonetran2},data-partnid=${partTranId},
										data-entryuser=${user}, data-transtatus=${tranStatus}">Add</option>
											<option value="massEntries"
												th:attr="data-tranid=${plusonetran2},data-partnid=${partTranId}">Mass
												Entries</option>
											<option value="modify">Modify</option>
											<option value="list">List</option>
											<option value="upload">Upload</option>
										</select>
									</div>
									<!-- Date label -->
									<div class="col-auto pr-2 mr-3">
										<span>Date</span>
									</div>

									<!-- Date input -->
									<div class="col-auto mr-3">
										<input type="text" name="current" id="current"
											th:value="${#dates.format(currentDate, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>

								</div>
							</div>
						</div>

						<div class="card-body">
							<form class=" border border-secondary" method="post" id="journaladd" autocomplete="off">





								<div class="col-sm-2">
									<input type="text" name="current" id="current"
										th:value="${#dates.format(currentDate, 'dd-MM-yyyy')}"
										class="form-control form-control-sm bg-white border border-dark" hidden />

								</div>

								<input type="text" name="existRowValue" id="existRowValue"
									class="form-control form-control-sm bg-white border border-dark d-none" hidden />




								<div class="row formline" style="padding: 15px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Id</div>

									<div class="col-sm-2">
										<input type="text" name="tran_id" id="tran_id"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Part Tran Id</div>
									<div class="col-sm-2">

										<input type="text" name="part_tran_id" id="part_tran_id"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Acct NO</div>

									<div class="col-sm-2">
										<div class="input-group">
											<input type="text" name="acct_num" id="acct_num1" th:value=${accountnumber}
												class="form-control form-control-sm bg-white border border-dark" />
											<div class="input-group-append" id="accountnumvalues">
												<button type="button" onclick="openModal1(this)">
													<i class="fa fa-search"></i>
												</button>
											</div>
										</div>

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Acct Name</div>
									<div class="col-sm-2">


										<input type="text" name="acct_name" id="acct_name" th:value=${accountnamevalue}
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Type</div>


									<div class="col-sm-2">
										<select id="tran_type" name="tran_type"
											class="form-control form-control-sm bg-white border border-dark">
											<option value="">Select</option>
											<option value="cash">CASH</option>
											<option value="transfer">TRANSFER</option>
											<option value="bank">BANK</option>
										</select>
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Part Tran Type</div>
									<div class="col-sm-2">

										<select id="part_tran_type1" name="part_tran_type"
											onchange="viewTranRefSearch(this);"
											class="form-control form-control-sm bg-white border border-dark">
											<option value="">Select</option>
											<option value="Debit">DEBIT</option>
											<option value="Credit">CREDIT</option>

										</select>

									</div>
									<div class="col-sm-2"></div>
								</div>


								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Acct CCY</div>


									<div class="col-sm-2">

										<select id="acct_crncy" name="acct_crncy" th:value=${currencyvalue}
											class="form-control form-control-sm bg-white border border-dark">
											<option value="">Select</option>
											<option value="INR">INR</option>
											<option value="USD">USD</option>
											<option value="SCR">SCR</option>
										</select>
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Amt</div>
									<div class="col-sm-2">
										<input type="text" name="tran_amt" id="tran_amt"
											oninput="amountInput(this);calculateTotal(this);" th:value=${flowamount}
											class="tran_amt form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Particulars</div>


									<div class="col-sm-2">
										<input type="text" placeholder="" name="tran_particular" id="tran_particular"
											th:value="${accounttypevalue}"
											class="form-control form-control-sm bg-white border border-dark"
											oninput="letterOnly(this);" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Remarks</div>
									<div class="col-sm-2">

										<input type="text" name="tran_remarks" id="tran_remarks"
											class="form-control form-control-sm bg-white border border-dark"
											oninput="letterOnly(this);" />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Flow Code</div>

									<div class="col-sm-2">
										<div class="input-group">
											<input type="text" name="flow_code" id="flow_code1" th:value=${flowcodes}
												class="form-control form-control-sm bg-white border border-dark" />
										</div>
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Flow Date</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="flow_date" id="gst_type"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Date</div>


									<div class="col-sm-2">

										<input type="text" name="tran_date" id="tran_date"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Value Date</div>
									<div class="col-sm-2">


										<input type="text" name="value_date" id="value_date"
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Code</div>


									<div class="col-sm-2">
										<input type="text" name="tran_code" id="tran_code"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Report Code</div>
									<div class="col-sm-2">

										<input type="text" name="tran_rpt_code" id="tran_rpt_code"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Ref NO</div>


									<div class="col-sm-2">
										<div class="input-group">
											<input type="text" name="tran_ref_no" id="tran_ref_no"
												class="form-control form-control-sm bg-white border border-dark" />
											<div class="input-group-append d-none" id="tranrefDiv">
												<button type="button" onclick="openTranRefModal(this)">
													<i class="fa fa-search"></i>
												</button>
											</div>
										</div>

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Additional Details</div>
									<div class="col-sm-2">

										<input type="text" name="add_details" id="add_details"
											class="form-control form-control-sm bg-white border border-dark"
											oninput="letterOnly(this);" />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Partition Type</div>


									<div class="col-sm-2">
										<input type="text" name="partition_type" id="partition_type"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Partition Details</div>
									<div class="col-sm-2">

										<input type="text" name="partition_det" id="partition_det"
											class="form-control form-control-sm bg-white border border-dark"
											oninput="letterOnly(this);" />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Instrument NO</div>


									<div class="col-sm-2">
										<input type="text" name="instr_num" id="instr_num"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Instrument Date</div>
									<div class="col-sm-2">

										<input type="text" name="instr_date" id="instr_date"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Ref CCY</div>


									<div class="col-sm-2">
										<select id="ref_crncy" name="ref_crncy"
											class="form-control form-control-sm bg-white border border-dark">
											<option value="">Select</option>
											<option value="INR">INR</option>
											<option value="USD">USD</option>

										</select>
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Ref CCY Amt</div>
									<div class="col-sm-2">

										<input type="text" name="ref_crncy_amt" id="ref_crncy_amt"
											oninput="amountInput(this);"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Rate Code</div>


									<div class="col-sm-2">
										<input type="text" name="rate_code" id="rate_code"
											class="form-control form-control-sm bg-white border border-dark" />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Rate</div>
									<div class="col-sm-2">


										<input type="text" name="rate" id="rate" oninput="amountInput(this);"
											class="form-control form-control-sm bg-white border border-dark" />
									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Entry User</div>


									<div class="col-sm-2">
										<input type="text" name="entry_user" id="entry_user"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Post User</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="post_user" id="post_user"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Entry Time</div>


									<div class="col-sm-2">
										<input type="text" name="entry_time" id="entry_time"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Post Time</div>
									<div class="col-sm-2">

										<input type="text" name="post_time" id="post_time"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>



								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2" hidden>Modify User</div>


									<div class="col-sm-2">
										<input type="text" name="modify_user" id="modify_user"
											class="form-control form-control-sm bg-white border border-dark" hidden />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2" hidden>Modify Time</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="modify_time" id="modify_time"
											class="form-control form-control-sm bg-white border border-dark" hidden />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 10px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Status</div>


									<div class="col-sm-2">
										<input type="text" name="tran_status" id="tran_status"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Deleted</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="del_flg" id="del_flg"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>
								<div style="text-align: right;">
									<p style="display: inline-flex; align-items: center;">
										<span style="margin-right: 10px;">Total Credit: <span
												id="totalCredit1">0.00</span></span> |
										<span style="margin-left: 10px;">Total Debit: <span
												id="totalDebit1">0.00</span></span>
									</p>
								</div>
						</div>
						<br>
						<div class="table-responsive">
							<table class="table  table-bordered table-sm d-none"
								style="margin-bottom: 0px; font-size: initial; width: 100%;"
								id="transactionaccountvalues">
								<thead class="thead-light">
									<tr>
										<th style="text-align: left; width: 20%;">GENERAL
											LEDGER</th>
										<th style="text-align: left; width: 20%;">GL SUB HEAD</th>
										<th style="text-align: left; width: 20%;">CRNCY</th>
										<th style="text-align: center; width: 20%;">ACCOUNT
											BALANCE</th>
										<th style="text-align: left; width: 20%;">BALANCE IND</th>
									</tr>
								</thead>
								<tbody id="transactionaccountvaluesbody">


								</tbody>
							</table>
						</div>

						<!--<div class="row formline" style="padding: 10px 0px 5px 1015px;">
									<button class="btn btn-primary p-2" onclick="uploadfiles(this);">Upload
										Files</button>
								</div>-->

						<div class="card-body d-flex justify-content-center"></div>

						<div class="table-responsive">
							<table class="table  table-bordered table-sm d-none"
								style="margin-bottom: 0px; font-size: initial; table-layout: fixed; width: 100%;"
								id="transactionTable">
								<thead class="thead-light">

									<tr>
										<th style="text-align: center">TRAN DATE</th>
										<th style="text-align: center">TRAN ID</th>
										<th style="text-align: center">PA TRAN TY</th>
										<th style="text-align: center">CURRENCY</th>
										<th style="text-align: center">AMOUNT</th>
										<th style="text-align: center">ACCT NUM</th>
										<th style="text-align: center; width: 20%;">ACCT NAME</th>
										<th style="text-align: center; width: 20%;">TRAN
											PARTICULAR</th>
										<th style="text-align: center">STATUS</th>

									</tr>
								</thead>
								<tbody id="transactionTableBody">


								</tbody>
							</table>
						</div>
						</form>
					</div>
					<div class="card-footer text-center" style="background-color: #e9ecef">
						<button class="btn btn-primary p-2" onclick="Home();">Home</button>
						<button class="btn btn-primary p-2 d-none" id="addscreenfunctions"
							onclick="addTransactionRows(this);">Add</button>
						<button class="btn btn-primary d-none p-2" id="transactionAddButton"
							onclick="transactionSubmit(this);">Submit</button>
						<!-- <button class="btn btn-primary p-2" id="validatefunctions"
								onclick="validatefunction(this);">Validate</button> -->
						<button class="btn btn-primary p-2" onclick="Back();">Back</button>
					</div>
					<div class="card-body">
						<div class="table-responsive">
							<table class="table  table-bordered  table-hover table-sm"
								style="margin-bottom: 0px; font-size: initial;">
								<tr>
									<td class="col-sm-2" style="text-align: right;">
										<font size="2"><b>Entry User :</b></font>
									</td>
									<td class="col-sm-2" style="width: 112px; margin-right: 20px;">
										<input type="text" id="entry_user" name="entry_user" th:value="${user}"
											style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
											disabled>
									</td>
									<td class="col-sm-2" style="text-align: right;">
										<font size="2"><b>Modify User :</b></font>
									</td>
									<td class="col-sm-2" style="width: 112px;"><input type="text" id="modify_user"
											name="modify_user" th:value="${user}"
											style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;">
									</td>
									<td class="col-sm-2" style="text-align: right;">
										<font size="2"><b>Verify User :</b></font>
									</td>
									<td class="col-sm-2" style="width: 112px;"><input type="text" id="verifyuser"
											name="ub.verifyuser"
											style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
											disabled></td>
								</tr>
								<tr>
									<td style="text-align: right;">
										<font size="2"><B>Entry
												Time :</B></font>
									</td>
									<td style="width: 112px"><input type="text" id="entry_time" name="entry_time"
											th:value="${#dates.format(currentDate, 'dd-MM-yyyy')}"
											style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
											disabled></td>
									<td style="text-align: right;">
										<font size="2"><B>
												Modify Time : </B></font>
									</td>
									<td style="width: 112px"><input type="text" id="modify_time" name="modify_time"
											th:value="${#dates.format(currentDate, 'dd-MM-yyyy')}"
											style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
											disabled></td>
									<td style="text-align: right;">
										<font size="2"><B>Verify
												Time :</B></font>
									</td>
									<td style="width: 112px"><input type="text" id="verifytime" name="ub.verifytime"
											style="width: 115px; border: none; outline: none; background-color: transparent; font-size: 12px;"
											disabled></td>
								</tr>
							</table>
						</div>
					</div>
				</div>




				<!-- ------------------------------------view---------------------------------- -->

				<div th:if="${formmode}=='view'">

					<div class="card w-100 border">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="d-flex justify-content-between align-items-center h-100">
								<!-- Left side: Title -->
								<div class="float-left">
									<h6 style="font-size: 1.2rem; color: black;">JOURNAL ENTRIES-VIEW</h6>
								</div>

								<!-- Right side: Date field -->
								<div class="d-flex align-items-center">
									<!-- Date label -->
									<div class="col-auto pr-2 mr-5">
										<span>Date</span>
									</div>

									<!-- Date input -->
									<div class="col-auto mr-5">
										<input type="text" name="current" id="current"
											th:value="${#dates.format(ledgervalues.tran_date, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>

								</div>
							</div>

						</div>
						<div class="card-body">

							<form class=" border border-secondary" method="post" id="journaladd" autocomplete="off">

								<!-- 
								<div class="row formline" style="padding: 15px 0px 2px 50px;">
									<div class="col-sm-6"></div>
									<div class="col-sm-2">Date</div>


									<div class="col-sm-2">
										<input type="text" name="current" id="current"
											th:value="${#dates.format(ledgervalues.tran_date, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark"
											readonly />
									</div>

									<input type="text" name="existRowValue" id="existRowValue"
										class="form-control form-control-sm bg-white border border-dark d-none"
										readonly />

								</div> -->


								<div class="row formline" style="padding: 15px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Id</div>

									<div class="col-sm-2">
										<input type="text" name="tran_id" id="tran_id"
											th:value="${ledgervalues.tran_id}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Part Tran Id</div>
									<div class="col-sm-2">

										<input type="text" name="part_tran_id" id="part_tran_id"
											th:value="${ledgervalues.part_tran_id}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Acct NO</div>

									<div class="col-sm-2">
										<div class="input-group">
											<input type="text" name="acct_num" id="acct_num1"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.acct_num}" readonly />
											<!-- <div class="input-group-append">
												<button type="button" th:attr="data-acct_num=${Acctnum}"
													onclick="setAccountDetails(this)">
													<i class="fa fa-search"></i>
												</button>
											</div> -->
										</div>
									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Acct Name</div>
									<div class="col-sm-2">


										<input type="text" name="acct_name" id="acct_name"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.acct_name}" readonly />
									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Type</div>


									<div class="col-sm-2">
										<input type="text" name="tran_type" id="tran_type"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.tran_type}" readonly />
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Part Tran Type</div>
									<div class="col-sm-2">
										<input type="text" name="part_tran_type" id="part_tran_type"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.part_tran_type}" readonly />
									</div>
									<div class="col-sm-2"></div>
								</div>


								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Account Currency</div>


									<div class="col-sm-2">
										<input type="text" name="acct_crncy" id="acct_crncy"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.acct_crncy}" readonly />
									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Amt</div>
									<div class="col-sm-2">

										<input type="text" name="tran_amt" id="tran_amt" oninput="amountInput(this);"
											th:value="${ledgervalues.tran_amt}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Particulars</div>


									<div class="col-sm-2">
										<input type="text" placeholder="" name="tran_particular" id="tran_particular"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.tran_particular}" oninput="letterOnly(this);"
											readonly />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Remarks</div>
									<div class="col-sm-2">

										<input type="text" name="tran_remarks" id="tran_remarks"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.tran_remarks}" oninput="letterOnly(this);"
											readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Flow Code</div>


									<div class="col-sm-2">
										<input type="text" name="flow_code" id="gst_amount"
											th:value="${ledgervalues.flow_code}" oninput="amountInput(this);"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Flow Date</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="flow_date" id="gst_type"
											th:value="${#dates.format(ledgervalues.flow_date, 'dd-MM-yyyy')}"
											oninput="letterOnly(this);"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Date</div>


									<div class="col-sm-2">

										<input type="text" name="tran_date" id="tran_date"
											th:value="${#dates.format(ledgervalues.tran_date, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Value Date</div>
									<div class="col-sm-2">


										<input type="text" name="value_date" id="value_date"
											th:value="${#dates.format(ledgervalues.value_date, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Code</div>


									<div class="col-sm-2">
										<input type="text" name="tran_code" id="tran_code"
											th:value="${ledgervalues.tran_code}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Report Code</div>
									<div class="col-sm-2">

										<input type="text" name="tran_rpt_code" id="tran_rpt_code"
											th:value="${ledgervalues.tran_rpt_code}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Ref NO</div>


									<div class="col-sm-2">
										<input type="text" name="tran_ref_no" id="tran_ref_no"
											th:value="${ledgervalues.tran_ref_no}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Additional Details</div>
									<div class="col-sm-2">

										<input type="text" name="add_details" id="add_details"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.add_details}" oninput="letterOnly(this);"
											readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Partition Type</div>


									<div class="col-sm-2">
										<input type="text" name="partition_type" id="partition_type"
											th:value="${ledgervalues.partition_type}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Partition Details</div>
									<div class="col-sm-2">

										<input type="text" name="partition_det" id="partition_det"
											class="form-control form-control-sm bg-white border border-dark"
											th:value="${ledgervalues.partition_det}" oninput="letterOnly(this);"
											readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Instrument NO</div>


									<div class="col-sm-2">
										<input type="text" name="instr_num" id="instr_num"
											th:value="${ledgervalues.instr_num}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Instrument Date</div>
									<div class="col-sm-2">

										<input type="text" name="instr_date" id="instr_date"
											th:value="${#dates.format(ledgervalues.instr_date, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Account Currency</div>


									<div class="col-sm-2">
										<input type="text" name="ref_crncy" id="ref_crncy"
											th:value="${ledgervalues.ref_crncy}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Home Currency Amount</div>
									<div class="col-sm-2">

										<input type="text" name="ref_crncy_amt" id="ref_crncy_amt"
											oninput="amountInput(this);" th:value="${ledgervalues.ref_crncy_amt}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Rate Code</div>


									<div class="col-sm-2">
										<input type="text" name="rate_code" id="rate_code"
											th:value="${ledgervalues.rate_code}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Rate</div>
									<div class="col-sm-2">


										<input type="text" name="rate" id="rate" th:value="${ledgervalues.rate}"
											oninput="amountInput(this);"
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Entry User</div>


									<div class="col-sm-2">
										<input type="text" name="entry_user" id="entry_user"
											th:value="${ledgervalues.entry_user}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Post User</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="post_user" id="post_user"
											th:value="${ledgervalues.post_user}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Entry Time</div>


									<div class="col-sm-2">
										<input type="text" name="entry_time" id="entry_time"
											th:value="${#dates.format(ledgervalues.entry_time, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Post Time</div>
									<div class="col-sm-2">

										<input type="text" name="post_time" id="post_time"
											th:value="${#dates.format(ledgervalues.post_time, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>



								<div class="row formline" style="padding: 0px 0px 2px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2" hidden>Modify User</div>


									<div class="col-sm-2">
										<input type="text" name="modify_user" id="modify_user"
											th:value="${ledgervalues.modify_user}"
											class="form-control form-control-sm bg-white border border-dark" hidden />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2" hidden>Modify Time</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="modify_time" id="modify_time"
											th:value="${#dates.format(ledgervalues.modify_time, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" hidden />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="row formline" style="padding: 0px 0px 10px 50px;">
									<div class="col-sm-1"></div>
									<div class="col-sm-2">Tran Status</div>


									<div class="col-sm-2">
										<input type="text" name="tran_status" id="tran_status"
											th:value="${ledgervalues.tran_status}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>

									<div class="col-sm-1"></div>
									<div class="col-sm-2">Deleted</div>
									<div class="col-sm-2">

										<input type="text" placeholder="" name="del_flg" id="del_flg"
											th:value="${ledgervalues.del_flg}"
											class="form-control form-control-sm bg-white border border-dark" readonly />

									</div>
									<div class="col-sm-2"></div>
								</div>

								<div class="d-flex justify-content-end align-items-center mr-3 mb-2">
									<button id="previous-btn" class="btn btn-primary me-2"
										onclick="getPartTranRecords(this);">Previous</button>
									<span class="mx-1" th:text="${currentPartTran}" id="currentPartTran"></span>
									<span class="mx-1">/</span>
									<span class="mx-1" id="maxPartTran" th:text="${maxPartTran}"></span>
									<button id="next-btn" class="btn btn-primary ms-2"
										onclick="getPartTranRecords(this);">Next</button>
								</div>
								<br>
								<div class="table-responsive">
									<table class="table  table-bordered table-sm d-none"
										style="margin-bottom: 0px; font-size: initial; width: 100%;"
										id="transactionaccountvalues">
										<thead class="thead-light">
											<tr>
												<th style="text-align: left; width: 20%;">GENERAL
													LEDGER</th>
												<th style="text-align: left; width: 20%;">GL SUB HEAD</th>
												<th style="text-align: left; width: 20%;">CRNCY</th>
												<th style="text-align: center; width: 20%;">ACCOUNT
													BALANCE</th>
												<th style="text-align: left; width: 20%;">BALANCE IND</th>
											</tr>
										</thead>
										<tbody id="transactionaccountvaluesbody">


										</tbody>
									</table>
								</div>

								<!--<div class="row formline" style="padding: 10px 0px 5px 1015px;">
									<button class="btn btn-primary p-2" onclick="uploadfiles(this);">Upload
										Files</button>
								</div>-->

								<div class="table-responsive">
									<table class="table  table-bordered table-sm d-none"
										style="margin-bottom: 0px; font-size: initial; table-layout: fixed; width: 100%;"
										id="transactionTable">
										<thead class="thead-light">

											<tr>
												<th style="text-align: center">TRAN DATE</th>
												<th style="text-align: center">TRAN ID</th>
												<th style="text-align: center">PA TRAN TY</th>
												<th style="text-align: center">CURRENCY</th>
												<th style="text-align: center">AMOUNT</th>
												<th style="text-align: center">ACCT NUM</th>
												<th style="text-align: center; width: 20%;">ACCT NAME</th>
												<th style="text-align: center; width: 20%;">TRAN
													PARTICULAR</th>
												<th style="text-align: center">STATUS</th>

											</tr>
										</thead>
										<tbody id="transactionTableBody">


										</tbody>
									</table>
								</div>




							</form>

							<div class="table-responsive">
								<table class="table table-bordered table-hover table-sm d-none"
									style="margin-bottom: 0px; font-size: initial; table-layout: fixed; width: 100%;"
									id="usertablevalues">
									<thead class="thead-light">
										<tr>
											<th style="text-align: left">TRAN DATE</th>
											<th style="text-align: left">TRAN ID</th>
											<th style="text-align: left">PA TRAN TY</th>
											<th style="text-align: left">CURRENCY</th>
											<th style="text-align: right">AMOUNT</th>
											<th style="text-align: left">ACCT NUM</th>
											<th style="text-align: left; width: 20%;">ACCT NAME</th>
											<th style="text-align: left">STATUS</th>
											<th style="text-align: center">SELECT</th>
										</tr>
									</thead>
									<tbody id="placelist">
										<tr th:each="details : ${jour}">
											<td
												th:text="${details.tran_date != null ? #dates.format(details.tran_date,'dd-MM-yyyy') : ''}">
											</td>
											<td th:text="${details.tran_id} + '/' + ${details.part_tran_id}"></td>
											<td th:text="${details.part_tran_type}"></td>
											<td th:text="${details.acct_crncy}"></td>
											<td style="text-align: right;"
												th:text="${details?.tran_amt == 0 ? '0.00' : #numbers.formatDecimal(details?.tran_amt, 0, 'COMMA', 2, 'POINT')}">
											</td>
											<td th:text="${details.acct_num}"></td>
											<td th:text="${details.acct_name}"></td>
											<td th:text="${details.tran_status}"></td>
											<td style="text-align: center;"><input type="radio" id="radioSelect"
													name="actionRadio"
													th:attr="data-tranid=${details.tran_id}, data-partnid=${details.part_tran_id}, data-acctnum=${details.acct_num}"
													onclick="selectActions(this);"></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="card-footer text-center" style="background-color: #e9ecef">


							<button class="btn btn-primary p-2" onclick="Home();">Home</button>
							<button class="btn btn-primary p-2" onclick="views(this);">View</button>
							<button class="btn btn-primary p-2" onclick="Back();">Back</button>


						</div>


						<div class="card-body">
							<div class="table-responsive">
								<table class="table  table-bordered  table-hover table-sm"
									style="margin-bottom: 0px; font-size: initial;">
									<tr>
										<td class="col-sm-2" style="text-align: right;">
											<font size="2"><B>Entry User :</B></font>
										</td>
										<td class="col-sm-2" style="width: 112px; margin-right: 20px;">
											<input type="text" id="entryuser" name="entry_user"
												th:value="${ledgervalues?.entry_user}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled>
										</td>
										<td class="col-sm-2" style="text-align: right;">
											<font size="2"><B>Modify User :</B></font>
										</td>
										<td class="col-sm-2" style="width: 112px;"><input type="text" id="modifyuser"
												name="modify_user" th:value="${ledgervalues?.modify_user}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
										<td class="col-sm-2" style="text-align: right;">
											<font size="2"><B> Verify User :</B></font>
										</td>
										<td class="col-sm-2" style="width: 112px;"><input type="text" id="verifyuser"
												name="post_user" th:value="${ledgervalues?.post_user}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
									</tr>
									<tr>
										<td style="text-align: right;">
											<font size="2"><B>Entry
													Time :</B></font>
										</td>
										<td style="width: 112px"><input type="text" id="entrytime" name="ub.entrytime"
												th:value="${#dates.format(ledgervalues?.entry_time, 'dd-MM-yyyy')}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
										<td style="text-align: right;">
											<font size="2"><B>Modify
													Time : </B></font>
										</td>
										<td style="width: 112px"><input type="text" id="modifytime" name="modify_time"
												th:value="${#dates.format(ledgervalues?.modify_time, 'dd-MM-yyyy')}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
										<td style="text-align: right;">
											<font size="2"><B>Verify
													Time :</B></font>
										</td>
										<td style="width: 112px"><input type="text" id="verifytime" name="post_time"
												th:value="${#dates.format(ledgervalues?.post_time, 'dd-MM-yyyy')}"
												style="width: 115px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>


				<!-- ------------------------------------modify---------------------------------- -->

				<div th:if="${formmode}=='modify1'">
					<script>
						$(function () {
							$("#post_time,#tran_date,#value_date,#gst_type,#instr_date").datepicker({
								dateFormat: "dd-mm-yy",

							});
						});
					</script>
					<div class="card w-100 border">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="d-flex justify-content-between align-items-center h-100">
								<!-- Left side: Title -->
								<div class="float-left">
									<h6 style="font-size: 1.2rem; color: black;">TRANSACTION MAINTANANCE- MODIFY DATAS
									</h6>
								</div>

								<!-- Right side: Date field -->
								<div class="d-flex align-items-center">
									<!-- Date label -->
									<div class="col-auto pr-2 mr-5">
										<span>Date</span>
									</div>

									<!-- Date input -->
									<div class="col-auto mr-5">
										<input type="text" name="current" id="current"
											th:value="${#dates.format(ledgervalues.tran_date, 'dd-MM-yyyy')}"
											class="form-control form-control-sm bg-white border border-dark" readonly />
									</div>

								</div>
							</div>

						</div>
						<div class="card-body">

							<form class=" border border-secondary" method="post" id="modifyForm" autocomplete="off">
								<div class="transaction-row">

									<!-- <div class="row formline" style="padding: 15px 0px 2px 50px;">
									<div class="col-sm-6"></div>
									<div class="col-sm-2">Date</div>


									<div class="col-sm-2">
										<input type="text" name="current" id="current"
											th:value="${#dates.format(ledgervalues.tran_date, 'yyyy-MM-dd')}"
											class="form-control form-control-sm bg-white border border-dark"
											readonly />
									</div>

									<input type="text" name="existRowValue" id="existRowValue"
										class="form-control form-control-sm bg-white border border-dark d-none"
										readonly />

								</div> -->


									<div class="row formline" style="padding: 15px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Id</div>

										<div class="col-sm-2">
											<input type="text" name="tran_id" id="tran_id"
												th:value="${ledgervalues.tran_id}"
												class="form-control form-control-sm bg-white border border-dark"
												readonly />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Part Tran Id</div>
										<div class="col-sm-2">

											<input type="text" name="part_tran_id" id="part_tran_id"
												th:value="${ledgervalues.part_tran_id}"
												class="form-control form-control-sm bg-white border border-dark"
												readonly />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Acct NO</div>

										<div class="col-sm-2">
											<div class="input-group">
												<input type="text" name="acct_num" id="acct_num1"
													class="form-control form-control-sm bg-white border border-dark"
													th:value="${ledgervalues.acct_num}" readonly />
											</div>

										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Acct Name</div>
										<div class="col-sm-2">


											<input type="text" name="acct_name" id="acct_name"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.acct_name}" readonly />
										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Type</div>


										<div class="col-sm-2">
											<input type="text" name="tran_type" id="tran_type"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.tran_type}" readonly />
										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Part Tran Type</div>
										<div class="col-sm-2">
											<input type="text" name="part_tran_type" id="part_tran_type"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.part_tran_type}" readonly />
										</div>
										<div class="col-sm-2"></div>
									</div>


									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Acct CCY</div>


										<div class="col-sm-2">
											<input type="text" name="acct_crncy" id="acct_crncy"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.acct_crncy}" readonly />
										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Amt</div>
										<div class="col-sm-2">

											<input type="text" name="tran_amt" id="tran_amt"
												oninput="amountInput(this);" th:value="${ledgervalues?.tran_amt}"
												class="form-control form-control-sm bg-white border border-dark"
												readonly />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Particulars</div>


										<div class="col-sm-2">
											<input type="text" placeholder="" name="tran_particular"
												id="tran_particular"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.tran_particular}" oninput="letterOnly(this);"
												readonly />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Remarks</div>
										<div class="col-sm-2">

											<input type="text" name="tran_remarks" id="tran_remarks"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.tran_remarks}" oninput="letterOnly(this);"
												readonly />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Flow Code</div>


										<div class="col-sm-2">
											<input type="text" name="flow_code" id="gst_amount"
												th:value="${ledgervalues.flow_code}" oninput="amountInput(this);"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Flow Date</div>
										<div class="col-sm-2">

											<input type="text" placeholder="" name="flow_date" id="gst_type"
												th:value="${#dates.format(ledgervalues.flow_date, 'dd-MM-yyyy')}"
												oninput="letterOnly(this);"
												class="form-control form-control-sm bg-white border border-dark" />
										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Date</div>


										<div class="col-sm-2">

											<input type="text" name="tran_date" id="tran_date"
												th:value="${#dates.format(ledgervalues.tran_date, 'dd-MM-yyyy')}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Value Date</div>
										<div class="col-sm-2">


											<input type="text" name="value_date" id="value_date"
												th:value="${#dates.format(ledgervalues.value_date, 'dd-MM-yyyy')}"
												class="form-control form-control-sm bg-white border border-dark" />
										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Code</div>


										<div class="col-sm-2">
											<input type="text" name="tran_code" id="tran_code"
												th:value="${ledgervalues.tran_code}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Report Code</div>
										<div class="col-sm-2">

											<input type="text" name="tran_rpt_code" id="tran_rpt_code"
												th:value="${ledgervalues.tran_rpt_code}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Ref NO</div>


										<div class="col-sm-2">
											<input type="text" name="tran_ref_no" id="tran_ref_no"
												th:value="${ledgervalues.tran_ref_no}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Additional Details</div>
										<div class="col-sm-2">

											<input type="text" name="add_details" id="add_details"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.add_details}" oninput="letterOnly(this);" />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Partition Type</div>


										<div class="col-sm-2">
											<input type="text" name="partition_type" id="partition_type"
												th:value="${ledgervalues.partition_type}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Partition Details</div>
										<div class="col-sm-2">

											<input type="text" name="partition_det" id="partition_det"
												class="form-control form-control-sm bg-white border border-dark"
												th:value="${ledgervalues.partition_det}" oninput="letterOnly(this);" />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Instrument NO</div>


										<div class="col-sm-2">
											<input type="text" name="instr_num" id="instr_num"
												th:value="${ledgervalues.instr_num}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Instrument Date</div>
										<div class="col-sm-2">

											<input type="text" name="instr_date" id="instr_date"
												th:value="${#dates.format(ledgervalues.instr_date, 'dd-MM-yyyy')}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Account Currency</div>


										<div class="col-sm-2">
											<input type="text" name="ref_crncy" id="ref_crncy"
												th:value="${ledgervalues.ref_crncy}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Home Currency Amount</div>
										<div class="col-sm-2">

											<input type="text" name="ref_crncy_amt" id="ref_crncy_amt"
												oninput="amountInput(this);" th:value="${ledgervalues.ref_crncy_amt}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Rate Code</div>


										<div class="col-sm-2">
											<input type="text" name="rate_code" id="rate_code"
												th:value="${ledgervalues.rate_code}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Rate</div>
										<div class="col-sm-2">


											<input type="text" name="rate" id="rate" th:value="${ledgervalues.rate}"
												oninput="amountInput(this);"
												class="form-control form-control-sm bg-white border border-dark" />
										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Entry User</div>


										<div class="col-sm-2">
											<input type="text" name="entry_user" id="entry_user"
												th:value="${ledgervalues.entry_user}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Post User</div>
										<div class="col-sm-2">

											<input type="text" placeholder="" name="post_user" id="post_user"
												th:value="${ledgervalues.post_user}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Entry Time</div>


										<div class="col-sm-2">
											<input type="text" name="entry_time" id="entry_time"
												th:value="${#dates.format(ledgervalues.entry_time, 'dd-MM-yyyy')}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Post Time</div>
										<div class="col-sm-2">

											<input type="text" name="post_time" id="post_time"
												th:value="${#dates.format(ledgervalues.post_time, 'dd-MM-yyyy')}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-2"></div>
									</div>



									<div class="row formline" style="padding: 0px 0px 2px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2" hidden>Modify User</div>


										<div class="col-sm-2">
											<input type="text" name="modify_user" id="modify_user"
												th:value="${ledgervalues.modify_user}"
												class="form-control form-control-sm bg-white border border-dark"
												hidden />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2" hidden>Modify Time</div>
										<div class="col-sm-2">

											<input type="text" placeholder="" name="modify_time" id="modify_time"
												th:value="${#dates.format(ledgervalues.modify_time, 'dd-MM-yyyy')}"
												class="form-control form-control-sm bg-white border border-dark"
												hidden />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="row formline" style="padding: 0px 0px 10px 50px;">
										<div class="col-sm-1"></div>
										<div class="col-sm-2">Tran Status</div>


										<div class="col-sm-2">
											<input type="text" name="tran_status" id="tran_status"
												th:value="${ledgervalues.tran_status}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>

										<div class="col-sm-1"></div>
										<div class="col-sm-2">Deleted</div>
										<div class="col-sm-2">

											<input type="text" placeholder="" name="del_flg" id="del_flg"
												th:value="${ledgervalues.del_flg}"
												class="form-control form-control-sm bg-white border border-dark" />

										</div>
										<div class="col-sm-2"></div>
									</div>

									<div class="col-sm-2">
										<input type="text" name="srl_no" id="srl_no" th:value="${ledgervalues.srl_no}"
											class="form-control form-control-sm bg-white border border-dark" hidden />

									</div>

									<br>
									<div class="table-responsive">
										<table class="table  table-bordered table-sm d-none"
											style="margin-bottom: 0px; font-size: initial; width: 100%;"
											id="transactionaccountvalues">
											<thead class="thead-light">
												<tr>
													<th style="text-align: left; width: 20%;">GENERAL
														LEDGER</th>
													<th style="text-align: left; width: 20%;">GL SUB HEAD</th>
													<th style="text-align: left; width: 20%;">CRNCY</th>
													<th style="text-align: center; width: 20%;">ACCOUNT
														BALANCE</th>
													<th style="text-align: left; width: 20%;">BALANCE IND</th>
												</tr>
											</thead>
											<tbody id="transactionaccountvaluesbody">


											</tbody>
										</table>
									</div>

									<!--<div class="row formline" style="padding: 10px 0px 5px 1015px;">
									<button class="btn btn-primary p-2" onclick="uploadfiles(this);">Upload
										Files</button>
								</div>-->

									<div class="table-responsive">
										<table class="table  table-bordered table-sm d-none"
											style="margin-bottom: 0px; font-size: initial; table-layout: fixed; width: 100%;"
											id="transactionTable">
											<thead class="thead-light">

												<tr>
													<th style="text-align: center">TRAN DATE</th>
													<th style="text-align: center">TRAN ID</th>
													<th style="text-align: center">PA TRAN TY</th>
													<th style="text-align: center">CURRENCY</th>
													<th style="text-align: center">AMOUNT</th>
													<th style="text-align: center">ACCT NUM</th>
													<th style="text-align: center; width: 20%;">ACCT NAME</th>
													<th style="text-align: center; width: 20%;">TRAN
														PARTICULAR</th>
													<th style="text-align: center">STATUS</th>

												</tr>
											</thead>
											<tbody id="transactionTableBody">


											</tbody>
										</table>
									</div>


								</div>

							</form>

							<div class="table-responsive">
								<table class="table table-bordered table-hover table-sm d-none "
									style="margin-bottom: 0px; font-size: initial; table-layout: fixed; width: 100%;"
									id="usertablevalues">
									<thead class="thead-light">
										<tr>
											<th style="text-align: left">TRAN DATE</th>
											<th style="text-align: left">TRAN ID</th>
											<th style="text-align: left">PA TRAN TY</th>
											<th style="text-align: left">CURRENCY</th>
											<th style="text-align: right">AMOUNT</th>
											<th style="text-align: left">ACCT NUM</th>
											<th style="text-align: left; width: 20%;">ACCT NAME</th>
											<th style="text-align: left">STATUS</th>
											<th style="text-align: center">SELECT</th>
										</tr>
									</thead>
									<tbody id="placelist">
										<tr th:each="details : ${jour}">
											<td
												th:text="${details.tran_date != null ? #dates.format(details.tran_date,'dd-MM-yyyy') : ''}">
											</td>
											<td th:text="${details.tran_id} + '/' + ${details.part_tran_id}"></td>
											<td th:text="${details.part_tran_type}"></td>
											<td th:text="${details.acct_crncy}"></td>
											<td style="text-align: right;"
												th:text="${details?.tran_amt == 0 ? '0.00' : #numbers.formatDecimal(details?.tran_amt, 0, 'COMMA', 2, 'POINT')}">
											</td>
											<td th:text="${details.acct_num}"></td>
											<td th:text="${details.acct_name}"></td>
											<td th:text="${details.tran_status}"></td>
											<td style="text-align: center;"><input type="radio" id="radioSelect"
													name="actionRadio"
													th:attr="data-tranid=${details.tran_id}, data-partnid=${details.part_tran_id}, data-acctnum=${details.acct_num}"
													onclick="selectActions(this);"></td>
										</tr>
									</tbody>
								</table>
								<div class="d-flex justify-content-end align-items-center mr-3 mb-2">
									<button id="previous-btn" class="btn btn-primary me-2"
										onclick="getPartTranRecordsmodify(this);">Previous</button>
									<span class="mx-1" th:text="${currentPartTran}" id="currentPartTran"></span>
									<span class="mx-1">/</span>
									<span class="mx-1" id="maxPartTran" th:text="${maxPartTran}"></span>
									<button id="next-btn" class="btn btn-primary ms-2"
										onclick="getPartTranRecordsmodify(this);">Next</button>
								</div>
							</div>
						</div>
						<div class="card-footer text-center" style="background-color: #e9ecef">


							<button class="btn btn-primary p-2" onclick="Home();">Home</button>
							<button class="btn btn-primary p-2" onclick="Submitdatasmodify(this);">Submit</button>
							<button class="btn btn-primary p-2" onclick="Back();">Back</button>


						</div>


						<div class="card-body">
							<div class="table-responsive">
								<table class="table  table-bordered  table-hover table-sm"
									style="margin-bottom: 0px; font-size: initial;">
									<tr>
										<td class="col-sm-2" style="text-align: right;">
											<font size="2"><B>Entry User :</B></font>
										</td>
										<td class="col-sm-2" style="width: 112px; margin-right: 20px;">
											<input type="text" id="entryuser" name="entry_user"
												th:value="${ledgervalues?.entry_user}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled>
										</td>
										<td class="col-sm-2" style="text-align: right;">
											<font size="2"><B>Modify User :</B></font>
										</td>
										<td class="col-sm-2" style="width: 112px;"><input type="text" id="modifyuser"
												name="modify_user" th:value="${ledgervalues?.modify_user}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
										<td class="col-sm-2" style="text-align: right;">
											<font size="2"><B> Verify User :</B></font>
										</td>
										<td class="col-sm-2" style="width: 112px;"><input type="text" id="verifyuser"
												name="post_user" th:value="${ledgervalues?.post_user}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
									</tr>
									<tr>
										<td style="text-align: right;">
											<font size="2"><B>Entry
													Time :</B></font>
										</td>
										<td style="width: 112px"><input type="text" id="entrytime" name="ub.entrytime"
												th:value="${#dates.format(ledgervalues?.entry_time, 'dd-MM-yyyy')}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
										<td style="text-align: right;">
											<font size="2"><B>Modify
													Time : </B></font>
										</td>
										<td style="width: 112px"><input type="text" id="modifytime" name="modify_time"
												th:value="${#dates.format(ledgervalues?.modify_time, 'dd-MM-yyyy')}"
												style="width: 112px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
										<td style="text-align: right;">
											<font size="2"><B>Verify
													Time :</B></font>
										</td>
										<td style="width: 112px"><input type="text" id="verifytime" name="post_time"
												th:value="${#dates.format(ledgervalues?.post_time, 'dd-MM-yyyy')}"
												style="width: 115px; border: none; outline: none; background-color: transparent; font-size: 12px;"
												disabled></td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div>


				<!-- ------------------------------------Bulk transactions---------------------------------- -->

				<div th:if="${formmode}=='view2'">

					<div class="card w-100 border">
						<div class="card-header" style="background-color: #e9ecef; height: 50px">
							<div class="float-left">
								<h6 style="font-size: 1.2rem; color: black;">Bulk
									Transactions</h6>
							</div>
						</div>
						<div class="row formline" style="padding: 10px 10px 2px 50px; text-align: bottom;">
							<div class="col-sm-1">TRAN ID</div>
							<div class="col-sm-2">
								<input type="text" name="tran_id" id="tran_id"
									class="form-control form-control-sm bg-white border border-dark"
									th:value="${plusonetran2}" readonly />
							</div>

							<div class="col-sm-1">TRAN TYPE</div>
							<div class="col-sm-2">
								<input type="text" name="tran_type" id="tran_type" value="Transfer"
									class="form-control form-control-sm bg-white border border-dark" readonly />
							</div>

							<div class="col-sm-3"></div>

							<div class="col-sm-1">TRAN DATE</div>
							<div class="col-sm-2">
								<input type="text" name="tran_date" id="tran_date"
									th:value="${#dates.format(currentDate, 'dd-MM-yyyy')}"
									class="form-control form-control-sm bg-white border border-dark" readonly />
							</div>
						</div>
						<div class="row formline mr-2" style="padding: 10px 10px 2px 50px; justify-content: right;">
							<div style="background: transparent; color: black;">
								<button type="button" class="btn btn-success" onclick="addNewRow()">Add</button>
							</div>
							<div style="background: transparent; color: red;">
								<button type="button" class="btn btn-danger" onclick="removeRow(this)">Remove</button>
							</div>
						</div>

						<div class="card-body">
							<table class="table table-bordered">
								<thead>
									<tr>
										<th>Tran Id</th>
										<th>Part Tran Id</th>
										<th>Account No</th>
										<th>Account Name</th>

										<th style="width:10%">Part Tran Type</th>
										<th>Tran Amount</th>
										<th>Tran Particular</th>
										<th>Remarks</th>

										<th>Rate Code</th>
										<th>Rate</th>
										<th>Additional Remarks</th>
									</tr>
								</thead>
								<tbody id="usertablemulti">
									<tr>
										<td><input type="text" class="form-control" id="tran_id" name="tran_id"
												th:value="${plusonetran2}"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" th:value="1" id="part_tran_id"
												name="part_tran_id" onkeyup="this.value = this.value.toUpperCase();" />
										</td>
										<td>
											<input type="text" class="form-control" id="acct_num_mass0"
												onclick="openModalmassentries(this)" name="acct_num"
												onkeyup="this.value = this.value.toUpperCase();" />
										</td>
										<td><input type="text" class="form-control" id="acct_name_mass0"
												name="acct_name" onkeyup="this.value = this.value.toUpperCase();" />
										</td>
										<td>
											<select class="form-control" id="part_tran_type" name="part_tran_type"
												oninput="calculate(this)">
												<option value="">Select</option>
												<option value="Credit">Credit</option>
												<option value="Debit">Debit</option>

											</select>
										</td>
										<td><input type="text" class="form-control" id="tran_amt" name="tran_amt"
												oninput="calculate()" /></td>
										<td><input type="text" class="form-control" id="tran_particular"
												name="tran_particular"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" id="tran_remarks"
												name="tran_remarks" onkeyup="this.value = this.value.toUpperCase();" />
										</td>
										<td><input type="text" class="form-control" id="rate_code" name="rate_code"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" id="rate" name="rate"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" id="add_details" name="add_details"
												onkeyup="this.value = this.value.toUpperCase();" /></td>

									</tr>
									<tr>
										<td><input type="text" class="form-control" id="tran_id" name="tran_id"
												th:value="${plusonetran2}"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" th:value="2" id="part_tran_id"
												name="part_tran_id" onkeyup="this.value = this.value.toUpperCase();" />
										</td>
										<td><input type="text" class="form-control" id="acct_num_mass1"
												onclick="openModalmassentries(this)" name="acct_num"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" id="acct_name_mass1"
												name="acct_name" onkeyup="this.value = this.value.toUpperCase();" />
										</td>
										<td>
											<select class="form-control" id="part_tran_type" name="part_tran_type"
												oninput="calculate(this)">
												<option value="">Select</option>
												<option value="Credit">Credit</option>
												<option value="Debit">Debit</option>

											</select>
										</td>
										<td><input type="text" class="form-control" id="tran_amt" name="tran_amt"
												oninput="calculate()" /></td>
										<td><input type="text" class="form-control" id="tran_particular"
												name="tran_particular"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" id="tran_remarks"
												name="tran_remarks" onkeyup="this.value = this.value.toUpperCase();" />
										</td>
										<td><input type="text" class="form-control" id="rate_code" name="rate_code"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" id="rate" name="rate"
												onkeyup="this.value = this.value.toUpperCase();" /></td>
										<td><input type="text" class="form-control" id="add_details" name="add_details"
												onkeyup="this.value = this.value.toUpperCase();" /></td>

									</tr>
								</tbody>
							</table>
							<div style="text-align: right;">
								<p style="display: inline-flex; align-items: center;">
									<span style="margin-right: 10px;">Total Credit: <span
											id="totalCredit">0.00</span></span> |
									<span style="margin-left: 10px;">Total Debit: <span
											id="totalDebit">0.00</span></span>
								</p>
							</div>



						</div>
						<div class="row-formline"
							style="display: flex; align-items: right; justify-content: right; margin-right: 30px; margin-top: 10px; margin-bottom: 10px;font-size:16px">

							<div id="" style="text-align: right;font-weight: bold"></div>
						</div>

						<div class="card-footer text-center" style="background-color: #e9ecef">
							<button class="btn btn-primary p-2" onclick="Home();">Home</button>
							<button class="btn btn-primary p-2" onclick="Submitvalues(this);">Submit</button>
							<button class="btn btn-primary p-2" onclick="Back();">Back</button>
						</div>
					</div>


					<script type="text/javascript">




						var plusonetranValue = document
							.getElementById("tran_id").value; // Replace 'DEFAULT_VALUE' for testing

						document
							.addEventListener(
								"DOMContentLoaded",
								function () {
									// Log the fetched value to verify it
									console
										.log("Thymeleaf-rendered plusonetranValue: "
											+ plusonetranValue);

									if (!plusonetranValue) {
										console
											.log("plusonetranValue is not defined or empty.");
									} else {
										console
											.log("Value successfully retrieved: "
												+ plusonetranValue);
									}
								});

						var mrowCount = 2; // Starting index for mrowCount
						var cell2Value = 3; // Starting value for cell2
						// To keep track of the maximum value used for cell2
						function addNewRow() {
							var table = document.getElementById("usertablemulti");
							var row = table.insertRow();

							// Dynamically append mrowCount to each id
							row.insertCell().innerHTML = '<input type="text" name="tran_id" id="tran_id' + mrowCount + '" class="form-control form-control-sm" value="' + plusonetranValue + '" onkeyup="this.value = this.value.toUpperCase();">';
							row.insertCell().innerHTML = '<input type="text" name="part_tran_id" id="part_tran_id' + mrowCount + '" class="form-control form-control-sm" value="' + cell2Value + '" onkeyup="this.value = this.value.toUpperCase();">';
							cell2Value++; // Increment for the next row

							row.insertCell().innerHTML = '<input type="text" name="acct_num" id="acct_num_mass' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();" onclick="openModalmassentries(this);" data-row-id="' + mrowCount + '">';
							row.insertCell().innerHTML = '<input type="text" name="acct_name" id="acct_name_mass' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();">';
							row.insertCell().innerHTML = '<select name="part_tran_type" id="part_tran_type' + mrowCount + '" class="form-control form-control-sm" oninput="calculate()">' +
								'<option value="">Select</option>' +
								'<option value="Credit">Credit</option>' +
								'<option value="Debit">Debit</option>' +
								'</select>';
							row.insertCell().innerHTML = '<input type="text" name="tran_amt" id="tran_amt' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();" oninput="calculate();">';
							row.insertCell().innerHTML = '<input type="text" name="tran_particular" id="tran_particular' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();">';
							row.insertCell().innerHTML = '<input type="text" name="tran_remarks" id="tran_remarks' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();">';
							row.insertCell().innerHTML = '<input type="text" name="rate_code" id="rate_code' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();">';
							row.insertCell().innerHTML = '<input type="text" name="rate" id="rate' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();">';
							row.insertCell().innerHTML = '<input type="text" name="add_details" id="add_details' + mrowCount + '" class="form-control form-control-sm" onkeyup="this.value = this.value.toUpperCase();">';

							mrowCount++; // Increment row count for next row
						}


						function removeRow() {
							var tableBody = document
								.getElementById('usertablemulti'); // Get tbody element
							var rows = tableBody.getElementsByTagName('tr'); // Get all rows within tbody

							if (rows.length <= 2) { // Ensure at least the two initial rows remain
								alert("There is no dynamically added row available to delete!");
								return;
							}

							// Get the last dynamically added row (after the two initial rows)
							var lastRow = rows[rows.length - 1]; // Target the last row

							if (lastRow) {
								lastRow.remove(); // Remove the last dynamically added row

								cell2Value--;
								console
									.log("Dynamically added row deleted successfully.");
							} else {
								alert("No dynamically added rows found to delete.");
							}
						}

						function updateRow() {
							var table = document.getElementById('usertable')
								.getElementsByTagName('tbody')[0];
							var rows = table.getElementsByTagName('tr');
							for (var i = 0; i < rows.length; i++) {
								rows[i].cells[0].innerText = i + 1;
							}
						}
						function Submitvalues(value) {
							var tran_date = document.getElementById("tran_date").value;
							// alert(tran_date);
							var tran_type = document.getElementById("tran_type").value;
							// alert(tran_type);

							const dynamicValues = []; // Initialize the array here
							let totalCredit = 0; // Initialize total credit
							let totalDebit = 0; // Initialize total debit

							// Loop through each row in the tbody with id "usertablemulti"
							$("#usertablemulti tr").each(function () {
								var row = {}; // Create an object to hold the data for this row

								// Get values from the current row
								row.tran_id = $(this).find("input[name='tran_id']").val();
								row.part_tran_id = $(this).find("input[name='part_tran_id']").val();
								row.acct_num = $(this).find("input[name='acct_num']").val();
								row.acct_name = $(this).find("input[name='acct_name']").val();
								row.part_tran_type = $(this).find("select[name='part_tran_type']").val();
								row.tran_amt = parseFloat($(this).find("input[name='tran_amt']").val()); // Parse amount as float
								row.tran_particular = $(this).find("input[name='tran_particular']").val();
								row.tran_remarks = $(this).find("input[name='tran_remarks']").val();
								row.rate_code = $(this).find("input[name='rate_code']").val();
								row.rate = $(this).find("input[name='rate']").val();
								row.add_details = $(this).find("input[name='add_details']").val();

								// Calculate total credit and debit
								if (row.part_tran_type === "Credit") {
									totalCredit += row.tran_amt; // Add to total credit
								} else if (row.part_tran_type === "Debit") {
									totalDebit += row.tran_amt; // Add to total debit
								}

								dynamicValues.push(row); // Push the row object to the dynamicValues array
							});

							console.log(dynamicValues); // Log the values for debugging

							// Check if total credit equals total debit
							if (totalCredit === totalDebit) {
								// AJAX request to submit data
								$.ajax({
									url: './multilinejournalentries?tran_date=' + tran_date + '&tran_type=' + tran_type,
									data: JSON.stringify(dynamicValues),
									type: 'POST',
									contentType: 'application/json',
									success: function (data) {
										//  alert("Added Successfully"); // Show success message
										//  location.href = 'journalEntries?formmode=list1';
										// Redirect after successful submission
										$("#alertmsg1multi").text(data);
										$('#alertsvalmulti').modal("toggle");
									},
									error: function (xhr, status, error) {
										console.error("Error occurred: " + error);
									}
								});
							} else {
								// Show error message if totals do not match
								alert("Error: Total Credit and Total Debit are not equal.");
							}
						}

					</script>
					<script>
						function calculate() {
							let totalCredit = 0;
							let totalDebit = 0;

							// Loop through each row in the table body with id "usertablemulti"
							$("#usertablemulti tr").each(function () {
								// Get the transaction type (Credit/Debit)
								const tranType = $(this).find("select[name='part_tran_type']").val();

								// Get the transaction amount and convert it to a number
								let tranAmt = parseFloat($(this).find("input[name='tran_amt']").val()) || 0;

								// Sum Credit and Debit separately
								if (tranType === "Credit") {
									totalCredit += tranAmt;
								} else if (tranType === "Debit") {
									totalDebit += tranAmt;
								}
							});

							// Update the UI with the calculated totals
							document.getElementById("totalCredit").innerText = totalCredit.toFixed(2);
							document.getElementById("totalDebit").innerText = totalDebit.toFixed(2);
						}


					</script>
					<script>


					</script>
				</div>

			</div>



		</div>
	</div>

	<!-- ------------------------------------Modal Boxes---------------------------------- -->

	<!-- ------------------------------------Account Number Mdal---------------------------------- -->

	<div id="myModal" class="modal" style="font-size:120%;">
		<div class="modal-content">
			<div class="close text-right" onclick="closeModal(this);">&times;</div>
			<form id="uploadForm1" method="post" autocomplete="off">
				<div class="panel panel-primary filterable">
					<button class="btn text-white btn-filter btn-primary float-right">filter</button>

					<div style="max-height: 350px; overflow-y: auto;">
						<table class="table table-bordered table-sm">
							<thead>
								<tr class="filters">

									<th><input type="text" id="filterclassification" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Classification" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Account Number" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Account Name" disabled>
									</th>
									<th><input type="text" oninput="filtermodal()" id="filtercurrency"
											class="form-control font-weight-bold" placeholder="Currency" disabled></th>
									<th><input type="text" oninput="filtermodal()" id="filterdebit"
											class="form-control font-weight-bold" placeholder="Credit" disabled
											style="text-align: right;">
									</th>
									<th><input type="text" oninput="filtermodal()" id="filtercredit"
											class="form-control font-weight-bold" placeholder="Debit" disabled
											style="text-align: right;">
									</th>
									<th><input type="text" oninput="filtermodal()" id="filterbalance"
											class="form-control font-weight-bold" placeholder="Balance" disabled
											style="text-align: right;">
									</th>


									<th><input type="text" class="form-control font-weight-bold" placeholder="Action"
											disabled></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="salpay : ${popup}">
									<td th:text="${salpay?.classification}"></td>
									<td th:text="${salpay?.acct_num}"></td>
									<td th:text="${salpay?.acct_name}"></td>
									<td th:text="${salpay?.acct_crncy}"></td>

									<td th:text="${salpay?.cr_amt== 0 ? '0.00' :#numbers.formatDecimal(salpay?.cr_amt, 0, 'COMMA', 2, 'POINT')}"
										style="text-align: right;"></td>
									<td th:text="${salpay?.dr_amt== 0 ? '0.00' :#numbers.formatDecimal(salpay?.dr_amt, 0, 'COMMA', 2, 'POINT')}"
										style="text-align: right;"></td>
									<td th:text="${salpay?.acct_bal== 0 ? '0.00' :#numbers.formatDecimal(salpay?.acct_bal, 0, 'COMMA', 2, 'POINT')}"
										style="text-align: right;"></td>

									<td style="text-align: center"><input type="radio" th:attr="data-acct_num=${salpay.acct_num},data-acct_name=${salpay.acct_name},data-acct_crncy=${salpay.acct_crncy}
											,data-ref_crncy=${salpay.ref_crncy}" onclick="setAccountDetails(this)" /></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="text-center">
						<button class="btn btn-primary" onclick="closeModal(this);">Close</button>
					</div>
				</div>
			</form>
		</div>
	</div>

	<div id="tranRefModal" class="modal" style="font-size:120%;">
		<div class="modal-content">
			<div class="close text-right" onclick="closeModalTran(this);">&times;</div>
			<form id="uploadForm1" method="post" autocomplete="off">
				<div class="panel panel-primary filterable">
					<button class="btn text-white btn-filter btn-primary float-right">filter</button>

					<div style="max-height: 350px; overflow-y: auto;">
						<table class="table table-bordered table-sm">
							<thead>
								<tr class="filters">

									<th><input type="text" id="filterclassification" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Tran Date" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Tran Id" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Part Tarn ID" disabled>
									</th>
									<th><input type="text" oninput="filtermodal()" id="filtercurrency"
											class="form-control font-weight-bold" placeholder="Org Tran Ref No"
											disabled></th>

									<th><input type="text" oninput="filtermodal()" id="filtercredit"
											class="form-control font-weight-bold" placeholder="Tran Amt" disabled
											style="text-align: right;">
									</th>
									<th><input type="text" oninput="filtermodal()" id="filterbalance"
											class="form-control font-weight-bold" placeholder="Outstanding Bal" disabled
											style="text-align: right;">
									</th>


									<th><input type="text" class="form-control font-weight-bold" placeholder="Action"
											disabled></th>
								</tr>
							</thead>
							<tbody id="tranRefBody">

							</tbody>
						</table>
					</div>
					<div class="text-center">
						<button class="btn btn-primary" onclick="closeModalTran(this);">Close</button>
					</div>
				</div>
			</form>
		</div>
	</div>



	<div id="myModalmass" class="modal">
		<div class="modal-content">
			<div class="close text-right" onclick="closeModalmass(this);">&times;</div>
			<form id="uploadForm1" method="post" autocomplete="off">
				<div class="panel panel-primary filterable">
					<button class="btn text-white btn-filter btn-primary">filter</button>

					<div style="max-height: 350px; overflow-y: auto;">
						<table class="table table-bordered table-sm">
							<thead>
								<tr class="filters">

									<th><input type="text" id="filterclassification" oninput="filtermodalmass"
											class="form-control font-weight-bold" placeholder="Classification" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodalmass"
											class="form-control font-weight-bold" placeholder="Account Number" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodalmass"
											class="form-control font-weight-bold" placeholder="Account Name" disabled>
									</th>
									<th><input type="text" oninput="filtermodalmass" id="filtercurrency"
											class="form-control font-weight-bold" placeholder="Currency" disabled></th>
									<th><input type="text" oninput="filtermodalmass" id="filterdebit"
											class="form-control font-weight-bold" placeholder="Credit" disabled
											style="text-align: right;">
									</th>
									<th><input type="text" oninput="filtermodalmass" id="filtercredit"
											class="form-control font-weight-bold" placeholder="Debit" disabled
											style="text-align: right;">
									</th>
									<th><input type="text" oninput="filtermodalmass" id="filterbalance"
											class="form-control font-weight-bold" placeholder="Balance" disabled
											style="text-align: right;">
									</th>


									<th><input type="text" class="form-control font-weight-bold" placeholder="Action"
											disabled></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="salpay, stat : ${popup}">
									<td th:text="${salpay?.classification}"></td>
									<td th:text="${salpay?.acct_num}"></td>
									<td th:text="${salpay?.acct_name}"></td>
									<td th:text="${salpay?.acct_crncy}"></td>

									<td th:text="${salpay?.cr_amt == 0 ? '0.00' : #numbers.formatDecimal(salpay?.cr_amt, 0, 'COMMA', 2, 'POINT')}"
										style="text-align: right;"></td>
									<td th:text="${salpay?.dr_amt == 0 ? '0.00' : #numbers.formatDecimal(salpay?.dr_amt, 0, 'COMMA', 2, 'POINT')}"
										style="text-align: right;"></td>
									<td th:text="${salpay?.acct_bal == 0 ? '0.00' : #numbers.formatDecimal(salpay?.acct_bal, 0, 'COMMA', 2, 'POINT')}"
										style="text-align: right;"></td>

									<td style="text-align: center">
										<input type="radio"
											th:attr="data-acct_num=${salpay.acct_num},data-acct_name=${salpay.acct_name},data-acct_crncy=${salpay.acct_crncy},data-ref_crncy=${salpay.ref_crncy}"
											onclick="setAccountDetailsmassentry(this)" />
									</td>
								</tr>
							</tbody>


							</tbody>

					</div>
					<div class="text-center">
						<button class="btn btn-primary" onclick="closeModalmass(this);">Close</button>
					</div>
				</div>
			</form>
		</div>
	</div>


	<div id="myModalval" class="modal">
		<div class="modal-content">
			<div class="close text-right" onclick="closeModal1(this);">&times;</div>
			<form id="uploadForm1" method="post" autocomplete="off">
				<div class="panel panel-primary filterable">
					<button class="btn text-white btn-filter btn-primary">filter</button>

					<div style="max-height: 350px; overflow-y: auto;">
						<table class="table table-bordered table-sm">
							<thead>
								<tr class="filters">

									<th><input type="text" id="filterclassification" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Account No" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Customer Id" disabled>
									</th>
									<th><input type="text" oninput="filtermodal()" id="filtercurrency"
											class="form-control font-weight-bold" placeholder="Customer Name" disabled>
									</th>

									<th><input type="text" class="form-control font-weight-bold" placeholder="Action"
											disabled></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="salpay : ${popupvalues}">
									<td th:text="${salpay?.depo_actno}"></td>
									<td th:text="${salpay?.cust_id}"></td>
									<td th:text="${salpay?.cust_name}"></td>

									<td style="text-align: center"><input type="radio"
											th:attr="data-acct_num=${salpay?.depo_actno},data-acct_name=${salpay?.cust_name}"
											onclick="setAccountDetailsvalues(this)" /></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="text-center">
						<button class="btn btn-primary" onclick="closeModal1(this);">Close</button>
					</div>
				</div>
			</form>
		</div>
	</div>

	<div id="myModalvalues" class="modal">
		<div class="modal-content">
			<div class="close text-right" onclick="closeModal1(this);">&times;</div>
			<form id="uploadForm1" method="post" autocomplete="off">
				<div class="panel panel-primary filterable">
					<button class="btn text-white btn-filter btn-primary">filter</button>

					<div style="max-height: 350px; overflow-y: auto;">
						<table class="table table-bordered table-sm">
							<thead>
								<tr class="filters">

									<th><input type="text" id="filterclassification" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Account No1" disabled>
									</th>
									<th><input type="text" id="filteraccountname" oninput="filtermodal()"
											class="form-control font-weight-bold" placeholder="Customer Id" disabled>
									</th>
									<th><input type="text" oninput="filtermodal()" id="filtercurrency"
											class="form-control font-weight-bold" placeholder="Customer Name" disabled>
									</th>

									<th><input type="text" class="form-control font-weight-bold" placeholder="Action"
											disabled></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="salpay : ${accountvalues}">
									<td th:text="${salpay?.loan_accountno}"></td>
									<td th:text="${salpay?.customer_id}"></td>
									<td th:text="${salpay?.customer_name}"></td>

									<td style="text-align: center"><input type="radio"
											th:attr="data-acct_num=${salpay?.loan_accountno}"
											onclick="setAccountDetailsvalues1(this)" /></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="text-center">
						<button class="btn btn-primary" onclick="closeModal2(this);">Close</button>
					</div>
				</div>
			</form>
		</div>
	</div>
	<!-- ------------------------------------Alert Modal ---------------------------------- -->
	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="normalalert" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content"
				style="position: fixed; left: 50%; transform: translate(-50%, 0%); width: 30%; height: 25%;">
				<div class="modal-header">
					<h5 class="modal-title">Alerts</h5>

					<button type="button" class="close" data-dismiss="modal" aria-hidden="true"
						onclick="$('#normalalert').modal('hide')"></button>
				</div>
				<div class="modal-body" style="text-align: center;">
					<h6 id="normalalertmsg"></h6>
					<button type="button" class="btn btn-primary" data-dismiss="modal"
						onclick="$('#normalalert').modal('hide')">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="normalalertvalues" tabindex="-1"
		role="dialog" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="width: 120%; height: 25%; margin-right: 480px;">
				<div class="card">
					<!-- Header with Alert Message -->
					<div class="modal-header" style="justify-content: center; width: 100%;">
						<h5 class="modal-title" id="popupAlert" style="font-size: 18px;">Upload
							Alerts</h5>
						<!-- Alert message will appear here -->
					</div>

					<!-- Body with Response -->
					<div class="modal-body"
						style="text-align: center; display: flex; flex-direction: column; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px;">
						<h6 id="alertmsg"></h6>
					</div>
					<!-- Footer with Close Button -->
					<div class="modal-footer" style="justify-content: center; width: 100%;">
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="backs()">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="alertsvalmulti" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="width: 120%; height: 25%; margin-right: 480px;">
				<div class="card">
					<!-- Header with Alert Message -->
					<div class="modal-header" style="justify-content: center; width: 100%;">
						<h5 class="modal-title" id="popupAlert" style="font-size: 13px">

							Alert Message
						</h5>

						<!-- Alert message will appear here -->
					</div>

					<!-- Body with Response -->
					<div class="modal-body"
						style="text-align: center; display: flex; justify-content: center; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px">
						<!-- <label>TRAN ID</label>
<input type="text" id="tran_id_model" th:value="${plusonetran2}" 
    style="border: none; background: none; outline: none;">
 -->
						<h6 id="alertmsg1multi"></h6>
						<!-- Response will be displayed here -->
					</div>

					<!-- Footer with Close Button -->
					<div class="modal-footer" style="justify-content: center; width: 100%;">
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="refreshPagemulti()">Close</button>
					</div>

				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="alertsval" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="width: 120%; height: 25%; margin-right: 480px;">
				<div class="card">
					<!-- Header with Alert Message -->
					<div class="modal-header" style="justify-content: center; width: 100%;">
						<h5 class="modal-title" id="popupAlert" style="font-size: 13px">

							Alert Message
						</h5>

						<!-- Alert message will appear here -->
					</div>

					<!-- Body with Response -->
					<div class="modal-body"
						style="text-align: center; display: flex; justify-content: center; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px">
						<!-- <label>TRAN ID</label>
<input type="text" id="tran_id_model" th:value="${plusonetran2}" 
    style="border: none; background: none; outline: none;">
 -->
						<h6 id="alertmsg1"></h6>
						<!-- Response will be displayed here -->
					</div>

					<!-- Footer with Close Button -->
					<div class="modal-footer" style="justify-content: center; width: 100%;">
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="refreshPage()">Close</button>
					</div>

				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" data-backdrop="false" data-keyboard="false" id="uploadfiles" tabindex="-1" role="dialog"
		aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
			<div class="modal-content" style="width: 120%; height: 25%; margin-right: 480px;">
				<div class="card">
					<!-- Header with Alert Message -->
					<div class="modal-header" style="justify-content: center; width: 100%;">
						<h5 class="modal-title" id="popupAlert" style="font-size: 18px;">Upload
							Files</h5>
						<!-- Alert message will appear here -->
					</div>

					<!-- Body with Response -->
					<div class="modal-body"
						style="text-align: center; display: flex; flex-direction: column; align-items: center; height: 100px; overflow-y: auto; font-weight: bold; font-size: 15px;">
						<div class="row formline">
							<div class="col-sm-6">Upload File :</div>
							<div class="col-sm-6">
								<form action="#" th:object="${reportform}" method="post" enctype="multipart/form-data"
									id="reportform">
									<input type="file" name="file" id="fileInput"
										class="form-control form-control-sm bg-white border border-dark"
										accept=".xml, .xls, .xlsx" />
									<button type="button" class="btn btn-primary"
										onclick="submitdatas()">Submit</button>
								</form>
							</div>
						</div>
					</div>


					<!-- Footer with Close Button -->
					<div class="modal-footer" style="justify-content: center; width: 100%;">
						<button type="button" class="btn btn-primary" data-dismiss="modal"
							onclick="refreshPage()">Close</button>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>

</html>